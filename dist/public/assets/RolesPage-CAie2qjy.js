import{w as k,u as T,r as P,x as M,j as e,S as m,y as z,D as I,E as w,G as p,H as L,J as u,K as E,B as y,L as R,M as H,N as Q,O as V,P as q,Q as B,R as O,U,V as F,W as G,X as $,Y as J,Z as K,A as W,g as X,_ as Y,$ as Z,a0 as _,a1 as ee,a2 as se,h as ae,q as ie,I as le,a3 as te,a4 as ne,a5 as re,a6 as ce,a7 as v,a8 as de,a9 as xe,aa as r,ab as b,ac as S,ad as A,ae as D}from"./index-BzQLEEGE.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=k("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);function he({roles:c,isLoading:g}){const{toast:f}=T(),[t,l]=P.useState(null),C=M(),j=t?c.find(s=>s.id===t):null,n=async()=>{if(t)try{await C.mutateAsync(t),f({title:"Rol șters",description:"Rolul a fost șters cu succes."})}catch{f({title:"Eroare",description:"Nu s-a putut șterge rolul.",variant:"destructive"})}finally{l(null)}};return g?e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{className:"h-8 w-full"}),e.jsx(m,{className:"h-8 w-full"}),e.jsx(m,{className:"h-8 w-full"}),e.jsx(m,{className:"h-8 w-full"}),e.jsx(m,{className:"h-8 w-full"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(z,{children:[e.jsx(I,{children:e.jsxs(w,{children:[e.jsx(p,{children:"Nume"}),e.jsx(p,{children:"Descriere"}),e.jsx(p,{children:"Permisiuni"}),e.jsx(p,{children:"Înregistrat"}),e.jsx(p,{className:"text-right",children:"Acțiuni"})]})}),e.jsx(L,{children:c.length===0?e.jsx(w,{children:e.jsx(u,{colSpan:5,className:"h-24 text-center",children:"Nu s-au găsit roluri"})}):c.map(s=>{const N=s.name==="admin"||s.name==="user";return e.jsxs(w,{children:[e.jsx(u,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx(oe,{className:"h-4 w-4 text-amber-500"}),s.name]})}),e.jsx(u,{children:s.description||"-"}),e.jsx(u,{children:e.jsx("span",{className:"text-muted-foreground",children:"Permisiuni gestionate separat"})}),e.jsx(u,{children:s.createdAt?e.jsx("span",{className:"text-sm text-muted-foreground",title:new Date(s.createdAt).toLocaleString("ro-RO"),children:E(new Date(s.createdAt),{addSuffix:!0,locale:J})}):"-"}),e.jsx(u,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(y,{variant:"ghost",size:"icon",asChild:!0,children:e.jsxs(R,{href:`/admin/roles/${s.id}/edit`,children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Editează"})]})}),!N&&e.jsxs(y,{variant:"ghost",size:"icon",onClick:()=>l(s.id),children:[e.jsx(Q,{className:"h-4 w-4 text-destructive"}),e.jsx("span",{className:"sr-only",children:"Șterge"})]})]})})]},s.id)})})]})}),e.jsx(V,{open:!!t,onOpenChange:s=>!s&&l(null),children:e.jsxs(q,{children:[e.jsxs(B,{children:[e.jsx(O,{children:"Ești sigur?"}),e.jsxs(U,{children:['Această acțiune va șterge definitiv rolul "',j==null?void 0:j.name,'" și nu poate fi anulată. Utilizatorii care au acest rol vor rămâne fără acesta.']})]}),e.jsxs(F,{children:[e.jsx(G,{children:"Anulează"}),e.jsx($,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:n,children:"Șterge"})]})]})})]})}function je(){const[c,g]=P.useState({page:1,limit:10}),[f,t]=P.useState(""),{data:l,isLoading:C,refetch:j}=K(c),n=i=>{g(a=>({...a,page:i}))},s=i=>{g(a=>({...a,page:1,limit:parseInt(i)}))},N=()=>{if(!l||!l.pagination||l.pagination.totalPages<=1)return null;const{page:i,totalPages:a}=l.pagination;let d=Math.max(1,i-2),x=Math.min(a,i+2);x-d<4&&a>5&&(d===1?x=Math.min(5,a):x===a&&(d=Math.max(1,a-4)));const o=[];d>1&&(o.push(e.jsx(r,{children:e.jsx(A,{onClick:()=>n(1),children:"1"})},"1")),d>2&&o.push(e.jsx(r,{children:e.jsx(D,{})},"ellipsis1")));for(let h=d;h<=x;h++)o.push(e.jsx(r,{children:e.jsx(A,{isActive:i===h,onClick:()=>n(h),children:h})},h));return x<a&&(x<a-1&&o.push(e.jsx(r,{children:e.jsx(D,{})},"ellipsis2")),o.push(e.jsx(r,{children:e.jsx(A,{onClick:()=>n(a),children:a})},a))),e.jsx(de,{className:"mt-4",children:e.jsxs(xe,{children:[e.jsx(r,{children:i===1?e.jsx(b,{"aria-disabled":"true",className:"pointer-events-none opacity-50"}):e.jsx(b,{onClick:()=>n(Math.max(1,i-1))})}),o,e.jsx(r,{children:i===a?e.jsx(S,{"aria-disabled":"true",className:"pointer-events-none opacity-50"}):e.jsx(S,{onClick:()=>n(Math.min(a,i+1))})})]})})};return e.jsx(W,{children:e.jsxs("div",{className:"flex flex-col space-y-8",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Gestionare Roluri"}),e.jsx("p",{className:"text-gray-500",children:"Administrați rolurile și permisiunile din sistem."})]}),e.jsxs(X,{children:[e.jsx(Y,{className:"px-5 pt-6 pb-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Roluri"}),e.jsx(_,{children:"Toate rolurile din sistem și permisiunile asociate"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y,{variant:"outline",size:"icon",onClick:()=>j(),title:"Reîmprospătează",children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx(y,{asChild:!0,children:e.jsxs(R,{href:"/admin/roles/new",children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Adaugă rol"]})})]})]})}),e.jsx(ae,{children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2 justify-between",children:[e.jsx("div",{className:"flex space-x-2",children:e.jsx("div",{className:"w-[280px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(le,{placeholder:"Caută roluri...",className:"pl-8",value:f,onChange:i=>t(i.target.value)})]})})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Afișează"}),e.jsxs(te,{value:String(c.limit),onValueChange:s,children:[e.jsx(ne,{className:"w-[70px]",children:e.jsx(re,{placeholder:"10"})}),e.jsxs(ce,{children:[e.jsx(v,{value:"5",children:"5"}),e.jsx(v,{value:"10",children:"10"}),e.jsx(v,{value:"20",children:"20"}),e.jsx(v,{value:"50",children:"50"})]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"roluri"})]})]}),e.jsx(he,{roles:(l==null?void 0:l.data)||[],isLoading:C}),N()]})})]})]})})}export{je as default};
