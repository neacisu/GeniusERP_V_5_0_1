import{a as q,j as e,cV as te,cW as ne,cp as re,cX as ce,cY as V,cZ as de,B as u,aQ as he,aS as oe,aU as xe,aV as me,be as B,aW as ue,bC as je,bD as pe,bF as ge,bh as fe,b7 as O,u as Ce,r as S,c_ as Ne,L as P,ao as ve,af as Se,ag as we,ah as w,c$ as t,q as be,I as ye,by as Ae,a3 as R,a4 as U,a5 as W,a6 as _,a7 as n,d0 as o,aY as Te,a1 as De,g as ke,_ as Pe,$ as Ee,h as Le,y as Me,D as ze,E as z,G as A,H as Ie,J as d,S as T,d1 as Fe,aJ as He,aK as Ve,ch as Be,aM as Oe,cg as Re,aO as $,aN as b,ax as Ue,M as We,cn as _e,d2 as $e,ci as Qe,aP as qe,a8 as Ge,a9 as Je,aa as D,ab as Xe,ad as I,ac as Ye}from"./index-BzQLEEGE.js";import{S as Ke,a as Ze,b as es,c as ss,d as as,e as ls,f as is,g as ts}from"./sheet-MC-BHhZs.js";import{P as ns}from"./pause-CZo1w7id.js";const rs=({title:x,description:g,backButton:y=!1,backHref:C,breadcrumbs:m,actions:v})=>{const[k,i]=q(),r=()=>{C?i(C):window.history.back()};return e.jsxs("div",{className:"flex flex-col space-y-2 pb-4",children:[m&&m.length>0&&e.jsx(te,{className:"mb-2",children:e.jsx(ne,{children:m.map((j,h)=>e.jsxs(re.Fragment,{children:[e.jsx(ce,{children:j.href?e.jsx(V,{href:j.href,children:j.label}):e.jsx(V,{children:j.label})}),h<m.length-1&&e.jsx(de,{})]},h))})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[y&&e.jsxs(u,{variant:"ghost",size:"icon",onClick:r,className:"mr-2",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Înapoi"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:x}),g&&e.jsx("p",{className:"text-muted-foreground mt-1",children:g})]})]}),v&&e.jsx("div",{className:"flex items-center space-x-2",children:v})]})]})},cs=({open:x,onOpenChange:g,onConfirm:y,onCancel:C,title:m,description:v,type:k="delete",confirmLabel:i,cancelLabel:r="Anulează",isLoading:j=!1})=>{let h=B,N="text-amber-500",p="destructive",f="Șterge";switch(k){case"delete":h=B,N="text-destructive",p="destructive",f="Șterge";break;case"cancel":h=O,N="text-amber-500",p="destructive",f="Anulează";break;case"deactivate":h=O,N="text-amber-500",p="outline",f="Dezactivează";break;case"activate":h=fe,N="text-green-500",p="default",f="Activează";break;case"info":h=ge,N="text-blue-500",p="default",f="Confirmă";break}const E=i||f,L=()=>{C&&C(),g(!1)},M=()=>{y()};return e.jsx(oe,{open:x,onOpenChange:g,children:e.jsxs(xe,{children:[e.jsxs(me,{className:"flex flex-col items-center text-center sm:text-left sm:items-start",children:[e.jsx("div",{className:`mb-2 ${N}`,children:e.jsx(h,{className:"h-8 w-8"})}),e.jsx(ue,{children:m}),e.jsx(je,{children:v})]}),e.jsxs(pe,{className:"sm:justify-end",children:[e.jsx(u,{variant:"outline",onClick:L,disabled:j,children:r}),e.jsx(u,{variant:p,onClick:M,disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Se procesează..."]}):E})]})]})})},ds=({type:x})=>(()=>{switch(x){case o.EMAIL:return"Email";case o.SMS:return"SMS";case o.SOCIAL:return"Social Media";case o.PUSH:return"Push Notificare";case o.WHATSAPP:return"WhatsApp";case o.MULTI_CHANNEL:return"Multi-canal";default:return x}})(),Q=x=>x?new Date(x).toLocaleDateString("ro-RO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",us=()=>{q();const{toast:x}=Ce(),[g,y]=S.useState(""),[C,m]=S.useState(""),[v,k]=S.useState(""),[i,r]=S.useState(1),[j,h]=S.useState(!1),[N,p]=S.useState(!1),[f,E]=S.useState(null),{campaigns:L,total:M,totalPages:c,isLoading:F,deleteCampaign:H,startCampaign:G,pauseCampaign:J,resumeCampaign:X}=Ne({status:C,type:v,search:g,page:i,pageSize:10}),Y=()=>{r(1),h(!1)},K=()=>{y(""),m(""),k(""),r(1)},Z=s=>{E(s),p(!0)},ee=async()=>{f&&(await H.mutateAsync(f),p(!1),E(null))},se=async s=>{try{await G.mutateAsync(s)}catch(l){console.error("Error starting campaign:",l)}},ae=async s=>{try{await J.mutateAsync(s)}catch(l){console.error("Error pausing campaign:",l)}},le=async s=>{try{await X.mutateAsync(s)}catch(l){console.error("Error resuming campaign:",l)}},ie=s=>{x({title:"Acțiune în dezvoltare",description:"Funcționalitatea de duplicare a campaniei va fi disponibilă în curând."})};return e.jsxs("div",{className:"flex-1 space-y-4 p-6",children:[e.jsx(rs,{title:"Campanii",description:"Gestionați campaniile de marketing",breadcrumbs:[{label:"Marketing",href:"/marketing"},{label:"Campanii"}],actions:e.jsx(u,{asChild:!0,children:e.jsxs(P,{href:"/marketing/campaigns/new",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Campanie nouă"]})})}),e.jsx(Se,{defaultValue:"all",className:"w-full",onValueChange:s=>{m(s==="all"?"":s),r(1)},children:e.jsxs(we,{className:"grid grid-cols-4 lg:grid-cols-7 w-full",children:[e.jsx(w,{value:"all",children:"Toate"}),e.jsx(w,{value:t.DRAFT,children:"Ciorne"}),e.jsx(w,{value:t.SCHEDULED,children:"Programate"}),e.jsx(w,{value:t.ACTIVE,children:"Active"}),e.jsx(w,{value:t.PAUSED,className:"hidden lg:flex",children:"Pausate"}),e.jsx(w,{value:t.COMPLETED,className:"hidden lg:flex",children:"Finalizate"}),e.jsx(w,{value:t.CANCELLED,className:"hidden lg:flex",children:"Anulate"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center justify-between",children:[e.jsxs("div",{className:"relative w-full sm:w-auto flex-1 max-w-sm",children:[e.jsx(be,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ye,{placeholder:"Caută campanii...",className:"pl-8",value:g,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[e.jsxs(Ke,{open:j,onOpenChange:h,children:[e.jsx(Ze,{asChild:!0,children:e.jsxs(u,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Filtre"})]})}),e.jsxs(es,{side:"right",children:[e.jsxs(ss,{children:[e.jsx(as,{children:"Filtrare campanii"}),e.jsx(ls,{children:"Aplicați filtre pentru a găsi campaniile dorite."})]}),e.jsxs("div",{className:"py-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(R,{value:C,onValueChange:s=>m(s),children:[e.jsx(U,{children:e.jsx(W,{placeholder:"Selectează status"})}),e.jsxs(_,{children:[e.jsx(n,{value:"",children:"Toate"}),e.jsx(n,{value:t.DRAFT,children:"Ciornă"}),e.jsx(n,{value:t.SCHEDULED,children:"Programată"}),e.jsx(n,{value:t.ACTIVE,children:"Activă"}),e.jsx(n,{value:t.PAUSED,children:"Pausată"}),e.jsx(n,{value:t.COMPLETED,children:"Finalizată"}),e.jsx(n,{value:t.CANCELLED,children:"Anulată"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Tip"}),e.jsxs(R,{value:v,onValueChange:s=>k(s),children:[e.jsx(U,{children:e.jsx(W,{placeholder:"Selectează tip"})}),e.jsxs(_,{children:[e.jsx(n,{value:"",children:"Toate"}),e.jsx(n,{value:o.EMAIL,children:"Email"}),e.jsx(n,{value:o.SMS,children:"SMS"}),e.jsx(n,{value:o.SOCIAL,children:"Social Media"}),e.jsx(n,{value:o.PUSH,children:"Push Notificare"}),e.jsx(n,{value:o.WHATSAPP,children:"WhatsApp"}),e.jsx(n,{value:o.MULTI_CHANNEL,children:"Multi-canal"})]})]})]})]}),e.jsxs(is,{children:[e.jsx(ts,{asChild:!0,children:e.jsx(u,{variant:"outline",onClick:K,children:"Resetează"})}),e.jsx(u,{onClick:Y,children:"Aplică filtre"})]})]})]}),e.jsxs(u,{variant:"outline",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Export"})]}),e.jsxs(u,{variant:"outline",onClick:()=>r(1),children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Actualizează"})]})]})]}),e.jsxs(ke,{children:[e.jsx(Pe,{className:"px-6 py-4",children:e.jsxs(Ee,{children:[M," ",M===1?"campanie":"campanii"]})}),e.jsx(Le,{className:"p-0",children:e.jsxs(Me,{children:[e.jsx(ze,{children:e.jsxs(z,{children:[e.jsx(A,{children:"Nume"}),e.jsx(A,{children:"Tip"}),e.jsx(A,{children:"Status"}),e.jsx(A,{className:"hidden md:table-cell",children:"Programată"}),e.jsx(A,{className:"hidden lg:table-cell",children:"Ultimul update"}),e.jsx(A,{className:"text-right",children:"Acțiuni"})]})}),e.jsx(Ie,{children:F?Array(5).fill(0).map((s,l)=>e.jsxs(z,{children:[e.jsx(d,{children:e.jsx(T,{className:"h-5 w-[200px]"})}),e.jsx(d,{children:e.jsx(T,{className:"h-5 w-[80px]"})}),e.jsx(d,{children:e.jsx(T,{className:"h-5 w-[100px]"})}),e.jsx(d,{className:"hidden md:table-cell",children:e.jsx(T,{className:"h-5 w-[120px]"})}),e.jsx(d,{className:"hidden lg:table-cell",children:e.jsx(T,{className:"h-5 w-[120px]"})}),e.jsx(d,{className:"text-right",children:e.jsx(T,{className:"h-9 w-[50px] ml-auto"})})]},l)):L.length===0?e.jsx(z,{children:e.jsx(d,{colSpan:6,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"Nu există campanii care să corespundă filtrelor."}),e.jsx(u,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(P,{href:"/marketing/campaigns/new",children:"Creați o campanie"})})]})})}):L.map(s=>e.jsxs(z,{className:"hover:bg-muted/50",children:[e.jsxs(d,{children:[e.jsx(P,{href:`/marketing/campaigns/${s.id}`,children:e.jsx("span",{className:"font-medium hover:text-primary hover:underline cursor-pointer",children:s.name})}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-[200px] hidden md:block",children:s.description})]}),e.jsx(d,{children:e.jsx(ds,{type:s.type})}),e.jsx(d,{children:e.jsx(Fe,{status:s.status})}),e.jsx(d,{className:"hidden md:table-cell",children:Q(s.scheduledAt)}),e.jsx(d,{className:"hidden lg:table-cell",children:Q(s.updatedAt)}),e.jsx(d,{className:"text-right",children:e.jsxs(He,{children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(u,{variant:"ghost",size:"icon",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Acțiuni"})]})}),e.jsxs(Oe,{align:"end",className:"w-[180px]",children:[e.jsx(Re,{children:"Acțiuni campanie"}),e.jsx($,{}),e.jsx(b,{asChild:!0,children:e.jsxs(P,{href:`/marketing/campaigns/${s.id}`,children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Vizualizare"]})}),e.jsx(b,{asChild:!0,children:e.jsxs(P,{href:`/marketing/campaigns/edit/${s.id}`,children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Editare"]})}),s.status===t.DRAFT&&e.jsxs(b,{onClick:()=>se(s.id),children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Trimite acum"]}),s.status===t.ACTIVE&&e.jsxs(b,{onClick:()=>ae(s.id),children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Pausează"]}),s.status===t.PAUSED&&e.jsxs(b,{onClick:()=>le(s.id),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Reia"]}),e.jsxs(b,{onClick:()=>ie(s.id),children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Duplică"]}),e.jsx($,{}),e.jsxs(b,{onClick:()=>Z(s.id),className:"text-red-600 focus:text-red-600",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Șterge"]})]})]})})]},s.id))})]})})]}),!F&&c>1&&e.jsx(Ge,{className:"mx-auto",children:e.jsxs(Je,{children:[e.jsx(D,{children:e.jsx(Xe,{onClick:()=>r(s=>Math.max(1,s-1)),className:i===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,c)}).map((s,l)=>{let a;return c<=5||i<=2?a=l+1:i>=c-2+1?a=c-4+l:a=i-2+l,c>5&&a===1&&l===0?e.jsx(D,{children:e.jsx(I,{isActive:i===a,onClick:()=>r(a),children:a})},a):c>5&&a===c&&l===4?e.jsx(D,{children:e.jsx(I,{isActive:i===a,onClick:()=>r(a),children:a})},a):c>5&&l===1&&i>3||l===3&&i<c-2?e.jsx(D,{children:e.jsx("span",{className:"flex h-9 w-9 items-center justify-center",children:"..."})},`ellipsis-${l}`):a>0&&a<=c?e.jsx(D,{children:e.jsx(I,{isActive:i===a,onClick:()=>r(a),children:a})},a):null}),e.jsx(D,{children:e.jsx(Ye,{onClick:()=>r(s=>Math.min(c,s+1)),className:i===c?"pointer-events-none opacity-50":"cursor-pointer"})})]})}),e.jsx(cs,{open:N,onOpenChange:p,onConfirm:ee,title:"Confirmă ștergerea",description:"Sunteți sigur că doriți să ștergeți această campanie? Această acțiune nu poate fi anulată.",type:"delete",isLoading:H.isPending})]})};export{us as default};
