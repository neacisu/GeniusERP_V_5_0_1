import{a as re,c as le,u as ne,r as V,j as e,v as ce,ar as T,B as i,aQ as de,ai as l,aY as me,M as A,aJ as U,aK as q,ch as oe,aM as H,aN as n,bs as j,bP as N,ay as u,aO as xe,N as he,af as pe,ag as ue,ah as o,aj as x,g as h,_ as G,$ as J,h as p,bn as K,ap as je,bS as Ne,bT as ge,aH as g,aI as v,cv as Q,bv as W,bN as D,aq as ve,ax as I,cw as fe}from"./index-BzQLEEGE.js";import{C as k}from"./CRMModuleLayout-Dn1kMNZ5.js";import{a as be}from"./useCompanies-BIGKDgQA.js";const z=[{id:"1",customerId:"1",firstName:"Ion",lastName:"Ionescu",email:"ion.ionescu@acme.ro",phone:"0721 234 567",title:"Director General",department:"Management",decisionMaker:!0,influenceLevel:10,notes:"Contact principal pentru decizii strategice."},{id:"2",customerId:"1",firstName:"Maria",lastName:"Popescu",email:"maria.popescu@acme.ro",phone:"0722 345 678",title:"Director Financiar",department:"Financiar",decisionMaker:!0,influenceLevel:9,notes:"Responsabilă cu aprobările bugetare și detaliile contractuale."},{id:"3",customerId:"1",firstName:"Mihai",lastName:"Stanescu",email:"mihai.stanescu@acme.ro",phone:"0723 456 789",title:"Manager IT",department:"IT",decisionMaker:!1,influenceLevel:7,notes:"Responsabil tehnic pentru implementare și integrare."}],ye=[{id:"1",customerId:"1",title:"Licențe ERP Enterprise",amount:25e4,stage:"Negociere",probability:75,expectedCloseDate:"2025-05-15",createdAt:"2025-03-20"},{id:"2",customerId:"1",title:"Servicii Implementare",amount:12e4,stage:"Propunere",probability:60,expectedCloseDate:"2025-06-01",createdAt:"2025-03-25"},{id:"3",customerId:"1",title:"Mentenanță Anuală",amount:75e3,stage:"Câștigat",probability:100,expectedCloseDate:"2025-04-05",createdAt:"2025-02-15",actualCloseDate:"2025-04-01"}],we=[{id:"1",customerId:"1",title:"Apel introductiv",type:"call",description:"Discuție inițială despre nevoile companiei și posibile soluții.",status:"completed",startTime:"2025-03-10T10:00:00",endTime:"2025-03-10T10:30:00",contactId:"1",assignedTo:"Alexandru Popa"},{id:"2",customerId:"1",title:"Întâlnire prezentare soluții",type:"meeting",description:"Prezentarea detaliată a soluțiilor pentru management și operațiuni.",status:"completed",startTime:"2025-03-17T14:00:00",endTime:"2025-03-17T15:30:00",contactId:"1",assignedTo:"Alexandru Popa"},{id:"3",customerId:"1",title:"Trimitere ofertă preliminară",type:"email",description:"Ofertă pentru licențe ERP și servicii asociate de implementare.",status:"completed",startTime:"2025-03-20T09:15:00",contactId:"2",assignedTo:"Maria Dinu"},{id:"4",customerId:"1",title:"Întâlnire tehnică",type:"meeting",description:"Discuție tehnică despre arhitectură și integrare cu sistemele existente.",status:"completed",startTime:"2025-03-25T11:00:00",endTime:"2025-03-25T12:30:00",contactId:"3",assignedTo:"Andrei Vasilescu"},{id:"5",customerId:"1",title:"Negociere contract",type:"meeting",description:"Negocierea termenilor contractuali și detaliilor financiare.",status:"upcoming",startTime:"2025-04-15T14:00:00",endTime:"2025-04-15T16:00:00",contactId:"2",assignedTo:"Alexandru Popa"}],Ce=[{id:"1",customerId:"1",title:"Notă întâlnire inițială",content:"Client interesat de soluții complete de management. Au exprimat nevoi specifice pentru departamentul financiar și operațiuni. Buget estimat: 300.000-400.000 RON.",createdAt:"2025-03-10T11:00:00",createdBy:"Alexandru Popa"},{id:"2",customerId:"1",title:"Feedback demo",content:"Feedback pozitiv după demonstrația produsului. Director general impresionat de funcționalitățile de raportare. Directorul financiar are întrebări despre integrarea cu sistemul actual de contabilitate.",createdAt:"2025-03-18T16:30:00",createdBy:"Alexandru Popa"},{id:"3",customerId:"1",title:"Discuție tehnică",content:"Echipa IT a clientului preferă o abordare graduală pentru implementare, începând cu modulele financiare și apoi extinderea către operațiuni. Vor furniza specificațiile tehnice pentru integrare în următoarele zile.",createdAt:"2025-03-26T13:45:00",createdBy:"Andrei Vasilescu"}],Ie=()=>{var _,$;const[,P]=re(),{id:c}=le(),{toast:M}=ne(),[Y,S]=V.useState("overview"),[X,E]=V.useState(!1),{data:a,isLoading:Z,isError:L,error:F,refetch:ee}=be(c||""),f=z.filter(s=>s.customerId===c),d=ye.filter(s=>s.customerId===c),m=we.filter(s=>s.customerId===c),b=Ce.filter(s=>s.customerId===c),se=async()=>{await ee(),M({title:"Companie actualizată",description:"Datele companiei au fost actualizate cu succes."})},t=s=>{s==="edit"?E(!0):M({title:"Acțiune",description:`Ai selectat acțiunea: ${s}`})};if(Z)return e.jsx(k,{activeTab:"customers",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:[e.jsx(ce,{className:"h-12 w-12 mb-4 text-primary animate-spin"}),e.jsx("h2",{className:"text-xl font-medium mb-2",children:"Se încarcă datele companiei..."})]})});if(L||!a)return e.jsx(k,{activeTab:"customers",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:[e.jsx(T,{className:"h-16 w-16 mb-4 text-gray-400"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Companie negăsită"}),e.jsx("p",{className:"text-gray-500 mb-6",children:L&&F instanceof Error?F.message:`Nu am putut găsi compania cu ID-ul ${c}`}),e.jsx(i,{onClick:()=>P("/crm/customers"),children:"Înapoi la lista de companii"})]})});const y=s=>new Intl.NumberFormat("ro-RO",{style:"currency",currency:"RON",maximumFractionDigits:0}).format(s),O=s=>{const r=new Date(s);return new Intl.DateTimeFormat("ro-RO",{year:"numeric",month:"long",day:"numeric"}).format(r)},w=s=>{const r=new Date(s);return new Intl.DateTimeFormat("ro-RO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)},R=s=>{switch(s){case"call":return e.jsx(v,{className:"h-4 w-4"});case"email":return e.jsx(g,{className:"h-4 w-4"});case"meeting":return e.jsx(Q,{className:"h-4 w-4"});case"task":return e.jsx(W,{className:"h-4 w-4"});case"note":return e.jsx(D,{className:"h-4 w-4"});default:return e.jsx(u,{className:"h-4 w-4"})}},ae=s=>s.split(" ").map(r=>r[0]).join("").toUpperCase().substring(0,2),te=(s="lead")=>{switch(s.toLowerCase()){case"lead":return"outline";case"prospect":return"secondary";case"customer":return"default";case"partner":return"secondary";default:return"outline"}},ie=(s="lead")=>({lead:"Lead",prospect:"Prospect",customer:"Client",partner:"Partener"})[s.toLowerCase()]||s;return e.jsx(k,{activeTab:"customers",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(i,{variant:"ghost",onClick:()=>P("/crm/customers"),className:"mb-2 -ml-4 h-8 px-2",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Înapoi la lista de companii"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"h-6 w-6 text-primary mr-2"}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a.name}),a.type&&e.jsx(l,{variant:te(a.type),className:"ml-3",children:ie(a.type)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>t("export"),children:[e.jsx(me,{className:"h-4 w-4 mr-1.5"}),"Export"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>t("edit"),children:[e.jsx(A,{className:"h-4 w-4 mr-1.5"}),"Editează"]}),e.jsxs(U,{children:[e.jsx(q,{asChild:!0,children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsxs(H,{align:"end",children:[e.jsxs(n,{onClick:()=>t("addContact"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Adaugă contact"]}),e.jsxs(n,{onClick:()=>t("addDeal"),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Adaugă oportunitate"]}),e.jsxs(n,{onClick:()=>t("addActivity"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Programează activitate"]}),e.jsx(xe,{}),e.jsxs(n,{onClick:()=>t("delete"),className:"text-red-600",children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Șterge companie"]})]})]})]})]}),e.jsxs(pe,{value:Y,onValueChange:S,className:"w-full",children:[e.jsx("div",{className:"border-b",children:e.jsxs(ue,{className:"bg-transparent h-auto p-0 w-full justify-start",children:[e.jsx(o,{value:"overview",className:"py-2.5 px-4 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none",children:"Prezentare generală"}),e.jsxs(o,{value:"contacts",className:"py-2.5 px-4 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none",children:["Contacte (",f.length,")"]}),e.jsxs(o,{value:"deals",className:"py-2.5 px-4 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none",children:["Oportunități (",d.length,")"]}),e.jsxs(o,{value:"activities",className:"py-2.5 px-4 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none",children:["Activități (",m.length,")"]}),e.jsxs(o,{value:"notes",className:"py-2.5 px-4 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none",children:["Note (",b.length,")"]}),e.jsx(o,{value:"documents",className:"py-2.5 px-4 rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none",children:"Documente"})]})}),e.jsx(x,{value:"overview",className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(h,{className:"lg:col-span-2",children:[e.jsx(G,{children:e.jsx(J,{children:"Informații companie"})}),e.jsxs(p,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Domeniu de activitate"}),e.jsx("p",{children:a.industry||"Nedefinit"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Segment"}),e.jsx("p",{children:a.segment||"Nedefinit"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"CUI"}),e.jsx("p",{children:a.fiscalCode||"Nedefinit"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Nr. Înregistrare"}),e.jsx("p",{children:a.registrationNumber||"Nedefinit"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Plătitor TVA"}),e.jsx("p",{children:a.vatPayer?"Da":"Nu"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Sursă Lead"}),e.jsx("p",{children:((_=a.customFields)==null?void 0:_.source)||"Nedefinit"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Cifră de afaceri anuală"}),e.jsx("p",{children:a.annualRevenue?y(a.annualRevenue):"Nedefinit"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Număr angajați"}),e.jsx("p",{children:(($=a.customFields)==null?void 0:$.employeeCount)||"Nedefinit"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Tip relație comercială"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"flex items-center",children:[a.isCustomer?e.jsx(l,{variant:"default",className:"mr-2",children:"Client"}):e.jsx(l,{variant:"outline",className:"mr-2",children:"Nu este client"}),a.analythic_4111&&e.jsxs("span",{className:"text-sm text-primary-600 ml-1",children:["Cont analitic: ",a.analythic_4111]})]}),e.jsxs("p",{className:"flex items-center",children:[a.isSupplier?e.jsx(l,{variant:"secondary",className:"mr-2",children:"Furnizor"}):e.jsx(l,{variant:"outline",className:"mr-2",children:"Nu este furnizor"}),a.analythic_401&&e.jsxs("span",{className:"text-sm text-primary-600 ml-1",children:["Cont analitic: ",a.analythic_401]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-1 mt-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Adresă"}),e.jsxs("p",{children:[a.address&&e.jsxs("span",{children:[a.address,", "]}),a.city&&e.jsxs("span",{children:[a.city,", "]}),a.county&&e.jsxs("span",{children:[a.county,", "]}),a.postalCode&&e.jsxs("span",{children:[a.postalCode,", "]}),a.country&&e.jsx("span",{children:a.country})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Telefon"}),e.jsx("p",{children:e.jsx("a",{href:`tel:${a.phone}`,className:"text-primary hover:underline",children:a.phone||"Nedefinit"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{children:e.jsx("a",{href:`mailto:${a.email}`,className:"text-primary hover:underline",children:a.email||"Nedefinit"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Website"}),e.jsx("p",{children:a.website?e.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:a.website.replace(/^https?:\/\/(www\.)?/i,"")}):"Nedefinit"})]})]}),a.notes&&e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Note"}),e.jsx("p",{className:"text-sm",children:a.notes})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(h,{children:[e.jsx(G,{children:e.jsx(J,{children:"Scor & Metrici"})}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-6",children:[(a.analythic_401||a.analythic_4111)&&e.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Conturi analitice"}),e.jsxs("div",{className:`grid ${a.analythic_401&&a.analythic_4111?"grid-cols-2":"grid-cols-1"} gap-3`,children:[a.analythic_4111&&e.jsxs("div",{className:"bg-green-50 text-green-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-700",children:"Cont analitic clienți"}),e.jsx("p",{className:"text-lg font-medium",children:a.analythic_4111})]}),a.analythic_401&&e.jsxs("div",{className:"bg-blue-50 text-blue-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-blue-700",children:"Cont analitic furnizori"}),e.jsx("p",{className:"text-lg font-medium",children:a.analythic_401})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Scor Lead"}),e.jsxs("span",{className:"text-sm font-medium",children:[a.leadScore,"/100"]})]}),e.jsx(K,{value:a.leadScore,className:"h-2"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Statistici Oportunități"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-primary/10 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Active"}),e.jsx("p",{className:"text-xl font-medium",children:d.filter(s=>s.stage!=="Câștigat"&&s.stage!=="Pierdut").length})]}),e.jsxs("div",{className:"bg-primary/10 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Câștigate"}),e.jsx("p",{className:"text-xl font-medium",children:d.filter(s=>s.stage==="Câștigat").length})]})]}),e.jsx("div",{className:"bg-primary/10 rounded-lg p-3",children:e.jsxs("div",{className:"flex justify-between items-baseline",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Valoare totală"}),e.jsx("p",{className:"text-xl font-medium",children:y(d.reduce((s,r)=>s+r.amount,0))})]})})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Activitate recentă"}),e.jsxs("div",{className:"space-y-4",children:[m.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:`rounded-full p-1.5 ${s.status==="completed"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:R(s.type)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500",children:w(s.startTime)})]})]},s.id)),m.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"Nicio activitate înregistrată"}),m.length>0&&e.jsx(i,{variant:"ghost",size:"sm",className:"w-full mt-2",onClick:()=>S("activities"),children:"Vezi toate activitățile"})]})]})]})})]})})]})}),e.jsxs(x,{value:"contacts",className:"pt-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(i,{onClick:()=>t("addContact"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Adaugă contact"]})}),f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border rounded-lg",children:[e.jsx(je,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-xl font-medium mb-2",children:"Niciun contact înregistrat"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm text-center",children:"Adaugă contacte pentru a gestiona persoanele cheie din această companie."}),e.jsxs(i,{onClick:()=>t("addContact"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Adaugă primul contact"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(s=>e.jsx(h,{className:"h-full shadow-sm",children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(Ne,{className:"h-12 w-12",children:e.jsx(ge,{className:"bg-primary/10 text-primary",children:ae(`${s.firstName} ${s.lastName}`)})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium",children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.title})]})]}),e.jsxs("div",{className:"space-y-2",children:[s.department&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(T,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{children:s.department})]}),s.email&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(g,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-primary hover:underline",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(v,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("a",{href:`tel:${s.phone}`,className:"text-primary hover:underline",children:s.phone})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[s.decisionMaker&&e.jsx(l,{className:"bg-amber-100 text-amber-800 hover:bg-amber-100",children:"Decident"}),e.jsxs(l,{variant:"outline",className:"bg-blue-50 text-blue-700 hover:bg-blue-50",children:["Influență: ",s.influenceLevel,"/10"]})]}),s.notes&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("p",{className:"text-sm",children:s.notes})}),e.jsxs("div",{className:"flex justify-between mt-4 pt-3 border-t",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>t("callContact"),className:"h-8",children:[e.jsx(v,{className:"h-3.5 w-3.5 mr-1.5"}),"Sună"]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>t("emailContact"),className:"h-8",children:[e.jsx(g,{className:"h-3.5 w-3.5 mr-1.5"}),"Email"]})]})]})},s.id))})]}),e.jsxs(x,{value:"deals",className:"pt-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(i,{onClick:()=>t("addDeal"),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Adaugă oportunitate"]})}),d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border rounded-lg",children:[e.jsx(N,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-xl font-medium mb-2",children:"Nicio oportunitate înregistrată"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm text-center",children:"Adaugă oportunități pentru a urmări potențialele afaceri cu această companie."}),e.jsxs(i,{onClick:()=>t("addDeal"),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Adaugă prima oportunitate"]})]}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsx(h,{className:"shadow-sm",children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[e.jsx(l,{className:s.stage==="Câștigat"?"bg-green-100 text-green-800 hover:bg-green-100":s.stage==="Pierdut"?"bg-red-100 text-red-800 hover:bg-red-100":"bg-blue-100 text-blue-800 hover:bg-blue-100",children:s.stage}),e.jsxs(l,{variant:"outline",children:[s.probability,"% probabilitate"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Valoare"}),e.jsx("p",{className:"text-lg font-medium",children:y(s.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Data estimată închidere"}),e.jsx("p",{children:O(s.expectedCloseDate)}),s.actualCloseDate&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Închis la: ",O(s.actualCloseDate)]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>t("viewDeal"),children:"Vezi detalii"}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>t("editDeal"),children:[e.jsx(A,{className:"h-3.5 w-3.5 mr-1.5"}),"Editează"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Progres"}),e.jsxs("span",{className:"font-medium",children:[s.probability,"%"]})]}),e.jsx(K,{value:s.probability,className:"h-2 mt-2"})]})]})},s.id))})]}),e.jsxs(x,{value:"activities",className:"pt-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(U,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(i,{children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Adaugă activitate"]})}),e.jsxs(H,{align:"end",children:[e.jsxs(n,{onClick:()=>t("addCall"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Înregistrează apel"]}),e.jsxs(n,{onClick:()=>t("scheduleMeeting"),children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Programează întâlnire"]}),e.jsxs(n,{onClick:()=>t("sendEmail"),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Trimite email"]}),e.jsxs(n,{onClick:()=>t("createTask"),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Crează sarcină"]})]})]})}),m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border rounded-lg",children:[e.jsx(u,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-xl font-medium mb-2",children:"Nicio activitate înregistrată"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm text-center",children:"Înregistrează activități cum ar fi apeluri, întâlniri sau email-uri pentru a urmări interacțiunile cu această companie."}),e.jsxs(i,{onClick:()=>t("addActivity"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Adaugă prima activitate"]})]}):e.jsx("div",{className:"space-y-4",children:m.map(s=>{var r,B;return e.jsx(h,{className:"shadow-sm",children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`rounded-full p-2 ${s.status==="completed"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:R(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[w(s.startTime),s.endTime&&` - ${new Date(s.endTime).toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"})}`]})]}),e.jsx(l,{className:s.status==="completed"?"bg-green-100 text-green-800 hover:bg-green-100":"bg-blue-100 text-blue-800 hover:bg-blue-100",children:s.status==="completed"?"Completat":"Programat"})]}),s.contactId&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(j,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[(r=z.find(C=>C.id===s.contactId))==null?void 0:r.firstName," ",(B=z.find(C=>C.id===s.contactId))==null?void 0:B.lastName]})]}),s.description&&e.jsx("p",{className:"mt-3 text-sm",children:s.description}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Asignat către: ",s.assignedTo]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>t("viewActivity"),children:"Vezi detalii"}),s.status!=="completed"&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>t("completeActivity"),children:"Marchează ca completat"})]})]})]})]})})},s.id)})})]}),e.jsxs(x,{value:"notes",className:"pt-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(i,{onClick:()=>t("addNote"),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Adaugă notă"]})}),b.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border rounded-lg",children:[e.jsx(ve,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-xl font-medium mb-2",children:"Nicio notă înregistrată"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm text-center",children:"Adaugă note pentru a păstra informații importante despre această companie."}),e.jsxs(i,{onClick:()=>t("addNote"),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Adaugă prima notă"]})]}):e.jsx("div",{className:"space-y-4",children:b.map(s=>e.jsx(h,{className:"shadow-sm",children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[w(s.createdAt)," • ",s.createdBy]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:s.content})})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>t("editNote"),children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Editează"})]})})]})})},s.id))})]}),e.jsxs(x,{value:"documents",className:"pt-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(i,{onClick:()=>t("uploadDocument"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Încarcă document"]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border rounded-lg",children:[e.jsx(I,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-xl font-medium mb-2",children:"Niciun document încărcat"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm text-center",children:"Încarcă documente relevante cum ar fi contracte, oferte sau alte materiale."}),e.jsxs(i,{onClick:()=>t("uploadDocument"),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Încarcă primul document"]})]})]})]}),e.jsx(fe,{isOpen:X,onOpenChange:E,initialData:a,isEditing:!0,onSubmit:se})]})})};export{Ie as default};
