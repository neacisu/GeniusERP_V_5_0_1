import{w as Qi,am as kj,j as e,B as F,an as Uo,L as Fi,C as Mj,ao as it,p as gs,ap as Xn,aq as Vj,ar as Ui,as as Bj,at as Uj,au as Wo,g as ue,h as pe,av as Wj,u as Ns,aw as Cn,al as Ie,ak as ln,a as Ln,ax as on,ay as Sn,az as Wi,aA as qj,_ as Se,$ as _e,a0 as Be,aB as xr,aC as rt,r as M,aD as pr,aE as Ji,aF as ia,q as Zs,I as te,a3 as Pe,a4 as Re,a5 as De,a6 as Le,a7 as w,a1 as Lr,y as Ys,D as Qs,E as Ge,G as ye,aG as $s,H as Js,J as oe,aH as qo,aI as $j,aJ as la,aK as ca,aL as oa,aM as da,aN as Rs,aO as ua,aP as ma,ai as mn,c as ct,aQ as ot,aR as vn,Y as cn,aS as qi,aT as Gj,aU as $i,aV as Gi,aW as Hi,aX as $o,aY as Fr,f as Gs,t as Hs,z as be,F as Ks,af as Xs,ag as er,ah as en,aj as hn,i as C,k as S,l as _,m as A,o as Q,n as k,T as Ls,aZ as Hj,a_ as Kj,a$ as Zj,b0 as Yj,b1 as Qj,b2 as hs,b3 as xs,b4 as ps,b5 as fs,b6 as as,s as vs,b7 as Io,b8 as tt,b9 as Dr,ba as ls,bb as Ds,bc as cs,bd as os,be as Jj,bf as Xt,bg as Rr,bh as hr,bi as xe,bj as Ps,bk as Wn,bl as js,v as qn,bm as at,bn as Go,bo as Xj,S as In,bp as ra,bq as zo,br as ea,bs as eg,bt as ng,bu as sg,bv as rg,bw as tg,bx as Oi,by as ha,bz as ag,bA as Ho,a8 as Ko,a9 as Zo,aa as is,ab as Yo,ad as na,ae as Ki,ac as Qo,bB as ta,bC as Po,bD as Ro,bE as Do,bF as ig,bG as lg,bH as cg,A as og,bI as dg,bJ as qe,bK as ug}from"./index-BzQLEEGE.js";import{B as Zi}from"./briefcase-yOoPYM-E.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Qi("BriefcaseBusiness",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Qi("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Qi("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);function mg(p){const c=kj(p).getDay();return c===0||c===6}const hg=[{id:"employees",label:"Angajați",href:"/hr/employees",icon:e.jsx(Xn,{className:"w-5 h-5 mr-2"})},{id:"contracts",label:"Contracte",href:"/hr/contracts",icon:e.jsx(Vj,{className:"w-5 h-5 mr-2"})},{id:"departments",label:"Departamente",href:"/hr/departments",icon:e.jsx(Ui,{className:"w-5 h-5 mr-2"})},{id:"positions",label:"Poziții",href:"/hr/positions",icon:e.jsx(aa,{className:"w-5 h-5 mr-2"})},{id:"absences",label:"Absențe",href:"/hr/absences",icon:e.jsx(xa,{className:"w-5 h-5 mr-2"})},{id:"payroll",label:"Salarizare",href:"/hr/payroll",icon:e.jsx(Bj,{className:"w-5 h-5 mr-2"})},{id:"commissions",label:"Comisioane",href:"/hr/commissions",icon:e.jsx(Uj,{className:"w-5 h-5 mr-2"})},{id:"settings",label:"Setări HR",href:"/hr/settings",icon:e.jsx(Wo,{className:"w-5 h-5 mr-2"})}],xn=({children:p,activeTab:c,title:i,subtitle:ne,action:Z,backLink:ae})=>e.jsxs("div",{className:"container py-6 space-y-6 max-w-7xl",children:[e.jsx("div",{className:"flex overflow-x-auto hide-scrollbar",children:e.jsx("div",{className:"flex space-x-1",children:hg.map(O=>e.jsx(F,{variant:c===O.id?"default":"ghost",size:"sm",className:Uo("flex items-center",c===O.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"),asChild:!0,children:e.jsx(Fi,{href:O.href,children:e.jsxs("div",{className:"flex items-center",children:[O.icon,O.label]})})},O.id))})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[ae&&e.jsx(F,{variant:"ghost",size:"sm",className:"mb-2 -ml-2 text-muted-foreground hover:text-foreground",asChild:!0,children:e.jsx(Fi,{href:ae.href,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Mj,{className:"h-4 w-4 mr-1"}),ae.label]})})}),i&&e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:i}),ne&&e.jsx("p",{className:"text-muted-foreground",children:ne})]}),Z&&e.jsx(F,{asChild:!0,children:e.jsx(Fi,{href:Z.href,children:e.jsxs("div",{className:"flex items-center",children:[Z.icon||e.jsx(it,{className:"mr-2 h-4 w-4"}),Z.label]})})})]}),e.jsx(gs,{}),e.jsx("div",{children:p})]}),tn=({title:p,value:c,icon:i,color:ne,subtitle:Z})=>{const ae={primary:"bg-primary/10 text-primary",secondary:"bg-secondary/10 text-secondary",success:"bg-green-50 text-green-600",danger:"bg-red-50 text-red-600",warning:"bg-amber-50 text-amber-600",info:"bg-blue-50 text-blue-600"};return e.jsx(ue,{children:e.jsx(pe,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:p}),e.jsx("h4",{className:"text-2xl font-bold tracking-tight",children:c}),Z&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Z})]}),e.jsx("div",{className:`p-2 rounded-full ${ae[ne]}`,children:i})]})})})};function _n(){const p=Wj(),{toast:c}=Ns(),i=j=>ln({queryKey:["/api/hr/employees",j],queryFn:()=>Ie("/api/hr/employees",{params:j})}),ne=j=>ln({queryKey:["/api/hr/employees",j],queryFn:()=>Ie(`/api/hr/employees/${j}`),enabled:!!j}),Z=()=>Cn({mutationFn:j=>Ie("/api/hr/employees",{method:"POST",data:j}),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/hr/employees"]}),c({title:"Succes!",description:"Angajat adăugat cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut adăuga angajatul: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),ae=()=>Cn({mutationFn:({id:j,data:fe})=>Ie(`/api/hr/employees/${j}`,{method:"PATCH",data:fe}),onSuccess:(j,fe)=>{p.invalidateQueries({queryKey:["/api/hr/employees"]}),p.invalidateQueries({queryKey:["/api/hr/employees",fe.id]}),c({title:"Succes!",description:"Angajat actualizat cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut actualiza angajatul: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),O=()=>Cn({mutationFn:j=>Ie(`/api/hr/employees/${j}`,{method:"DELETE"}),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/hr/employees"]}),c({title:"Succes!",description:"Angajat șters cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut șterge angajatul: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),J=j=>ln({queryKey:["/api/hr/departments",j],queryFn:()=>Ie("/api/hr/departments",{params:j})}),B=j=>ln({queryKey:["/api/hr/departments",j],queryFn:()=>Ie(`/api/hr/departments/${j}`),enabled:!!j}),D=j=>ln({queryKey:["/api/hr/contracts",j],queryFn:()=>Ie("/api/hr/contracts",{params:j})}),R=j=>ln({queryKey:["/api/hr/contracts",j],queryFn:()=>Ie(`/api/hr/contracts/${j}`),enabled:!!j}),U=()=>Cn({mutationFn:j=>Ie("/api/hr/contracts",{method:"POST",data:j}),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/hr/contracts"]}),c({title:"Succes!",description:"Contract adăugat cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut adăuga contractul: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),v=j=>ln({queryKey:["/api/hr/cor/occupations",j],queryFn:()=>Ie("/api/hr/cor/occupations",{params:j})}),K=j=>ln({queryKey:["/api/hr/cor/groups",j],queryFn:()=>Ie("/api/hr/cor/groups",{params:j})}),V=()=>ln({queryKey:["/api/hr/settings"],queryFn:()=>Ie("/api/hr/settings")}),G=()=>Cn({mutationFn:j=>Ie("/api/hr/settings",{method:"PATCH",data:j}),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/hr/settings"]}),c({title:"Succes!",description:"Setările HR au fost actualizate."})},onError:j=>{c({title:"Eroare",description:`Nu s-au putut actualiza setările: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),f=()=>Cn({mutationFn:j=>Ie("/api/hr/revisal/export",{method:"POST",data:j}),onSuccess:()=>{c({title:"Succes!",description:"Export Revisal generat cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut genera exportul Revisal: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),$=(j=1,fe=10,Ue,b,W,u)=>{const ie={page:j,pageSize:fe};return Ue&&(ie.search=Ue),b&&(ie.type=b),W&&(ie.employeeId=W),u&&(ie.status=u),Ie("/api/hr/absences",{params:ie})};return{useEmployees:i,useEmployee:ne,useCreateEmployee:Z,useUpdateEmployee:ae,useDeleteEmployee:O,useDepartments:J,useDepartment:B,useCreateDepartment:()=>Cn({mutationFn:j=>Ie("/api/hr/departments",{method:"POST",data:j}),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/hr/departments"]}),c({title:"Succes!",description:"Departament adăugat cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut adăuga departamentul: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),useUpdateDepartment:()=>Cn({mutationFn:({id:j,data:fe})=>Ie(`/api/hr/departments/${j}`,{method:"PATCH",data:fe}),onSuccess:(j,fe)=>{p.invalidateQueries({queryKey:["/api/hr/departments"]}),p.invalidateQueries({queryKey:["/api/hr/departments",fe.id]}),c({title:"Succes!",description:"Departament actualizat cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut actualiza departamentul: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),useDeleteDepartment:()=>Cn({mutationFn:j=>Ie(`/api/hr/departments/${j}`,{method:"DELETE"}),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/hr/departments"]}),c({title:"Succes!",description:"Departament șters cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut șterge departamentul: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),useContracts:D,useContract:R,useCreateContract:U,useAbsences:(j=1,fe=10,Ue,b,W,u)=>ln({queryKey:["/api/hr/absences",{page:j,pageSize:fe,search:Ue,type:b,employeeId:W,status:u}],queryFn:()=>$(j,fe,Ue,b,W,u)}),useAbsence:j=>ln({queryKey:["/api/hr/absences",j],queryFn:()=>Ie(`/api/hr/absences/${j}`),enabled:!!j}),useCreateAbsence:()=>Cn({mutationFn:j=>Ie("/api/hr/absences",{method:"POST",data:j}),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/hr/absences"]}),c({title:"Succes!",description:"Absență adăugată cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut adăuga absența: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),useUpdateAbsence:()=>Cn({mutationFn:({id:j,data:fe})=>Ie(`/api/hr/absences/${j}`,{method:"PATCH",data:fe}),onSuccess:(j,fe)=>{p.invalidateQueries({queryKey:["/api/hr/absences"]}),p.invalidateQueries({queryKey:["/api/hr/absences",fe.id]}),c({title:"Succes!",description:"Absență actualizată cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut actualiza absența: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),useDeleteAbsence:()=>Cn({mutationFn:j=>Ie(`/api/hr/absences/${j}`,{method:"DELETE"}),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/hr/absences"]}),c({title:"Succes!",description:"Absență ștearsă cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut șterge absența: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}}),useCorOccupations:v,useCorGroups:K,useHrSettings:V,useUpdateHrSettings:G,useRevisalExport:f,useAnafExport:()=>Cn({mutationFn:j=>Ie("/api/hr/anaf/export",{method:"POST",data:j}),onSuccess:()=>{c({title:"Succes!",description:"Export ANAF generat cu succes."})},onError:j=>{c({title:"Eroare",description:`Nu s-a putut genera exportul ANAF: ${j.message||"Eroare necunoscută"}`,variant:"destructive"})}})}}const xg=()=>{var E,P,we,j,fe,Ue,b;const[p,c]=Ln(),{useEmployees:i,useDepartments:ne,useContracts:Z}=_n(),ae=new Date,O=ae.getFullYear(),J=ae.getMonth()+1,{data:B,isLoading:D}=i(),{data:R,isLoading:U}=ne(),{data:v,isLoading:K}=Z(1,5,void 0,"active"),{data:V,isLoading:G}=ln({queryKey:["/api/hr/absences",1,5,void 0,void 0,void 0,"pending"],queryFn:async()=>{const W=new URLSearchParams;return W.append("page","1"),W.append("limit","5"),W.append("status","pending"),await Ie(`/api/hr/absences?${W.toString()}`)}}),{data:f,isLoading:$}=ln({queryKey:["/api/hr/payroll/history",O,J],queryFn:async()=>{const W=new URLSearchParams;return W.append("year",O.toString()),W.append("month",J.toString()),await Ie(`/api/hr/payroll/history?${W.toString()}`)}});(E=B==null?void 0:B.data)!=null&&E.items;const le=((P=B==null?void 0:B.data)==null?void 0:P.total)||0,Y=(R==null?void 0:R.data)||[];(we=v==null?void 0:v.data)!=null&&we.items;const N=((j=v==null?void 0:v.data)==null?void 0:j.total)||0;(fe=V==null?void 0:V.data)!=null&&fe.items;const me=((Ue=V==null?void 0:V.data)==null?void 0:Ue.total)||0,T=((b=f==null?void 0:f.data)==null?void 0:b.items)||[],H=[{title:"Angajați",description:"Gestionare date despre angajați, contacte și informații personale",icon:e.jsx(Xn,{className:"h-8 w-8 text-primary"}),path:"/hr/employees",count:le},{title:"Contracte",description:"Contracte de muncă, acte adiționale și documente",icon:e.jsx(on,{className:"h-8 w-8 text-primary"}),path:"/hr/contracts",count:N},{title:"Departamente",description:"Structura organizațională și ierarhia companiei",icon:e.jsx(Ui,{className:"h-8 w-8 text-primary"}),path:"/hr/departments",count:Y.length},{title:"Absențe",description:"Concedii, zile libere și absențe",icon:e.jsx(Sn,{className:"h-8 w-8 text-primary"}),path:"/hr/absences",count:me},{title:"Salarizare",description:"State de plată, fluturași și calcul salarial",icon:e.jsx(Wi,{className:"h-8 w-8 text-primary"}),path:"/hr/payroll",count:T.length},{title:"Rapoarte",description:"Rapoarte și analize pentru departamentul HR",icon:e.jsx(qj,{className:"h-8 w-8 text-primary"}),path:"/hr/reports",count:null}];return e.jsx(xn,{activeTab:"overview",title:"Tablou de bord HR",subtitle:"Vizualizare generală a modulului de resurse umane",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(tn,{title:"Total angajați",value:D?"...":le.toString(),icon:e.jsx(Xn,{size:20}),color:"primary"}),e.jsx(tn,{title:"Contracte active",value:K?"...":N.toString(),icon:e.jsx(on,{size:20}),color:"success"}),e.jsx(tn,{title:"Absențe în așteptare",value:G?"...":me.toString(),icon:e.jsx(Sn,{size:20}),color:"warning"}),e.jsx(tn,{title:"Departamente",value:U?"...":Y.length.toString(),icon:e.jsx(Ui,{size:20}),color:"info"})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:H.map((W,u)=>e.jsxs(ue,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(Se,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[W.icon,W.count!==null&&e.jsx("span",{className:"px-2 py-1 bg-muted rounded-md text-sm font-medium",children:W.count})]}),e.jsx(_e,{className:"mt-4",children:W.title}),e.jsx(Be,{children:W.description})]}),e.jsx(xr,{className:"pt-2",children:e.jsxs(F,{variant:"ghost",className:"w-full justify-between",onClick:()=>c(W.path),children:["Accesează",e.jsx(rt,{size:16})]})})]},u))}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Activitate recentă"}),e.jsx(Be,{children:"Cele mai recente acțiuni și modificări"})]}),e.jsx(pe,{children:e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-1 bg-primary/10 p-2 rounded-full",children:e.jsx(Xn,{size:16,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Angajat adăugat"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maria Popescu a fost adăugată în sistem"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Acum 3 ore"})]})]}),e.jsxs("li",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-1 bg-amber-50 p-2 rounded-full",children:e.jsx(Sn,{size:16,className:"text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Cerere absență aprobată"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cererea de concediu a lui Ion Ionescu a fost aprobată"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Acum 5 ore"})]})]}),e.jsxs("li",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-1 bg-green-50 p-2 rounded-full",children:e.jsx(on,{size:16,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Contract actualizat"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Contractul lui Alexandru Gheorghe a fost actualizat"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ieri, 16:25"})]})]}),e.jsxs("li",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-1 bg-blue-50 p-2 rounded-full",children:e.jsx(Wi,{size:16,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"State de plată generate"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Statele de plată pentru luna curentă au fost generate"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Ieri, 10:12"})]})]})]})}),e.jsx(xr,{children:e.jsx(F,{variant:"outline",className:"w-full",children:"Vezi toate activitățile"})})]})]})})};function lt(p){return p?(typeof p=="string"?new Date(p):p).toLocaleDateString("ro-RO",{day:"2-digit",month:"2-digit",year:"numeric"}):""}function mr(p){return p==null?"0":p.toLocaleString("ro-RO",{minimumFractionDigits:2,maximumFractionDigits:2})}function pg(p){return!p||p.length!==13?p:`${p.substring(0,1)}-${p.substring(1,7)}-${p.substring(7,12)}-${p.substring(12)}`}const fg=()=>{var q,Qe;const[p,c]=Ln(),[i,ne]=M.useState(1),[Z,ae]=M.useState(10),[O,J]=M.useState("lastName"),[B,D]=M.useState("asc"),[R,U]=M.useState(""),[v,K]=M.useState(),[V,G]=M.useState("active"),[f,$]=M.useState(!1),[le,Y]=M.useState(""),{useEmployees:N,useDepartments:me,useDeleteEmployee:T}=_n(),{data:H,isLoading:E,refetch:P}=N(i,Z,R,v,!1),{data:we}=me(),{mutate:j}=T(),fe=((q=H==null?void 0:H.data)==null?void 0:q.items)||[],Ue=((Qe=H==null?void 0:H.data)==null?void 0:Qe.total)||0,b=(we==null?void 0:we.data)||[],W=fe.filter(he=>he.status==="active").length,u=fe.filter(he=>he.status==="inactive").length,ie=fe.filter(he=>he.status==="on_leave").length,se=he=>{O===he?D(B==="asc"?"desc":"asc"):(J(he),D("asc"))},Ye=()=>{c("/hr/employees/new")},ke=he=>{c(`/hr/employees/${he}`)},He=he=>{c(`/hr/employees/${he}/edit`)},pn=he=>{Y(he),$(!0)},Fn=he=>{const ee=b.find(Ke=>Ke.id===he);return ee?ee.name:"Nedefinit"},de=he=>{switch(he){case"active":return e.jsx(mn,{variant:"outline",className:"bg-green-50 text-green-600 hover:bg-green-50",children:"Activ"});case"inactive":return e.jsx(mn,{variant:"outline",className:"bg-red-50 text-red-600 hover:bg-red-50",children:"Inactiv"});case"on_leave":return e.jsx(mn,{variant:"outline",className:"bg-amber-50 text-amber-600 hover:bg-amber-50",children:"În concediu"});default:return e.jsx(mn,{variant:"outline",children:he})}};return e.jsx(xn,{activeTab:"employees",title:"Angajați",subtitle:"Gestionarea datelor despre angajați",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(tn,{title:"Total angajați",value:Ue.toString(),icon:e.jsx(Xn,{size:20}),color:"primary"}),e.jsx(tn,{title:"Activi",value:W.toString(),icon:e.jsx(pr,{size:20}),color:"success"}),e.jsx(tn,{title:"Inactivi",value:u.toString(),icon:e.jsx(Ji,{size:20}),color:"danger"}),e.jsx(tn,{title:"În concediu",value:ie.toString(),icon:e.jsx(xa,{size:20}),color:"warning"})]}),e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Lista angajaților"}),e.jsx(Be,{children:"Gestionați informațiile despre angajați"})]}),e.jsxs(F,{onClick:Ye,children:[e.jsx(ia,{className:"mr-2 h-4 w-4"}),"Angajat nou"]})]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Caută...",className:"pl-8 w-[200px]",value:R,onChange:he=>U(he.target.value)})]}),e.jsxs(Pe,{value:V||"all",onValueChange:he=>G(he==="all"?void 0:he),children:[e.jsx(Re,{className:"w-[150px]",children:e.jsx(De,{placeholder:"Status"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"all",children:"Toți angajații"}),e.jsx(w,{value:"active",children:"Activi"}),e.jsx(w,{value:"inactive",children:"Inactivi"}),e.jsx(w,{value:"on_leave",children:"În concediu"})]})]}),e.jsxs(Pe,{value:v||"all",onValueChange:he=>K(he==="all"?void 0:he),children:[e.jsx(Re,{className:"w-[180px]",children:e.jsx(De,{placeholder:"Departament"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"all",children:"Toate departamentele"}),b.map(he=>e.jsx(w,{value:he.id,children:he.name},he.id))]})]}),e.jsx(F,{variant:"outline",size:"icon",onClick:()=>P(),children:e.jsx(Lr,{className:"h-4 w-4"})})]}),e.jsxs(Ys,{children:[e.jsx(Qs,{children:e.jsxs(Ge,{children:[e.jsx(ye,{className:"cursor-pointer",onClick:()=>se("lastName"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Nume și prenume",O==="lastName"&&e.jsx($s,{className:"h-3 w-3"})]})}),e.jsx(ye,{children:"CNP"}),e.jsx(ye,{children:"Departament"}),e.jsx(ye,{children:"Contact"}),e.jsx(ye,{children:"Status"}),e.jsx(ye,{className:"text-right",children:"Acțiuni"})]})}),e.jsx(Js,{children:E?e.jsx(Ge,{children:e.jsx(oe,{colSpan:6,className:"text-center",children:"Se încarcă angajații..."})}):fe.length===0?e.jsx(Ge,{children:e.jsx(oe,{colSpan:6,className:"text-center",children:"Nu au fost găsiți angajați"})}):fe.map(he=>e.jsxs(Ge,{children:[e.jsxs(oe,{className:"font-medium",children:[he.lastName," ",he.firstName]}),e.jsx(oe,{children:pg(he.cnp)}),e.jsx(oe,{children:Fn(he.departmentId)}),e.jsx(oe,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(qo,{className:"mr-1 h-3 w-3"}),he.email]}),e.jsxs("span",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx($j,{className:"mr-1 h-3 w-3"}),he.phone]})]})}),e.jsx(oe,{children:de(he.status)}),e.jsx(oe,{className:"text-right",children:e.jsxs(la,{children:[e.jsx(ca,{asChild:!0,children:e.jsx(F,{variant:"ghost",size:"icon",children:e.jsx(oa,{className:"h-4 w-4"})})}),e.jsxs(da,{align:"end",children:[e.jsxs(Rs,{onClick:()=>ke(he.id),children:[e.jsx(on,{className:"mr-2 h-4 w-4"}),"Detalii"]}),e.jsxs(Rs,{onClick:()=>He(he.id),children:[e.jsx(on,{className:"mr-2 h-4 w-4"}),"Editare"]}),e.jsx(ua,{}),e.jsxs(Rs,{className:"text-red-600",onClick:()=>pn(he.id),children:[e.jsx(ma,{className:"mr-2 h-4 w-4"}),"Ștergere"]})]})]})})]},he.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:fe.length})," din ",e.jsx("strong",{children:Ue})," angajați"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>ne(i-1),disabled:i===1,children:"Anterior"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>ne(i+1),disabled:fe.length<Z,children:"Următor"})]})]})]})]})]})})},Fo=()=>{const c=ct().id,i=!c,[ne,Z]=Ln();return e.jsxs(xn,{activeTab:"employees",title:i?"Adăugare angajat nou":"Detalii angajat",subtitle:i?"Completați datele pentru noul angajat":`ID angajat: ${c}`,children:[e.jsx("div",{className:"mb-4",children:e.jsxs(F,{variant:"ghost",onClick:()=>Z("/hr/employees"),className:"flex items-center",children:[e.jsx(ot,{className:"mr-2 h-4 w-4"}),"Înapoi la angajați"]})}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:i?"Angajat nou":"Detalii angajat"}),e.jsx(Be,{children:i?"Introduceți informațiile pentru noul angajat":"Vizualizare și editare informații angajat"})]}),e.jsx(pe,{children:e.jsx("p",{children:"Formular detalii angajat va fi implementat aici"})})]})]})},jg=({employee:p,companyName:c="Compania Dumneavoastră SRL"})=>{var ne,Z;const i=vn(new Date,"dd MMMM yyyy",{locale:cn});return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto bg-white text-slate-900 border rounded-lg shadow-sm",children:[e.jsx("h1",{className:"text-center text-xl font-bold mb-6",children:"CONSIMȚĂMÂNT PRIVIND PRELUCRAREA DATELOR CU CARACTER PERSONAL"}),e.jsxs("p",{className:"mb-4 text-sm",children:["Subsemnatul/Subsemnata ",e.jsxs("span",{className:"font-medium",children:[p.lastName," ",p.firstName]}),", CNP ",e.jsx("span",{className:"font-medium",children:p.cnp||"_________________"}),", posesor/posesoare al/a C.I. seria ",e.jsx("span",{className:"font-medium",children:((ne=p.idSeriesNumber)==null?void 0:ne.split(" ")[0])||"___"}),"nr. ",e.jsx("span",{className:"font-medium",children:((Z=p.idSeriesNumber)==null?void 0:Z.split(" ")[1])||"_______"}),", domiciliat(ă) în ",e.jsx("span",{className:"font-medium",children:p.address||"___________________"}),", în calitate de angajat(ă) al/a ",e.jsx("span",{className:"font-medium",children:c}),","]}),e.jsxs("p",{className:"mb-4 text-sm",children:["Declar prin prezenta că sunt de acord ca ",e.jsx("span",{className:"font-medium",children:c}),', să colecteze, să stocheze și să prelucreze datele mele cu caracter personal în conformitate cu Regulamentul (UE) 2016/679 privind protecția persoanelor fizice în ceea ce privește prelucrarea datelor cu caracter personal și privind libera circulație a acestor date ("GDPR"), în următoarele scopuri:']}),e.jsxs("ul",{className:"list-disc pl-8 mb-4 text-sm",children:[e.jsx("li",{children:"Gestionarea contractului meu de muncă și a relației de muncă;"}),e.jsx("li",{children:"Îndeplinirea obligațiilor legale ale angajatorului față de autoritățile publice (evidențe fiscale, administrație, securitate socială, etc.);"}),e.jsx("li",{children:"Administrarea dosarului personal de angajat și a situațiilor aferente;"}),e.jsx("li",{children:"Calculul și plata salariului, precum și a altor drepturi salariale;"}),e.jsx("li",{children:"Înregistrarea și transmiterea datelor în Registrul General de Evidență a Salariaților (REVISAL);"}),e.jsx("li",{children:"Asigurarea securității și sănătății în muncă;"}),e.jsx("li",{children:"Comunicări interne și administrarea accesului în sistemele informatice ale companiei;"}),e.jsx("li",{children:"Evaluarea performanțelor profesionale și dezvoltarea carierei;"}),e.jsx("li",{children:"Exercitarea altor drepturi și îndeplinirea altor obligații prevăzute de legislația muncii."})]}),e.jsx("p",{className:"mb-4 text-sm",children:"Înțeleg că prelucrarea datelor mele cu caracter personal se realizează în mod legal, echitabil și transparent, strict în scopurile pentru care au fost colectate, cu asigurarea unor măsuri tehnice și organizatorice adecvate pentru protejarea securității acestora."}),e.jsx("p",{className:"mb-4 text-sm",children:"Am fost informat(ă) că datele mele pot fi transmise, conform obligațiilor legale sau în scopul îndeplinirii obligațiilor contractuale, către: autoritățile fiscale, Casa Națională de Pensii Publice, Casa Națională de Asigurări de Sănătate, Agenția Națională pentru Ocuparea Forței de Muncă, Inspectoratul Teritorial de Muncă, societăți de asigurări private de sănătate, furnizori de servicii de medicina muncii, instituții financiar-bancare pentru plata salariilor, și alți parteneri contractuali ai angajatorului necesari pentru desfășurarea activității."}),e.jsx("p",{className:"mb-4 text-sm",children:"Am fost informat(ă) că, în conformitate cu GDPR, beneficiez de următoarele drepturi:"}),e.jsxs("ul",{className:"list-disc pl-8 mb-4 text-sm",children:[e.jsx("li",{children:"Dreptul de acces la datele prelucrate;"}),e.jsx("li",{children:"Dreptul la rectificarea datelor inexacte;"}),e.jsx("li",{children:'Dreptul la ștergerea datelor ("dreptul de a fi uitat");'}),e.jsx("li",{children:"Dreptul la restricționarea prelucrării;"}),e.jsx("li",{children:"Dreptul la portabilitatea datelor;"}),e.jsx("li",{children:"Dreptul la opoziție;"}),e.jsx("li",{children:"Dreptul de a nu face obiectul unei decizii bazate exclusiv pe prelucrarea automată, inclusiv crearea de profiluri;"}),e.jsx("li",{children:"Dreptul de a depune o plângere în fața Autorității Naționale de Supraveghere a Prelucrării Datelor cu Caracter Personal."})]}),e.jsx("p",{className:"mb-6 text-sm",children:"Înțeleg că retragerea consimțământului pentru prelucrările de date bazate pe consimțământ nu afectează legalitatea prelucrării efectuate până la acel moment și nici prelucrările efectuate în baza altor temeiuri legale."}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm font-medium",children:["Data: ",i]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Semnătura:"}),e.jsx("div",{className:"mt-2 border-b border-slate-400 w-full",children:" "})]})]})]})},gg=({employee:p,companyName:c="Compania Dumneavoastră SRL"})=>{const i=vn(new Date,"dd MMMM yyyy",{locale:cn});return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto bg-white text-slate-900 border rounded-lg shadow-sm",children:[e.jsx("h1",{className:"text-center text-xl font-bold mb-6",children:"ACORD PRIVIND UTILIZAREA SISTEMELOR INFORMATICE ȘI DE COMUNICARE"}),e.jsxs("p",{className:"mb-4 text-sm",children:["Subsemnatul/Subsemnata ",e.jsxs("span",{className:"font-medium",children:[p.lastName," ",p.firstName]}),", CNP ",e.jsx("span",{className:"font-medium",children:p.cnp||"_________________"}),", în calitate de angajat(ă) al/a ",e.jsx("span",{className:"font-medium",children:c}),","]}),e.jsx("p",{className:"mb-4 text-sm",children:"Declar că am fost informat(ă) și sunt de acord cu următoarele condiții privind utilizarea contului de utilizator și a sistemelor informatice ale companiei:"}),e.jsx("h2",{className:"text-lg font-semibold mt-6 mb-3",children:"1. Scopul accesului în sistemele informatice"}),e.jsxs("p",{className:"mb-4 text-sm",children:["Înțeleg că mi se va crea un cont de utilizator în sistemele informatice ale companiei ",e.jsx("span",{className:"font-medium",children:c}),", destinat exclusiv utilizării profesionale în cadrul activităților mele de serviciu."]}),e.jsx("h2",{className:"text-lg font-semibold mt-4 mb-3",children:"2. Confidențialitatea credențialelor"}),e.jsx("p",{className:"mb-4 text-sm",children:"Mă angajez să păstrez confidențialitatea credențialelor de acces (nume utilizator și parolă) și să nu le divulg altor persoane. Înțeleg că sunt responsabil(ă) pentru toate acțiunile efectuate prin contul meu."}),e.jsx("h2",{className:"text-lg font-semibold mt-4 mb-3",children:"3. Utilizarea acceptabilă"}),e.jsxs("ul",{className:"list-disc pl-8 mb-4 text-sm",children:[e.jsx("li",{children:"Voi utiliza sistemele informatice ale companiei doar pentru îndeplinirea sarcinilor profesionale;"}),e.jsx("li",{children:"Nu voi utiliza contul pentru activități ilegale, frauduloase sau care încalcă politicile companiei;"}),e.jsx("li",{children:"Voi respecta toate politicile de securitate informatică implementate de companie;"}),e.jsx("li",{children:"Nu voi încerca să accesez informații pentru care nu am autorizare;"}),e.jsx("li",{children:"Nu voi instala software neautorizat pe echipamentele companiei;"}),e.jsx("li",{children:"Voi raporta imediat orice activitate suspectă sau brecă de securitate."})]}),e.jsx("h2",{className:"text-lg font-semibold mt-4 mb-3",children:"4. Monitorizarea și confidențialitatea datelor"}),e.jsx("p",{className:"mb-4 text-sm",children:"Înțeleg și accept că:"}),e.jsxs("ul",{className:"list-disc pl-8 mb-4 text-sm",children:[e.jsx("li",{children:"Compania poate monitoriza utilizarea sistemelor informatice în conformitate cu legislația aplicabilă;"}),e.jsx("li",{children:"Nu trebuie să am așteptări de confidențialitate privind utilizarea resurselor informatice ale companiei;"}),e.jsx("li",{children:"Datele și comunicările efectuate prin sistemele companiei pot fi accesate și verificate de persoanele autorizate;"}),e.jsx("li",{children:"Monitorizarea se realizează pentru asigurarea securității informatice și verificarea respectării politicilor companiei."})]}),e.jsx("h2",{className:"text-lg font-semibold mt-4 mb-3",children:"5. Protecția datelor confidențiale"}),e.jsx("p",{className:"mb-4 text-sm",children:"Mă angajez să protejez datele confidențiale ale companiei și să nu divulg informații confidențiale (inclusiv cele ale clienților, furnizorilor sau partenerilor de afaceri) către persoane neautorizate."}),e.jsx("h2",{className:"text-lg font-semibold mt-4 mb-3",children:"6. Încetarea accesului"}),e.jsx("p",{className:"mb-4 text-sm",children:"Înțeleg că accesul la sistemele informatice ale companiei va înceta la terminarea raporturilor de muncă sau în cazul încălcării prezentului acord sau a politicilor companiei."}),e.jsx("h2",{className:"text-lg font-semibold mt-4 mb-3",children:"7. Actualizarea politicilor"}),e.jsx("p",{className:"mb-4 text-sm",children:"Accept că politicile companiei privind utilizarea sistemelor informatice pot fi actualizate periodic și mă angajez să respect versiunile actualizate ale acestora."}),e.jsx("p",{className:"mb-6 text-sm mt-6",children:"Confirm că am citit și am înțeles conținutul prezentului acord și mă angajez să respect toate condițiile menționate."}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm font-medium",children:["Data: ",i]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Semnătura:"}),e.jsx("div",{className:"mt-2 border-b border-slate-400 w-full",children:" "})]})]})]})},Oo=({type:p,employee:c,companyName:i="Compania Dumneavoastră SRL",trigger:ne})=>{const[Z,ae]=M.useState(!1),O=()=>{const R=document.getElementById("document-print-content"),U=document.body.innerHTML;R&&(document.body.innerHTML=R.innerHTML,window.print(),document.body.innerHTML=U,setTimeout(()=>{ae(!0)},100))},J=()=>{const R=document.getElementById("document-print-content");R&&window&&"html2pdf"in window?window.html2pdf().from(R).save(`${p==="gdpr"?"consimtamant-gdpr":"acord-utilizare-cont"}-${c.lastName}-${c.firstName}.pdf`):console.warn("html2pdf library not loaded. Document cannot be downloaded as PDF.")},B=p==="gdpr"?"Consimțământ GDPR":"Acord utilizare cont și sisteme informatice",D=()=>{switch(p){case"gdpr":return e.jsx(jg,{employee:c,companyName:i});case"account-terms":return e.jsx(gg,{employee:c,companyName:i});default:return e.jsx("div",{children:"Tip de document necunoscut"})}};return e.jsxs(qi,{open:Z,onOpenChange:ae,children:[e.jsx(Gj,{asChild:!0,children:ne||e.jsxs(F,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(on,{size:16}),"Previzualizare document"]})}),e.jsxs($i,{className:"max-w-5xl h-[90vh] flex flex-col",children:[e.jsxs(Gi,{children:[e.jsx(Hi,{children:B}),e.jsxs("div",{className:"flex justify-end gap-2 py-2",children:[e.jsxs(F,{variant:"outline",onClick:O,className:"flex items-center gap-2",children:[e.jsx($o,{size:16}),"Printează"]}),e.jsxs(F,{variant:"outline",onClick:J,className:"flex items-center gap-2",children:[e.jsx(Fr,{size:16}),"Descarcă PDF"]})]})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4 bg-gray-50",children:e.jsx("div",{id:"document-print-content",children:D()})})]})]})},sa=p=>{if(!p||p.length!==13||!/^\d+$/.test(p))return!1;const c="279146358279";if(parseInt(p.charAt(0))===0)return!1;const ne=parseInt(p.substring(1,3)),Z=parseInt(p.substring(3,5)),ae=parseInt(p.substring(5,7));if(Z<1||Z>12)return!1;const O=[0,31,28,31,30,31,30,31,31,30,31,30,31];if((ne%4===0&&ne%100!==0||ne%400===0)&&(O[2]=29),ae<1||ae>O[Z])return!1;const J=parseInt(p.substring(7,9));if(J<1||J>52||J>46&&J<51)return!1;let B=0;for(let R=0;R<12;R++)B+=parseInt(p.charAt(R))*parseInt(c.charAt(R));let D=B%11;return D===10&&(D=1),D===parseInt(p.charAt(12))},vg=be.object({firstName:be.string().min(2,{message:"Prenumele trebuie să conțină cel puțin 2 caractere"}),lastName:be.string().min(2,{message:"Numele trebuie să conțină cel puțin 2 caractere"}),email:be.string().email({message:"Email-ul trebuie să fie valid"}),phone:be.string().optional(),personalEmail:be.string().email({message:"Email-ul personal trebuie să fie valid"}).optional().or(be.literal("")),personalPhone:be.string().optional().or(be.literal("")),cnp:be.string().refine(sa,{message:"CNP-ul nu este valid. Trebuie să conțină 13 cifre și să respecte algoritmul de validare."}),idSeriesNumber:be.string().min(3,{message:"Seria și numărul CI/BI sunt obligatorii"}),birthDate:be.date({required_error:"Data nașterii este obligatorie."}),birthPlace:be.string().min(2,{message:"Locul nașterii este obligatoriu"}),nationality:be.string().default("Română"),address:be.string().min(5,{message:"Adresa trebuie să conțină cel puțin 5 caractere"}),city:be.string().min(2,{message:"Orașul este obligatoriu"}),county:be.string().min(2,{message:"Județul este obligatoriu"}),postalCode:be.string().optional().or(be.literal("")),position:be.string().optional().or(be.literal("")),department:be.string().optional().or(be.literal("")),departmentId:be.string().optional().or(be.literal("")),isActive:be.boolean().default(!0),status:be.string().default("active"),hasUserAccount:be.boolean().default(!1),gdprConsent:be.boolean().default(!1),dataProcessingConsent:be.boolean().default(!1),gdprDocumentId:be.string().optional(),accountTermsDocumentId:be.string().optional()}),Ng=({defaultValues:p,onSubmit:c,isSubmitting:i=!1,isEditMode:ne=!1})=>{const[Z,ae]=M.useState("personal"),[O,J]=M.useState(!1),[B,D]=M.useState([]),[R,U]=M.useState({gdpr:!1,terms:!1}),v=M.useRef(null),K=M.useRef(null),V=_n(),{data:G,isLoading:f}=V.useDepartments(),$={mutateAsync:async b=>{try{const u=await(await fetch("/api/hr/employees/draft",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).json();return le({title:"Informații salvate",description:"Datele angajatului au fost salvate temporar."}),u}catch(W){throw console.error("Eroare la salvare draft:",W),le({title:"Eroare",description:"A apărut o eroare la salvarea temporară.",variant:"destructive"}),W}},isPending:!1},{toast:le}=Ns(),Y=(G==null?void 0:G.data)||[],[N,me]=M.useState({personal:!1,contact:!1,employment:!1,documents:!1}),[T,H]=M.useState("personal"),E=Gs({resolver:Hs(vg),defaultValues:p||{firstName:"",lastName:"",email:"",phone:"",cnp:"",idSeriesNumber:"",birthDate:new Date,birthPlace:"",nationality:"română",address:"",city:"",county:"",postalCode:"",internalPosition:"",departmentId:"",managerId:"",status:"PENDING",civilStatus:"SINGLE",gdprConsent:!1,healthInsurance:!0,taxExempt:!1},mode:"onChange"}),P=M.useCallback(()=>{if(!E)return!1;const b=E.getValues(),W=E.formState.errors;if(Object.keys(W).length>0)return J(!1),!1;const u=b.firstName&&b.lastName&&b.email,ie=b.cnp&&sa(b.cnp),se=b.departmentId,Ye=b.gdprConsent===!0;me({personal:u,contact:ie,employment:se,documents:Ye});const ke=u&&ie&&se&&Ye;return J(ke),ke},[E]);M.useEffect(()=>{const b=E.watch(()=>{P()});return()=>b.unsubscribe()},[E,P]);const we=async()=>{const b=E.getValues();let W=!1;switch(T){case"personal":W=b.firstName&&b.lastName&&b.email;break;case"contact":W=b.cnp&&sa(b.cnp);break;case"employment":W=b.departmentId;break;case"documents":W=b.gdprConsent===!0;break}if(!W){le({title:"Validare eșuată",description:"Completați toate câmpurile obligatorii din acest tab înainte de a salva.",variant:"destructive"});return}me(ie=>({...ie,[T==="contact"?"contact":T]:!0}));const u=(T==="personal"||N.personal)&&(T==="contact"||N.contact)&&(T==="employment"||N.employment)&&(T==="documents"||N.documents);J(u);try{await $.mutateAsync(b),le({title:"Tab salvat cu succes",description:`Informațiile din secțiunea "${T==="contact"?"Identificare oficială":T==="personal"?"Informații personale":T==="employment"?"Informații angajare":"Setări și consimțământ"}" au fost salvate.`,variant:"default"})}catch(ie){console.error("Eroare la salvarea temporară:",ie),le({title:"Eroare la salvare",description:"Nu s-au putut salva informațiile. Vă rugăm să încercați din nou.",variant:"destructive"})}},j=b=>{if(b.length===13&&sa(b)){const W=parseInt(b.substring(1,3)),u=parseInt(b.substring(3,5)),ie=parseInt(b.substring(5,7)),se=parseInt(b.charAt(0));let Ye;se===1||se===2?Ye=1900+W:se===3||se===4?Ye=1800+W:se===5||se===6?Ye=2e3+W:(se===7||se===8||se===9)&&(Ye=1900+W),Ye&&(E.getValues("birthDate")||E.setValue("birthDate",new Date(Ye,u-1,ie)))}};M.useEffect(()=>{const b=E.watch((W,{name:u})=>{u==="cnp"&&j(W.cnp)});return()=>b.unsubscribe()},[E.watch]),M.useEffect(()=>{p&&Object.entries(p).forEach(([b,W])=>{W!==void 0&&E.setValue(b,W)})},[p,E]);const fe=E.handleSubmit(b=>{c(b)}),Ue=[{value:"AB",label:"Alba"},{value:"AR",label:"Arad"},{value:"AG",label:"Argeș"},{value:"BC",label:"Bacău"},{value:"BH",label:"Bihor"},{value:"BN",label:"Bistrița-Năsăud"},{value:"BT",label:"Botoșani"},{value:"BR",label:"Brăila"},{value:"BV",label:"Brașov"},{value:"B",label:"București"},{value:"BZ",label:"Buzău"},{value:"CL",label:"Călărași"},{value:"CS",label:"Caraș-Severin"},{value:"CJ",label:"Cluj"},{value:"CT",label:"Constanța"},{value:"CV",label:"Covasna"},{value:"DB",label:"Dâmbovița"},{value:"DJ",label:"Dolj"},{value:"GL",label:"Galați"},{value:"GR",label:"Giurgiu"},{value:"GJ",label:"Gorj"},{value:"HR",label:"Harghita"},{value:"HD",label:"Hunedoara"},{value:"IL",label:"Ialomița"},{value:"IS",label:"Iași"},{value:"IF",label:"Ilfov"},{value:"MM",label:"Maramureș"},{value:"MH",label:"Mehedinți"},{value:"MS",label:"Mureș"},{value:"NT",label:"Neamț"},{value:"OT",label:"Olt"},{value:"PH",label:"Prahova"},{value:"SJ",label:"Sălaj"},{value:"SM",label:"Satu Mare"},{value:"SB",label:"Sibiu"},{value:"SV",label:"Suceava"},{value:"TR",label:"Teleorman"},{value:"TM",label:"Timiș"},{value:"TL",label:"Tulcea"},{value:"VL",label:"Vâlcea"},{value:"VS",label:"Vaslui"},{value:"VN",label:"Vrancea"}];return e.jsx(Ks,{...E,children:e.jsxs("form",{onSubmit:fe,className:"space-y-8",children:[e.jsxs(Xs,{defaultValue:"personal",className:"w-full",value:Z,onValueChange:b=>ae(b),children:[e.jsxs(er,{className:"grid w-full grid-cols-4",children:[e.jsxs(en,{value:"personal",onClick:()=>H("personal"),className:N.personal?"border-green-500 border-b-2":"",children:["Informații personale ",N.personal&&"✓"]}),e.jsxs(en,{value:"identification",onClick:()=>H("contact"),className:N.contact?"border-green-500 border-b-2":"",children:["Identificare oficială ",N.contact&&"✓"]}),e.jsxs(en,{value:"employment",onClick:()=>H("employment"),className:N.employment?"border-green-500 border-b-2":"",children:["Informații angajare ",N.employment&&"✓"]}),e.jsxs(en,{value:"settings",onClick:()=>H("documents"),className:N.documents?"border-green-500 border-b-2":"",children:["Setări și consimțământ ",N.documents&&"✓"]})]}),e.jsxs(hn,{value:"personal",className:"space-y-6",children:[e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsx(_e,{children:"Date personale"})}),e.jsxs(pe,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:E.control,name:"lastName",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Nume ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"Nume de familie"})}),e.jsx(Q,{children:"Numele de familie din cartea de identitate"}),e.jsx(k,{})]})}),e.jsx(C,{control:E.control,name:"firstName",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Prenume ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"Prenume"})}),e.jsx(Q,{children:"Prenumele din cartea de identitate"}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:E.control,name:"email",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Email profesional ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{...b,type:"email",placeholder:"nume.prenume@companie.ro"})}),e.jsx(Q,{children:"Adresa de email utilizată pentru comunicarea profesională"}),e.jsx(k,{})]})}),e.jsx(C,{control:E.control,name:"phone",render:({field:b})=>e.jsxs(S,{children:[e.jsx(_,{children:"Telefon profesional"}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"07xx xxx xxx"})}),e.jsx(Q,{children:"Numărul de telefon utilizat pentru comunicarea profesională"}),e.jsx(k,{})]})})]}),e.jsx(gs,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:E.control,name:"personalEmail",render:({field:b})=>e.jsxs(S,{children:[e.jsx(_,{children:"Email personal"}),e.jsx(A,{children:e.jsx(te,{...b,type:"email",placeholder:"nume@email.com"})}),e.jsx(Q,{children:"Adresa de email personală (opțional)"}),e.jsx(k,{})]})}),e.jsx(C,{control:E.control,name:"personalPhone",render:({field:b})=>e.jsxs(S,{children:[e.jsx(_,{children:"Telefon personal"}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"07xx xxx xxx"})}),e.jsx(Q,{children:"Numărul de telefon personal (opțional)"}),e.jsx(k,{})]})})]})]})]}),e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsx(_e,{children:"Adresă"})}),e.jsxs(pe,{className:"space-y-6",children:[e.jsx(C,{control:E.control,name:"address",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Adresa completă ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(Ls,{...b,placeholder:"Strada, număr, bloc, scară, apartament"})}),e.jsx(Q,{children:"Adresa de domiciliu din cartea de identitate"}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(C,{control:E.control,name:"city",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Localitate ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"Oraș/Comună/Sat"})}),e.jsx(k,{})]})}),e.jsx(C,{control:E.control,name:"county",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Județ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(Pe,{value:b.value,onValueChange:b.onChange,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați județul"})})}),e.jsx(Le,{children:Ue.map(W=>e.jsx(w,{value:W.label,children:W.label},W.value))})]}),e.jsx(k,{})]})}),e.jsx(C,{control:E.control,name:"postalCode",render:({field:b})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cod poștal"}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"xxxxxx"})}),e.jsx(k,{})]})})]})]})]})]}),e.jsx(hn,{value:"identification",className:"space-y-6",children:e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsx(_e,{children:"Date de identificare oficiale"})}),e.jsxs(pe,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:E.control,name:"cnp",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{className:"flex items-center gap-2",children:["CNP ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx(Hj,{children:e.jsxs(Kj,{children:[e.jsx(Zj,{children:e.jsx(Yj,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(Qj,{children:e.jsx("p",{className:"max-w-xs",children:"Codul Numeric Personal (CNP) constă din 13 cifre și este necesar pentru înregistrarea în Revisal și raportările ANAF."})})]})})]}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"1234567890123",maxLength:13})}),e.jsx(Q,{children:"Codul Numeric Personal din cartea de identitate"}),e.jsx(k,{})]})}),e.jsx(C,{control:E.control,name:"idSeriesNumber",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Serie și număr CI/BI ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"XX 123456"})}),e.jsx(Q,{children:"Seria și numărul cărții de identitate (ex: BV 123456)"}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:E.control,name:"birthDate",render:({field:b})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsxs(_,{children:["Data nașterii ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:Uo("w-full pl-3 text-left font-normal",!b.value&&"text-muted-foreground"),children:[b.value?vn(b.value,"dd.MM.yyyy",{locale:cn}):e.jsx("span",{children:"Selectați data"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"start",children:e.jsx(fs,{mode:"single",selected:b.value,onSelect:b.onChange,disabled:W=>W>new Date||W<new Date("1900-01-01"),initialFocus:!0,locale:cn})})]}),e.jsx(Q,{children:"Data nașterii conform actului de identitate"}),e.jsx(k,{})]})}),e.jsx(C,{control:E.control,name:"birthPlace",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Locul nașterii ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"Oraș, Județ"})}),e.jsx(Q,{children:"Locul nașterii conform actului de identitate"}),e.jsx(k,{})]})})]}),e.jsx(C,{control:E.control,name:"nationality",render:({field:b})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Cetățenie ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"Română"})}),e.jsx(Q,{children:"Cetățenia conform actului de identitate"}),e.jsx(k,{})]})})]})]})}),e.jsx(hn,{value:"employment",className:"space-y-6",children:e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsx(_e,{children:"Informații despre angajare"})}),e.jsxs(pe,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:E.control,name:"position",render:({field:b})=>e.jsxs(S,{children:[e.jsx(_,{children:"Rol intern"}),e.jsx(A,{children:e.jsx(te,{...b,placeholder:"Descriere rol intern (fără valoare contractuală)"})}),e.jsx(Q,{children:"Titlu informal folosit intern. Funcția oficială conform COR se definește în contract."}),e.jsx(k,{})]})}),e.jsx(C,{control:E.control,name:"departmentId",render:({field:b})=>e.jsxs(S,{children:[e.jsx(_,{children:"Departament"}),e.jsxs(Pe,{value:b.value,onValueChange:W=>{if(b.onChange(W),W){const u=Y.find(ie=>ie.id===W);u&&E.setValue("department",u.name)}},children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați departamentul"})})}),e.jsx(Le,{children:Y.map(W=>e.jsx(w,{value:W.id,children:W.name},W.id))})]}),e.jsx(Q,{children:"Departamentul din care face parte angajatul"}),e.jsx(k,{})]})})]}),e.jsx(C,{control:E.control,name:"isActive",render:({field:b})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Status activ"}),e.jsx(Q,{children:"Indică dacă angajatul este activ în cadrul companiei"})]}),e.jsx(A,{children:e.jsx(as,{checked:b.value,onCheckedChange:b.onChange})})]})})]})]})}),e.jsxs(hn,{value:"settings",className:"space-y-6",children:[e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsx(_e,{children:"Setări cont și acces"})}),e.jsx(pe,{className:"space-y-4",children:e.jsx(C,{control:E.control,name:"hasUserAccount",render:({field:b})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Creare cont utilizator"}),e.jsx(Q,{children:"Creează un cont de utilizator pentru accesul angajatului la platformă"})]}),e.jsx(A,{children:e.jsx(as,{checked:b.value,onCheckedChange:b.onChange})})]})})})]}),e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsx(_e,{children:"Consimțământ GDPR și procesare date"})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsx(C,{control:E.control,name:"gdprConsent",render:({field:b})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:b.value,onCheckedChange:b.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsxs(_,{children:["Consimțământ GDPR ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Q,{children:"Angajatul a fost informat și și-a dat consimțământul pentru procesarea datelor personale conform Regulamentului General privind Protecția Datelor (GDPR)."})]})]})}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx(Oo,{type:"gdpr",employee:{firstName:E.watch("firstName"),lastName:E.watch("lastName"),cnp:E.watch("cnp"),idSeriesNumber:E.watch("idSeriesNumber"),address:E.watch("address"),city:E.watch("city"),county:E.watch("county"),email:E.watch("email"),phone:E.watch("phone"),position:E.watch("position")},companyName:"Compania Dumneavoastră SRL",trigger:e.jsxs(F,{variant:"outline",type:"button",className:"flex gap-2",children:[e.jsx(on,{className:"h-4 w-4"}),"Previzualizare Consimțământ GDPR"]})}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("input",{type:"file",id:"gdpr-document-upload",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:b=>{var u;const W=(u=b.target.files)==null?void 0:u[0];W&&(U(se=>({...se,gdpr:!0})),(async()=>{try{const se=new FormData;se.append("file",W),se.append("type","gdpr_consent"),E.getValues("id")&&se.append("employeeId",E.getValues("id"));const ke=await(await fetch("/api/hr/documents/upload",{method:"POST",body:se})).json();ke.success&&ke.data?(E.setValue("gdprDocumentId",ke.data.document.id),D(He=>[...He.filter(pn=>pn.type!=="gdpr_consent"),{id:ke.data.document.id,name:W.name,url:ke.data.documentUrl,type:"gdpr_consent"}]),le({title:"Document încărcat",description:"Documentul a fost încărcat cu succes."})):le({title:"Eroare",description:ke.message||"A apărut o eroare la încărcarea documentului.",variant:"destructive"})}catch(se){console.error("Error uploading document:",se),le({title:"Eroare",description:"A apărut o eroare la încărcarea documentului.",variant:"destructive"})}finally{U(se=>({...se,gdpr:!1}))}})())},ref:v}),E.watch("gdprDocumentId")?e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(pr,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Document încărcat"}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{E.setValue("gdprDocumentId",void 0),D(b=>b.filter(W=>W.type!=="gdpr_consent"))},children:e.jsx(Io,{className:"h-3 w-3"})})]}):e.jsx(F,{type:"button",variant:"outline",size:"sm",className:"flex items-center gap-2",disabled:R.gdpr,onClick:()=>{var b;return(b=v.current)==null?void 0:b.click()},children:R.gdpr?e.jsx(e.Fragment,{children:"Încărcare..."}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"h-4 w-4"}),"Încarcă document semnat"]})})]})]}),e.jsx(C,{control:E.control,name:"dataProcessingConsent",render:({field:b})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:b.value,onCheckedChange:b.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsxs(_,{children:["Acord pentru procesarea datelor ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Q,{children:"Angajatul este de acord cu procesarea datelor personale pentru scopuri administrative, salariale, fiscale și de raportare către autorități (ANAF, Revisal, etc)."})]})]})}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx(Oo,{type:"account-terms",employee:{firstName:E.watch("firstName"),lastName:E.watch("lastName"),cnp:E.watch("cnp"),idSeriesNumber:E.watch("idSeriesNumber"),address:E.watch("address"),city:E.watch("city"),county:E.watch("county"),email:E.watch("email"),phone:E.watch("phone"),position:E.watch("position")},companyName:"Compania Dumneavoastră SRL",trigger:e.jsxs(F,{variant:"outline",type:"button",className:"flex gap-2",children:[e.jsx(on,{className:"h-4 w-4"}),"Previzualizare Acord utilizare cont"]})}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("input",{type:"file",id:"account-terms-document-upload",accept:".pdf,.jpg,.jpeg,.png",className:"hidden",onChange:b=>{var u;const W=(u=b.target.files)==null?void 0:u[0];W&&(U(se=>({...se,terms:!0})),(async()=>{try{const se=new FormData;se.append("file",W),se.append("type","account_terms"),E.getValues("id")&&se.append("employeeId",E.getValues("id"));const ke=await(await fetch("/api/hr/documents/upload",{method:"POST",body:se})).json();ke.success&&ke.data?(E.setValue("accountTermsDocumentId",ke.data.document.id),D(He=>[...He.filter(pn=>pn.type!=="account_terms"),{id:ke.data.document.id,name:W.name,url:ke.data.documentUrl,type:"account_terms"}]),le({title:"Document încărcat",description:"Documentul a fost încărcat cu succes."})):le({title:"Eroare",description:ke.message||"A apărut o eroare la încărcarea documentului.",variant:"destructive"})}catch(se){console.error("Error uploading document:",se),le({title:"Eroare",description:"A apărut o eroare la încărcarea documentului.",variant:"destructive"})}finally{U(se=>({...se,terms:!1}))}})())},ref:K}),E.watch("accountTermsDocumentId")?e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(pr,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Document încărcat"}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{E.setValue("accountTermsDocumentId",void 0),D(b=>b.filter(W=>W.type!=="account_terms"))},children:e.jsx(Io,{className:"h-3 w-3"})})]}):e.jsx(F,{type:"button",variant:"outline",size:"sm",className:"flex items-center gap-2",disabled:R.terms,onClick:()=>{var b;return(b=K.current)==null?void 0:b.click()},children:R.terms?e.jsx(e.Fragment,{children:"Încărcare..."}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"h-4 w-4"}),"Încarcă document semnat"]})})]})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-md p-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Notă importantă:"}),e.jsx("p",{className:"text-sm",children:"Înregistrarea unui angajat necesită completarea unui contract de muncă și raportarea în Revisal. După înregistrarea angajatului, veți fi redirecționat către pagina de creare contract."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(F,{type:"button",variant:"outline",children:"Anulează"}),e.jsxs(F,{type:"button",variant:"outline",onClick:()=>we(),className:"flex items-center gap-2",children:[e.jsx(Dr,{size:16}),"Salvează informațiile"]}),e.jsx(F,{type:"submit",disabled:i||!O,className:O?"":"opacity-50 cursor-not-allowed",children:i?"Se procesează...":O?ne?"Actualizează angajat":"Adaugă angajat":"Completați toate secțiunile obligatorii"})]}),!O&&e.jsx("div",{className:"mt-4 p-4 border border-amber-200 bg-amber-50 rounded-md",children:e.jsxs("p",{className:"text-amber-700 text-sm",children:[e.jsx("strong",{children:"Notă:"})," Pentru a activa butonul de adăugare, trebuie să completați și să salvați toate secțiunile formularului.",!N.personal&&e.jsx("span",{className:"block mt-1",children:'• Secțiunea "Informații personale" nu este completată'}),!N.contact&&e.jsx("span",{className:"block mt-1",children:'• Secțiunea "Identificare oficială" nu este completată'}),!N.employment&&e.jsx("span",{className:"block mt-1",children:'• Secțiunea "Informații angajare" nu este completată'}),!N.documents&&e.jsx("span",{className:"block mt-1",children:'• Secțiunea "Setări și consimțământ" nu este completată'})]})})]})})},bg=()=>{const[p,c]=Ln(),{useCreateEmployee:i}=_n(),{mutate:ne,isPending:Z,isError:ae,error:O}=i(),J=B=>{ne(B,{onSuccess:D=>{D.success&&D.data&&c(`/hr/employees/${D.data.id}`)}})};return e.jsx(xn,{activeTab:"employees",title:"Adaugă angajat nou",subtitle:"Completați datele pentru noul angajat conform cerințelor ANAF și Revisal",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[ae&&e.jsxs(ls,{variant:"destructive",className:"mb-6",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx(cs,{children:"Eroare la adăugarea angajatului"}),e.jsx(os,{children:(O==null?void 0:O.message)||"A apărut o eroare neașteptată. Vă rugăm să încercați din nou."})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 rounded-md p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Informații importante:"}),e.jsx("p",{className:"text-sm mt-1",children:"Pentru a înregistra un angajat nou, aveți nevoie de următoarele informații:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm mt-1",children:[e.jsx("li",{children:"Date personale (nume, prenume, CNP, etc.)"}),e.jsx("li",{children:"Cod COR valid pentru funcția angajatului"}),e.jsx("li",{children:"Departament și poziție în cadrul companiei"})]}),e.jsx("p",{className:"text-sm mt-1",children:"După crearea angajatului, va trebui să adăugați un contract de muncă pentru acesta în secțiunea de contracte."})]}),e.jsx(Ng,{onSubmit:J,isSubmitting:Z})]})})},yg=()=>{var pn,Fn,de;const[p,c]=Ln(),[i,ne]=M.useState(1),[Z,ae]=M.useState(10),[O,J]=M.useState("startDate"),[B,D]=M.useState("desc"),[R,U]=M.useState(""),[v,K]=M.useState("active"),[V,G]=M.useState(),[f,$]=M.useState(!1),[le,Y]=M.useState(""),{useContracts:N,useEmployees:me}=_n(),{data:T,isLoading:H,refetch:E}=N(i,Z,R,v,V),{data:P}=me(1,100,"",void 0,!0),we=((pn=T==null?void 0:T.data)==null?void 0:pn.items)||[],j=((Fn=T==null?void 0:T.data)==null?void 0:Fn.total)||0,fe=((de=P==null?void 0:P.data)==null?void 0:de.items)||[],Ue=we.filter(q=>q.status==="active").length,b=we.filter(q=>q.status==="expiring_soon").length,W=we.filter(q=>q.status==="expired").length,u=q=>{O===q?D(B==="asc"?"desc":"asc"):(J(q),D("asc"))},ie=()=>{c("/hr/contracts/new")},se=q=>{c(`/hr/contracts/${q}`)},Ye=q=>{Y(q),$(!0)},ke=q=>{const Qe=fe.find(he=>he.id===q);return Qe?`${Qe.lastName} ${Qe.firstName}`:"Necunoscut"},He=q=>{switch(q){case"active":return e.jsx(mn,{variant:"outline",className:"bg-green-50 text-green-600 hover:bg-green-50",children:"Activ"});case"expired":return e.jsx(mn,{variant:"outline",className:"bg-red-50 text-red-600 hover:bg-red-50",children:"Expirat"});case"expiring_soon":return e.jsx(mn,{variant:"outline",className:"bg-amber-50 text-amber-600 hover:bg-amber-50",children:"Expiră curând"});case"terminated":return e.jsx(mn,{variant:"outline",className:"bg-slate-50 text-slate-600 hover:bg-slate-50",children:"Terminat"});default:return e.jsx(mn,{variant:"outline",children:q})}};return e.jsx(xn,{activeTab:"contracts",title:"Contracte",subtitle:"Gestionare contracte de muncă",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(tn,{title:"Total contracte",value:j.toString(),icon:e.jsx(on,{size:20}),color:"primary"}),e.jsx(tn,{title:"Contracte active",value:Ue.toString(),icon:e.jsx(pr,{size:20}),color:"success"}),e.jsx(tn,{title:"Expiră curând",value:b.toString(),icon:e.jsx(Jj,{size:20}),color:"warning"}),e.jsx(tn,{title:"Expirate",value:W.toString(),icon:e.jsx(Ji,{size:20}),color:"danger"})]}),e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Lista contractelor"}),e.jsx(Be,{children:"Gestionați contractele de muncă"})]}),e.jsxs(F,{onClick:ie,children:[e.jsx(ia,{className:"mr-2 h-4 w-4"}),"Contract nou"]})]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Caută contract...",className:"pl-8 w-[200px]",value:R,onChange:q=>U(q.target.value)})]}),e.jsxs(Pe,{value:v||"all",onValueChange:q=>K(q==="all"?void 0:q),children:[e.jsx(Re,{className:"w-[150px]",children:e.jsx(De,{placeholder:"Status"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"all",children:"Toate contractele"}),e.jsx(w,{value:"active",children:"Active"}),e.jsx(w,{value:"expiring_soon",children:"Expiră curând"}),e.jsx(w,{value:"expired",children:"Expirate"}),e.jsx(w,{value:"terminated",children:"Terminate"})]})]}),e.jsxs(Pe,{value:V||"all",onValueChange:q=>G(q==="all"?void 0:q),children:[e.jsx(Re,{className:"w-[180px]",children:e.jsx(De,{placeholder:"Angajat"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"all",children:"Toți angajații"}),fe.map(q=>e.jsxs(w,{value:q.id,children:[q.lastName," ",q.firstName]},q.id))]})]}),e.jsx(F,{variant:"outline",size:"icon",onClick:()=>E(),children:e.jsx(Lr,{className:"h-4 w-4"})})]}),e.jsxs(Ys,{children:[e.jsx(Qs,{children:e.jsxs(Ge,{children:[e.jsx(ye,{className:"w-[250px]",children:"Angajat"}),e.jsx(ye,{className:"cursor-pointer",onClick:()=>u("contractNumber"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Nr. contract",O==="contractNumber"&&e.jsx($s,{className:"h-3 w-3"})]})}),e.jsx(ye,{className:"cursor-pointer",onClick:()=>u("startDate"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Perioada",O==="startDate"&&e.jsx($s,{className:"h-3 w-3"})]})}),e.jsx(ye,{children:"Tip contract"}),e.jsx(ye,{children:"Salariu"}),e.jsx(ye,{children:"Status"}),e.jsx(ye,{className:"text-right",children:"Acțiuni"})]})}),e.jsx(Js,{children:H?e.jsx(Ge,{children:e.jsx(oe,{colSpan:7,className:"text-center",children:"Se încarcă contractele..."})}):we.length===0?e.jsx(Ge,{children:e.jsx(oe,{colSpan:7,className:"text-center",children:"Nu au fost găsite contracte"})}):we.map(q=>e.jsxs(Ge,{children:[e.jsx(oe,{className:"font-medium",children:ke(q.employeeId)}),e.jsx(oe,{children:q.contractNumber}),e.jsx(oe,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-xs",children:["De la: ",lt(q.startDate)]}),e.jsxs("span",{className:"text-xs",children:["Până la: ",q.endDate?lt(q.endDate):"Nedeterminată"]})]})}),e.jsx(oe,{children:q.contractType==="full_time"?"Normă întreagă":q.contractType==="part_time"?"Part-time":q.contractType}),e.jsxs(oe,{children:[mr(q.grossSalary)," RON"]}),e.jsx(oe,{children:He(q.status)}),e.jsx(oe,{className:"text-right",children:e.jsxs(la,{children:[e.jsx(ca,{asChild:!0,children:e.jsx(F,{variant:"ghost",size:"icon",children:e.jsx(oa,{className:"h-4 w-4"})})}),e.jsxs(da,{align:"end",children:[e.jsxs(Rs,{onClick:()=>se(q.id),children:[e.jsx(on,{className:"mr-2 h-4 w-4"}),"Detalii contract"]}),e.jsx(ua,{}),e.jsxs(Rs,{className:"text-red-600",onClick:()=>Ye(q.id),children:[e.jsx(ma,{className:"mr-2 h-4 w-4"}),"Șterge contract"]})]})]})})]},q.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:we.length})," din ",e.jsx("strong",{children:j})," contracte"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>ne(i-1),disabled:i===1,children:"Anterior"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>ne(i+1),disabled:we.length<Z,children:"Următor"})]})]})]})]})]})})};var st={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var wg=st.exports,ko;function Cg(){return ko||(ko=1,function(p,c){(function(){var i,ne="4.17.21",Z=200,ae="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",O="Expected a function",J="Invalid `variable` option passed into `_.template`",B="__lodash_hash_undefined__",D=500,R="__lodash_placeholder__",U=1,v=2,K=4,V=1,G=2,f=1,$=2,le=4,Y=8,N=16,me=32,T=64,H=128,E=256,P=512,we=30,j="...",fe=800,Ue=16,b=1,W=2,u=3,ie=1/0,se=9007199254740991,Ye=17976931348623157e292,ke=NaN,He=4294967295,pn=He-1,Fn=He>>>1,de=[["ary",H],["bind",f],["bindKey",$],["curry",Y],["curryRight",N],["flip",P],["partial",me],["partialRight",T],["rearg",E]],q="[object Arguments]",Qe="[object Array]",he="[object AsyncFunction]",ee="[object Boolean]",Ke="[object Date]",fr="[object DOMException]",nr="[object Error]",sr="[object Function]",je="[object GeneratorFunction]",nn="[object Map]",bs="[object Number]",ed="[object Null]",ys="[object Object]",Xi="[object Promise]",nd="[object Proxy]",Or="[object RegExp]",es="[object Set]",kr="[object String]",dt="[object Symbol]",sd="[object Undefined]",Mr="[object WeakMap]",rd="[object WeakSet]",Vr="[object ArrayBuffer]",jr="[object DataView]",pa="[object Float32Array]",fa="[object Float64Array]",ja="[object Int8Array]",ga="[object Int16Array]",va="[object Int32Array]",Na="[object Uint8Array]",ba="[object Uint8ClampedArray]",ya="[object Uint16Array]",wa="[object Uint32Array]",td=/\b__p \+= '';/g,ad=/\b(__p \+=) '' \+/g,id=/(__e\(.*?\)|\b__t\)) \+\n'';/g,el=/&(?:amp|lt|gt|quot|#39);/g,nl=/[&<>"']/g,ld=RegExp(el.source),cd=RegExp(nl.source),od=/<%-([\s\S]+?)%>/g,dd=/<%([\s\S]+?)%>/g,sl=/<%=([\s\S]+?)%>/g,ud=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,md=/^\w*$/,hd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ca=/[\\^$.*+?()[\]{}|]/g,xd=RegExp(Ca.source),Sa=/^\s+/,pd=/\s/,fd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jd=/\{\n\/\* \[wrapped with (.+)\] \*/,gd=/,? & /,vd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nd=/[()=,{}\[\]\/\s]/,bd=/\\(\\)?/g,yd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rl=/\w*$/,wd=/^[-+]0x[0-9a-f]+$/i,Cd=/^0b[01]+$/i,Sd=/^\[object .+?Constructor\]$/,_d=/^0o[0-7]+$/i,Ad=/^(?:0|[1-9]\d*)$/,Td=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ut=/($^)/,Ed=/['\n\r\u2028\u2029\\]/g,mt="\\ud800-\\udfff",Id="\\u0300-\\u036f",zd="\\ufe20-\\ufe2f",Pd="\\u20d0-\\u20ff",tl=Id+zd+Pd,al="\\u2700-\\u27bf",il="a-z\\xdf-\\xf6\\xf8-\\xff",Rd="\\xac\\xb1\\xd7\\xf7",Dd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ld="\\u2000-\\u206f",Fd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ll="A-Z\\xc0-\\xd6\\xd8-\\xde",cl="\\ufe0e\\ufe0f",ol=Rd+Dd+Ld+Fd,_a="['’]",Od="["+mt+"]",dl="["+ol+"]",ht="["+tl+"]",ul="\\d+",kd="["+al+"]",ml="["+il+"]",hl="[^"+mt+ol+ul+al+il+ll+"]",Aa="\\ud83c[\\udffb-\\udfff]",Md="(?:"+ht+"|"+Aa+")",xl="[^"+mt+"]",Ta="(?:\\ud83c[\\udde6-\\uddff]){2}",Ea="[\\ud800-\\udbff][\\udc00-\\udfff]",gr="["+ll+"]",pl="\\u200d",fl="(?:"+ml+"|"+hl+")",Vd="(?:"+gr+"|"+hl+")",jl="(?:"+_a+"(?:d|ll|m|re|s|t|ve))?",gl="(?:"+_a+"(?:D|LL|M|RE|S|T|VE))?",vl=Md+"?",Nl="["+cl+"]?",Bd="(?:"+pl+"(?:"+[xl,Ta,Ea].join("|")+")"+Nl+vl+")*",Ud="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bl=Nl+vl+Bd,qd="(?:"+[kd,Ta,Ea].join("|")+")"+bl,$d="(?:"+[xl+ht+"?",ht,Ta,Ea,Od].join("|")+")",Gd=RegExp(_a,"g"),Hd=RegExp(ht,"g"),Ia=RegExp(Aa+"(?="+Aa+")|"+$d+bl,"g"),Kd=RegExp([gr+"?"+ml+"+"+jl+"(?="+[dl,gr,"$"].join("|")+")",Vd+"+"+gl+"(?="+[dl,gr+fl,"$"].join("|")+")",gr+"?"+fl+"+"+jl,gr+"+"+gl,Wd,Ud,ul,qd].join("|"),"g"),Zd=RegExp("["+pl+mt+tl+cl+"]"),Yd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jd=-1,Xe={};Xe[pa]=Xe[fa]=Xe[ja]=Xe[ga]=Xe[va]=Xe[Na]=Xe[ba]=Xe[ya]=Xe[wa]=!0,Xe[q]=Xe[Qe]=Xe[Vr]=Xe[ee]=Xe[jr]=Xe[Ke]=Xe[nr]=Xe[sr]=Xe[nn]=Xe[bs]=Xe[ys]=Xe[Or]=Xe[es]=Xe[kr]=Xe[Mr]=!1;var Je={};Je[q]=Je[Qe]=Je[Vr]=Je[jr]=Je[ee]=Je[Ke]=Je[pa]=Je[fa]=Je[ja]=Je[ga]=Je[va]=Je[nn]=Je[bs]=Je[ys]=Je[Or]=Je[es]=Je[kr]=Je[dt]=Je[Na]=Je[ba]=Je[ya]=Je[wa]=!0,Je[nr]=Je[sr]=Je[Mr]=!1;var Xd={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},eu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},su={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ru=parseFloat,tu=parseInt,yl=typeof Xt=="object"&&Xt&&Xt.Object===Object&&Xt,au=typeof self=="object"&&self&&self.Object===Object&&self,Nn=yl||au||Function("return this")(),za=c&&!c.nodeType&&c,rr=za&&!0&&p&&!p.nodeType&&p,wl=rr&&rr.exports===za,Pa=wl&&yl.process,$n=function(){try{var h=rr&&rr.require&&rr.require("util").types;return h||Pa&&Pa.binding&&Pa.binding("util")}catch{}}(),Cl=$n&&$n.isArrayBuffer,Sl=$n&&$n.isDate,_l=$n&&$n.isMap,Al=$n&&$n.isRegExp,Tl=$n&&$n.isSet,El=$n&&$n.isTypedArray;function On(h,y,g){switch(g.length){case 0:return h.call(y);case 1:return h.call(y,g[0]);case 2:return h.call(y,g[0],g[1]);case 3:return h.call(y,g[0],g[1],g[2])}return h.apply(y,g)}function iu(h,y,g,re){for(var Ce=-1,Ve=h==null?0:h.length;++Ce<Ve;){var fn=h[Ce];y(re,fn,g(fn),h)}return re}function Gn(h,y){for(var g=-1,re=h==null?0:h.length;++g<re&&y(h[g],g,h)!==!1;);return h}function lu(h,y){for(var g=h==null?0:h.length;g--&&y(h[g],g,h)!==!1;);return h}function Il(h,y){for(var g=-1,re=h==null?0:h.length;++g<re;)if(!y(h[g],g,h))return!1;return!0}function Fs(h,y){for(var g=-1,re=h==null?0:h.length,Ce=0,Ve=[];++g<re;){var fn=h[g];y(fn,g,h)&&(Ve[Ce++]=fn)}return Ve}function xt(h,y){var g=h==null?0:h.length;return!!g&&vr(h,y,0)>-1}function Ra(h,y,g){for(var re=-1,Ce=h==null?0:h.length;++re<Ce;)if(g(y,h[re]))return!0;return!1}function sn(h,y){for(var g=-1,re=h==null?0:h.length,Ce=Array(re);++g<re;)Ce[g]=y(h[g],g,h);return Ce}function Os(h,y){for(var g=-1,re=y.length,Ce=h.length;++g<re;)h[Ce+g]=y[g];return h}function Da(h,y,g,re){var Ce=-1,Ve=h==null?0:h.length;for(re&&Ve&&(g=h[++Ce]);++Ce<Ve;)g=y(g,h[Ce],Ce,h);return g}function cu(h,y,g,re){var Ce=h==null?0:h.length;for(re&&Ce&&(g=h[--Ce]);Ce--;)g=y(g,h[Ce],Ce,h);return g}function La(h,y){for(var g=-1,re=h==null?0:h.length;++g<re;)if(y(h[g],g,h))return!0;return!1}var ou=Fa("length");function du(h){return h.split("")}function uu(h){return h.match(vd)||[]}function zl(h,y,g){var re;return g(h,function(Ce,Ve,fn){if(y(Ce,Ve,fn))return re=Ve,!1}),re}function pt(h,y,g,re){for(var Ce=h.length,Ve=g+(re?1:-1);re?Ve--:++Ve<Ce;)if(y(h[Ve],Ve,h))return Ve;return-1}function vr(h,y,g){return y===y?wu(h,y,g):pt(h,Pl,g)}function mu(h,y,g,re){for(var Ce=g-1,Ve=h.length;++Ce<Ve;)if(re(h[Ce],y))return Ce;return-1}function Pl(h){return h!==h}function Rl(h,y){var g=h==null?0:h.length;return g?ka(h,y)/g:ke}function Fa(h){return function(y){return y==null?i:y[h]}}function Oa(h){return function(y){return h==null?i:h[y]}}function Dl(h,y,g,re,Ce){return Ce(h,function(Ve,fn,Ze){g=re?(re=!1,Ve):y(g,Ve,fn,Ze)}),g}function hu(h,y){var g=h.length;for(h.sort(y);g--;)h[g]=h[g].value;return h}function ka(h,y){for(var g,re=-1,Ce=h.length;++re<Ce;){var Ve=y(h[re]);Ve!==i&&(g=g===i?Ve:g+Ve)}return g}function Ma(h,y){for(var g=-1,re=Array(h);++g<h;)re[g]=y(g);return re}function xu(h,y){return sn(y,function(g){return[g,h[g]]})}function Ll(h){return h&&h.slice(0,Ml(h)+1).replace(Sa,"")}function kn(h){return function(y){return h(y)}}function Va(h,y){return sn(y,function(g){return h[g]})}function Br(h,y){return h.has(y)}function Fl(h,y){for(var g=-1,re=h.length;++g<re&&vr(y,h[g],0)>-1;);return g}function Ol(h,y){for(var g=h.length;g--&&vr(y,h[g],0)>-1;);return g}function pu(h,y){for(var g=h.length,re=0;g--;)h[g]===y&&++re;return re}var fu=Oa(Xd),ju=Oa(eu);function gu(h){return"\\"+su[h]}function vu(h,y){return h==null?i:h[y]}function Nr(h){return Zd.test(h)}function Nu(h){return Yd.test(h)}function bu(h){for(var y,g=[];!(y=h.next()).done;)g.push(y.value);return g}function Ba(h){var y=-1,g=Array(h.size);return h.forEach(function(re,Ce){g[++y]=[Ce,re]}),g}function kl(h,y){return function(g){return h(y(g))}}function ks(h,y){for(var g=-1,re=h.length,Ce=0,Ve=[];++g<re;){var fn=h[g];(fn===y||fn===R)&&(h[g]=R,Ve[Ce++]=g)}return Ve}function ft(h){var y=-1,g=Array(h.size);return h.forEach(function(re){g[++y]=re}),g}function yu(h){var y=-1,g=Array(h.size);return h.forEach(function(re){g[++y]=[re,re]}),g}function wu(h,y,g){for(var re=g-1,Ce=h.length;++re<Ce;)if(h[re]===y)return re;return-1}function Cu(h,y,g){for(var re=g+1;re--;)if(h[re]===y)return re;return re}function br(h){return Nr(h)?_u(h):ou(h)}function ns(h){return Nr(h)?Au(h):du(h)}function Ml(h){for(var y=h.length;y--&&pd.test(h.charAt(y)););return y}var Su=Oa(nu);function _u(h){for(var y=Ia.lastIndex=0;Ia.test(h);)++y;return y}function Au(h){return h.match(Ia)||[]}function Tu(h){return h.match(Kd)||[]}var Eu=function h(y){y=y==null?Nn:yr.defaults(Nn.Object(),y,yr.pick(Nn,Qd));var g=y.Array,re=y.Date,Ce=y.Error,Ve=y.Function,fn=y.Math,Ze=y.Object,Ua=y.RegExp,Iu=y.String,Hn=y.TypeError,jt=g.prototype,zu=Ve.prototype,wr=Ze.prototype,gt=y["__core-js_shared__"],vt=zu.toString,$e=wr.hasOwnProperty,Pu=0,Vl=function(){var n=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Nt=wr.toString,Ru=vt.call(Ze),Du=Nn._,Lu=Ua("^"+vt.call($e).replace(Ca,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=wl?y.Buffer:i,Ms=y.Symbol,yt=y.Uint8Array,Bl=bt?bt.allocUnsafe:i,wt=kl(Ze.getPrototypeOf,Ze),Ul=Ze.create,Wl=wr.propertyIsEnumerable,Ct=jt.splice,ql=Ms?Ms.isConcatSpreadable:i,Ur=Ms?Ms.iterator:i,tr=Ms?Ms.toStringTag:i,St=function(){try{var n=or(Ze,"defineProperty");return n({},"",{}),n}catch{}}(),Fu=y.clearTimeout!==Nn.clearTimeout&&y.clearTimeout,Ou=re&&re.now!==Nn.Date.now&&re.now,ku=y.setTimeout!==Nn.setTimeout&&y.setTimeout,_t=fn.ceil,At=fn.floor,Wa=Ze.getOwnPropertySymbols,Mu=bt?bt.isBuffer:i,$l=y.isFinite,Vu=jt.join,Bu=kl(Ze.keys,Ze),jn=fn.max,yn=fn.min,Uu=re.now,Wu=y.parseInt,Gl=fn.random,qu=jt.reverse,qa=or(y,"DataView"),Wr=or(y,"Map"),$a=or(y,"Promise"),Cr=or(y,"Set"),qr=or(y,"WeakMap"),$r=or(Ze,"create"),Tt=qr&&new qr,Sr={},$u=dr(qa),Gu=dr(Wr),Hu=dr($a),Ku=dr(Cr),Zu=dr(qr),Et=Ms?Ms.prototype:i,Gr=Et?Et.valueOf:i,Hl=Et?Et.toString:i;function l(n){if(an(n)&&!Ae(n)&&!(n instanceof Oe)){if(n instanceof Kn)return n;if($e.call(n,"__wrapped__"))return Kc(n)}return new Kn(n)}var _r=function(){function n(){}return function(s){if(!rn(s))return{};if(Ul)return Ul(s);n.prototype=s;var r=new n;return n.prototype=i,r}}();function It(){}function Kn(n,s){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=i}l.templateSettings={escape:od,evaluate:dd,interpolate:sl,variable:"",imports:{_:l}},l.prototype=It.prototype,l.prototype.constructor=l,Kn.prototype=_r(It.prototype),Kn.prototype.constructor=Kn;function Oe(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=He,this.__views__=[]}function Yu(){var n=new Oe(this.__wrapped__);return n.__actions__=zn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=zn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=zn(this.__views__),n}function Qu(){if(this.__filtered__){var n=new Oe(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Ju(){var n=this.__wrapped__.value(),s=this.__dir__,r=Ae(n),t=s<0,a=r?n.length:0,o=dh(0,a,this.__views__),d=o.start,m=o.end,x=m-d,I=t?m:d-1,z=this.__iteratees__,L=z.length,X=0,ce=yn(x,this.__takeCount__);if(!r||!t&&a==x&&ce==x)return jc(n,this.__actions__);var ve=[];e:for(;x--&&X<ce;){I+=s;for(var Ee=-1,Ne=n[I];++Ee<L;){var Fe=z[Ee],Me=Fe.iteratee,Bn=Fe.type,En=Me(Ne);if(Bn==W)Ne=En;else if(!En){if(Bn==b)continue e;break e}}ve[X++]=Ne}return ve}Oe.prototype=_r(It.prototype),Oe.prototype.constructor=Oe;function ar(n){var s=-1,r=n==null?0:n.length;for(this.clear();++s<r;){var t=n[s];this.set(t[0],t[1])}}function Xu(){this.__data__=$r?$r(null):{},this.size=0}function em(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s}function nm(n){var s=this.__data__;if($r){var r=s[n];return r===B?i:r}return $e.call(s,n)?s[n]:i}function sm(n){var s=this.__data__;return $r?s[n]!==i:$e.call(s,n)}function rm(n,s){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=$r&&s===i?B:s,this}ar.prototype.clear=Xu,ar.prototype.delete=em,ar.prototype.get=nm,ar.prototype.has=sm,ar.prototype.set=rm;function ws(n){var s=-1,r=n==null?0:n.length;for(this.clear();++s<r;){var t=n[s];this.set(t[0],t[1])}}function tm(){this.__data__=[],this.size=0}function am(n){var s=this.__data__,r=zt(s,n);if(r<0)return!1;var t=s.length-1;return r==t?s.pop():Ct.call(s,r,1),--this.size,!0}function im(n){var s=this.__data__,r=zt(s,n);return r<0?i:s[r][1]}function lm(n){return zt(this.__data__,n)>-1}function cm(n,s){var r=this.__data__,t=zt(r,n);return t<0?(++this.size,r.push([n,s])):r[t][1]=s,this}ws.prototype.clear=tm,ws.prototype.delete=am,ws.prototype.get=im,ws.prototype.has=lm,ws.prototype.set=cm;function Cs(n){var s=-1,r=n==null?0:n.length;for(this.clear();++s<r;){var t=n[s];this.set(t[0],t[1])}}function om(){this.size=0,this.__data__={hash:new ar,map:new(Wr||ws),string:new ar}}function dm(n){var s=Wt(this,n).delete(n);return this.size-=s?1:0,s}function um(n){return Wt(this,n).get(n)}function mm(n){return Wt(this,n).has(n)}function hm(n,s){var r=Wt(this,n),t=r.size;return r.set(n,s),this.size+=r.size==t?0:1,this}Cs.prototype.clear=om,Cs.prototype.delete=dm,Cs.prototype.get=um,Cs.prototype.has=mm,Cs.prototype.set=hm;function ir(n){var s=-1,r=n==null?0:n.length;for(this.__data__=new Cs;++s<r;)this.add(n[s])}function xm(n){return this.__data__.set(n,B),this}function pm(n){return this.__data__.has(n)}ir.prototype.add=ir.prototype.push=xm,ir.prototype.has=pm;function ss(n){var s=this.__data__=new ws(n);this.size=s.size}function fm(){this.__data__=new ws,this.size=0}function jm(n){var s=this.__data__,r=s.delete(n);return this.size=s.size,r}function gm(n){return this.__data__.get(n)}function vm(n){return this.__data__.has(n)}function Nm(n,s){var r=this.__data__;if(r instanceof ws){var t=r.__data__;if(!Wr||t.length<Z-1)return t.push([n,s]),this.size=++r.size,this;r=this.__data__=new Cs(t)}return r.set(n,s),this.size=r.size,this}ss.prototype.clear=fm,ss.prototype.delete=jm,ss.prototype.get=gm,ss.prototype.has=vm,ss.prototype.set=Nm;function Kl(n,s){var r=Ae(n),t=!r&&ur(n),a=!r&&!t&&qs(n),o=!r&&!t&&!a&&Ir(n),d=r||t||a||o,m=d?Ma(n.length,Iu):[],x=m.length;for(var I in n)(s||$e.call(n,I))&&!(d&&(I=="length"||a&&(I=="offset"||I=="parent")||o&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||Ts(I,x)))&&m.push(I);return m}function Zl(n){var s=n.length;return s?n[si(0,s-1)]:i}function bm(n,s){return qt(zn(n),lr(s,0,n.length))}function ym(n){return qt(zn(n))}function Ga(n,s,r){(r!==i&&!rs(n[s],r)||r===i&&!(s in n))&&Ss(n,s,r)}function Hr(n,s,r){var t=n[s];(!($e.call(n,s)&&rs(t,r))||r===i&&!(s in n))&&Ss(n,s,r)}function zt(n,s){for(var r=n.length;r--;)if(rs(n[r][0],s))return r;return-1}function wm(n,s,r,t){return Vs(n,function(a,o,d){s(t,a,r(a),d)}),t}function Yl(n,s){return n&&us(s,gn(s),n)}function Cm(n,s){return n&&us(s,Rn(s),n)}function Ss(n,s,r){s=="__proto__"&&St?St(n,s,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[s]=r}function Ha(n,s){for(var r=-1,t=s.length,a=g(t),o=n==null;++r<t;)a[r]=o?i:Ai(n,s[r]);return a}function lr(n,s,r){return n===n&&(r!==i&&(n=n<=r?n:r),s!==i&&(n=n>=s?n:s)),n}function Zn(n,s,r,t,a,o){var d,m=s&U,x=s&v,I=s&K;if(r&&(d=a?r(n,t,a,o):r(n)),d!==i)return d;if(!rn(n))return n;var z=Ae(n);if(z){if(d=mh(n),!m)return zn(n,d)}else{var L=wn(n),X=L==sr||L==je;if(qs(n))return Nc(n,m);if(L==ys||L==q||X&&!a){if(d=x||X?{}:Mc(n),!m)return x?nh(n,Cm(d,n)):eh(n,Yl(d,n))}else{if(!Je[L])return a?n:{};d=hh(n,L,m)}}o||(o=new ss);var ce=o.get(n);if(ce)return ce;o.set(n,d),po(n)?n.forEach(function(Ne){d.add(Zn(Ne,s,r,Ne,n,o))}):ho(n)&&n.forEach(function(Ne,Fe){d.set(Fe,Zn(Ne,s,r,Fe,n,o))});var ve=I?x?hi:mi:x?Rn:gn,Ee=z?i:ve(n);return Gn(Ee||n,function(Ne,Fe){Ee&&(Fe=Ne,Ne=n[Fe]),Hr(d,Fe,Zn(Ne,s,r,Fe,n,o))}),d}function Sm(n){var s=gn(n);return function(r){return Ql(r,n,s)}}function Ql(n,s,r){var t=r.length;if(n==null)return!t;for(n=Ze(n);t--;){var a=r[t],o=s[a],d=n[a];if(d===i&&!(a in n)||!o(d))return!1}return!0}function Jl(n,s,r){if(typeof n!="function")throw new Hn(O);return et(function(){n.apply(i,r)},s)}function Kr(n,s,r,t){var a=-1,o=xt,d=!0,m=n.length,x=[],I=s.length;if(!m)return x;r&&(s=sn(s,kn(r))),t?(o=Ra,d=!1):s.length>=Z&&(o=Br,d=!1,s=new ir(s));e:for(;++a<m;){var z=n[a],L=r==null?z:r(z);if(z=t||z!==0?z:0,d&&L===L){for(var X=I;X--;)if(s[X]===L)continue e;x.push(z)}else o(s,L,t)||x.push(z)}return x}var Vs=Sc(ds),Xl=Sc(Za,!0);function _m(n,s){var r=!0;return Vs(n,function(t,a,o){return r=!!s(t,a,o),r}),r}function Pt(n,s,r){for(var t=-1,a=n.length;++t<a;){var o=n[t],d=s(o);if(d!=null&&(m===i?d===d&&!Vn(d):r(d,m)))var m=d,x=o}return x}function Am(n,s,r,t){var a=n.length;for(r=Te(r),r<0&&(r=-r>a?0:a+r),t=t===i||t>a?a:Te(t),t<0&&(t+=a),t=r>t?0:jo(t);r<t;)n[r++]=s;return n}function ec(n,s){var r=[];return Vs(n,function(t,a,o){s(t,a,o)&&r.push(t)}),r}function bn(n,s,r,t,a){var o=-1,d=n.length;for(r||(r=ph),a||(a=[]);++o<d;){var m=n[o];s>0&&r(m)?s>1?bn(m,s-1,r,t,a):Os(a,m):t||(a[a.length]=m)}return a}var Ka=_c(),nc=_c(!0);function ds(n,s){return n&&Ka(n,s,gn)}function Za(n,s){return n&&nc(n,s,gn)}function Rt(n,s){return Fs(s,function(r){return Es(n[r])})}function cr(n,s){s=Us(s,n);for(var r=0,t=s.length;n!=null&&r<t;)n=n[ms(s[r++])];return r&&r==t?n:i}function sc(n,s,r){var t=s(n);return Ae(n)?t:Os(t,r(n))}function An(n){return n==null?n===i?sd:ed:tr&&tr in Ze(n)?oh(n):yh(n)}function Ya(n,s){return n>s}function Tm(n,s){return n!=null&&$e.call(n,s)}function Em(n,s){return n!=null&&s in Ze(n)}function Im(n,s,r){return n>=yn(s,r)&&n<jn(s,r)}function Qa(n,s,r){for(var t=r?Ra:xt,a=n[0].length,o=n.length,d=o,m=g(o),x=1/0,I=[];d--;){var z=n[d];d&&s&&(z=sn(z,kn(s))),x=yn(z.length,x),m[d]=!r&&(s||a>=120&&z.length>=120)?new ir(d&&z):i}z=n[0];var L=-1,X=m[0];e:for(;++L<a&&I.length<x;){var ce=z[L],ve=s?s(ce):ce;if(ce=r||ce!==0?ce:0,!(X?Br(X,ve):t(I,ve,r))){for(d=o;--d;){var Ee=m[d];if(!(Ee?Br(Ee,ve):t(n[d],ve,r)))continue e}X&&X.push(ve),I.push(ce)}}return I}function zm(n,s,r,t){return ds(n,function(a,o,d){s(t,r(a),o,d)}),t}function Zr(n,s,r){s=Us(s,n),n=Wc(n,s);var t=n==null?n:n[ms(Qn(s))];return t==null?i:On(t,n,r)}function rc(n){return an(n)&&An(n)==q}function Pm(n){return an(n)&&An(n)==Vr}function Rm(n){return an(n)&&An(n)==Ke}function Yr(n,s,r,t,a){return n===s?!0:n==null||s==null||!an(n)&&!an(s)?n!==n&&s!==s:Dm(n,s,r,t,Yr,a)}function Dm(n,s,r,t,a,o){var d=Ae(n),m=Ae(s),x=d?Qe:wn(n),I=m?Qe:wn(s);x=x==q?ys:x,I=I==q?ys:I;var z=x==ys,L=I==ys,X=x==I;if(X&&qs(n)){if(!qs(s))return!1;d=!0,z=!1}if(X&&!z)return o||(o=new ss),d||Ir(n)?Fc(n,s,r,t,a,o):lh(n,s,x,r,t,a,o);if(!(r&V)){var ce=z&&$e.call(n,"__wrapped__"),ve=L&&$e.call(s,"__wrapped__");if(ce||ve){var Ee=ce?n.value():n,Ne=ve?s.value():s;return o||(o=new ss),a(Ee,Ne,r,t,o)}}return X?(o||(o=new ss),ch(n,s,r,t,a,o)):!1}function Lm(n){return an(n)&&wn(n)==nn}function Ja(n,s,r,t){var a=r.length,o=a,d=!t;if(n==null)return!o;for(n=Ze(n);a--;){var m=r[a];if(d&&m[2]?m[1]!==n[m[0]]:!(m[0]in n))return!1}for(;++a<o;){m=r[a];var x=m[0],I=n[x],z=m[1];if(d&&m[2]){if(I===i&&!(x in n))return!1}else{var L=new ss;if(t)var X=t(I,z,x,n,s,L);if(!(X===i?Yr(z,I,V|G,t,L):X))return!1}}return!0}function tc(n){if(!rn(n)||jh(n))return!1;var s=Es(n)?Lu:Sd;return s.test(dr(n))}function Fm(n){return an(n)&&An(n)==Or}function Om(n){return an(n)&&wn(n)==es}function km(n){return an(n)&&Yt(n.length)&&!!Xe[An(n)]}function ac(n){return typeof n=="function"?n:n==null?Dn:typeof n=="object"?Ae(n)?cc(n[0],n[1]):lc(n):To(n)}function Xa(n){if(!Xr(n))return Bu(n);var s=[];for(var r in Ze(n))$e.call(n,r)&&r!="constructor"&&s.push(r);return s}function Mm(n){if(!rn(n))return bh(n);var s=Xr(n),r=[];for(var t in n)t=="constructor"&&(s||!$e.call(n,t))||r.push(t);return r}function ei(n,s){return n<s}function ic(n,s){var r=-1,t=Pn(n)?g(n.length):[];return Vs(n,function(a,o,d){t[++r]=s(a,o,d)}),t}function lc(n){var s=pi(n);return s.length==1&&s[0][2]?Bc(s[0][0],s[0][1]):function(r){return r===n||Ja(r,n,s)}}function cc(n,s){return ji(n)&&Vc(s)?Bc(ms(n),s):function(r){var t=Ai(r,n);return t===i&&t===s?Ti(r,n):Yr(s,t,V|G)}}function Dt(n,s,r,t,a){n!==s&&Ka(s,function(o,d){if(a||(a=new ss),rn(o))Vm(n,s,d,r,Dt,t,a);else{var m=t?t(vi(n,d),o,d+"",n,s,a):i;m===i&&(m=o),Ga(n,d,m)}},Rn)}function Vm(n,s,r,t,a,o,d){var m=vi(n,r),x=vi(s,r),I=d.get(x);if(I){Ga(n,r,I);return}var z=o?o(m,x,r+"",n,s,d):i,L=z===i;if(L){var X=Ae(x),ce=!X&&qs(x),ve=!X&&!ce&&Ir(x);z=x,X||ce||ve?Ae(m)?z=m:dn(m)?z=zn(m):ce?(L=!1,z=Nc(x,!0)):ve?(L=!1,z=bc(x,!0)):z=[]:nt(x)||ur(x)?(z=m,ur(m)?z=go(m):(!rn(m)||Es(m))&&(z=Mc(x))):L=!1}L&&(d.set(x,z),a(z,x,t,o,d),d.delete(x)),Ga(n,r,z)}function oc(n,s){var r=n.length;if(r)return s+=s<0?r:0,Ts(s,r)?n[s]:i}function dc(n,s,r){s.length?s=sn(s,function(o){return Ae(o)?function(d){return cr(d,o.length===1?o[0]:o)}:o}):s=[Dn];var t=-1;s=sn(s,kn(ge()));var a=ic(n,function(o,d,m){var x=sn(s,function(I){return I(o)});return{criteria:x,index:++t,value:o}});return hu(a,function(o,d){return Xm(o,d,r)})}function Bm(n,s){return uc(n,s,function(r,t){return Ti(n,t)})}function uc(n,s,r){for(var t=-1,a=s.length,o={};++t<a;){var d=s[t],m=cr(n,d);r(m,d)&&Qr(o,Us(d,n),m)}return o}function Um(n){return function(s){return cr(s,n)}}function ni(n,s,r,t){var a=t?mu:vr,o=-1,d=s.length,m=n;for(n===s&&(s=zn(s)),r&&(m=sn(n,kn(r)));++o<d;)for(var x=0,I=s[o],z=r?r(I):I;(x=a(m,z,x,t))>-1;)m!==n&&Ct.call(m,x,1),Ct.call(n,x,1);return n}function mc(n,s){for(var r=n?s.length:0,t=r-1;r--;){var a=s[r];if(r==t||a!==o){var o=a;Ts(a)?Ct.call(n,a,1):ai(n,a)}}return n}function si(n,s){return n+At(Gl()*(s-n+1))}function Wm(n,s,r,t){for(var a=-1,o=jn(_t((s-n)/(r||1)),0),d=g(o);o--;)d[t?o:++a]=n,n+=r;return d}function ri(n,s){var r="";if(!n||s<1||s>se)return r;do s%2&&(r+=n),s=At(s/2),s&&(n+=n);while(s);return r}function ze(n,s){return Ni(Uc(n,s,Dn),n+"")}function qm(n){return Zl(zr(n))}function $m(n,s){var r=zr(n);return qt(r,lr(s,0,r.length))}function Qr(n,s,r,t){if(!rn(n))return n;s=Us(s,n);for(var a=-1,o=s.length,d=o-1,m=n;m!=null&&++a<o;){var x=ms(s[a]),I=r;if(x==="__proto__"||x==="constructor"||x==="prototype")return n;if(a!=d){var z=m[x];I=t?t(z,x,m):i,I===i&&(I=rn(z)?z:Ts(s[a+1])?[]:{})}Hr(m,x,I),m=m[x]}return n}var hc=Tt?function(n,s){return Tt.set(n,s),n}:Dn,Gm=St?function(n,s){return St(n,"toString",{configurable:!0,enumerable:!1,value:Ii(s),writable:!0})}:Dn;function Hm(n){return qt(zr(n))}function Yn(n,s,r){var t=-1,a=n.length;s<0&&(s=-s>a?0:a+s),r=r>a?a:r,r<0&&(r+=a),a=s>r?0:r-s>>>0,s>>>=0;for(var o=g(a);++t<a;)o[t]=n[t+s];return o}function Km(n,s){var r;return Vs(n,function(t,a,o){return r=s(t,a,o),!r}),!!r}function Lt(n,s,r){var t=0,a=n==null?t:n.length;if(typeof s=="number"&&s===s&&a<=Fn){for(;t<a;){var o=t+a>>>1,d=n[o];d!==null&&!Vn(d)&&(r?d<=s:d<s)?t=o+1:a=o}return a}return ti(n,s,Dn,r)}function ti(n,s,r,t){var a=0,o=n==null?0:n.length;if(o===0)return 0;s=r(s);for(var d=s!==s,m=s===null,x=Vn(s),I=s===i;a<o;){var z=At((a+o)/2),L=r(n[z]),X=L!==i,ce=L===null,ve=L===L,Ee=Vn(L);if(d)var Ne=t||ve;else I?Ne=ve&&(t||X):m?Ne=ve&&X&&(t||!ce):x?Ne=ve&&X&&!ce&&(t||!Ee):ce||Ee?Ne=!1:Ne=t?L<=s:L<s;Ne?a=z+1:o=z}return yn(o,pn)}function xc(n,s){for(var r=-1,t=n.length,a=0,o=[];++r<t;){var d=n[r],m=s?s(d):d;if(!r||!rs(m,x)){var x=m;o[a++]=d===0?0:d}}return o}function pc(n){return typeof n=="number"?n:Vn(n)?ke:+n}function Mn(n){if(typeof n=="string")return n;if(Ae(n))return sn(n,Mn)+"";if(Vn(n))return Hl?Hl.call(n):"";var s=n+"";return s=="0"&&1/n==-1/0?"-0":s}function Bs(n,s,r){var t=-1,a=xt,o=n.length,d=!0,m=[],x=m;if(r)d=!1,a=Ra;else if(o>=Z){var I=s?null:ah(n);if(I)return ft(I);d=!1,a=Br,x=new ir}else x=s?[]:m;e:for(;++t<o;){var z=n[t],L=s?s(z):z;if(z=r||z!==0?z:0,d&&L===L){for(var X=x.length;X--;)if(x[X]===L)continue e;s&&x.push(L),m.push(z)}else a(x,L,r)||(x!==m&&x.push(L),m.push(z))}return m}function ai(n,s){return s=Us(s,n),n=Wc(n,s),n==null||delete n[ms(Qn(s))]}function fc(n,s,r,t){return Qr(n,s,r(cr(n,s)),t)}function Ft(n,s,r,t){for(var a=n.length,o=t?a:-1;(t?o--:++o<a)&&s(n[o],o,n););return r?Yn(n,t?0:o,t?o+1:a):Yn(n,t?o+1:0,t?a:o)}function jc(n,s){var r=n;return r instanceof Oe&&(r=r.value()),Da(s,function(t,a){return a.func.apply(a.thisArg,Os([t],a.args))},r)}function ii(n,s,r){var t=n.length;if(t<2)return t?Bs(n[0]):[];for(var a=-1,o=g(t);++a<t;)for(var d=n[a],m=-1;++m<t;)m!=a&&(o[a]=Kr(o[a]||d,n[m],s,r));return Bs(bn(o,1),s,r)}function gc(n,s,r){for(var t=-1,a=n.length,o=s.length,d={};++t<a;){var m=t<o?s[t]:i;r(d,n[t],m)}return d}function li(n){return dn(n)?n:[]}function ci(n){return typeof n=="function"?n:Dn}function Us(n,s){return Ae(n)?n:ji(n,s)?[n]:Hc(We(n))}var Zm=ze;function Ws(n,s,r){var t=n.length;return r=r===i?t:r,!s&&r>=t?n:Yn(n,s,r)}var vc=Fu||function(n){return Nn.clearTimeout(n)};function Nc(n,s){if(s)return n.slice();var r=n.length,t=Bl?Bl(r):new n.constructor(r);return n.copy(t),t}function oi(n){var s=new n.constructor(n.byteLength);return new yt(s).set(new yt(n)),s}function Ym(n,s){var r=s?oi(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}function Qm(n){var s=new n.constructor(n.source,rl.exec(n));return s.lastIndex=n.lastIndex,s}function Jm(n){return Gr?Ze(Gr.call(n)):{}}function bc(n,s){var r=s?oi(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function yc(n,s){if(n!==s){var r=n!==i,t=n===null,a=n===n,o=Vn(n),d=s!==i,m=s===null,x=s===s,I=Vn(s);if(!m&&!I&&!o&&n>s||o&&d&&x&&!m&&!I||t&&d&&x||!r&&x||!a)return 1;if(!t&&!o&&!I&&n<s||I&&r&&a&&!t&&!o||m&&r&&a||!d&&a||!x)return-1}return 0}function Xm(n,s,r){for(var t=-1,a=n.criteria,o=s.criteria,d=a.length,m=r.length;++t<d;){var x=yc(a[t],o[t]);if(x){if(t>=m)return x;var I=r[t];return x*(I=="desc"?-1:1)}}return n.index-s.index}function wc(n,s,r,t){for(var a=-1,o=n.length,d=r.length,m=-1,x=s.length,I=jn(o-d,0),z=g(x+I),L=!t;++m<x;)z[m]=s[m];for(;++a<d;)(L||a<o)&&(z[r[a]]=n[a]);for(;I--;)z[m++]=n[a++];return z}function Cc(n,s,r,t){for(var a=-1,o=n.length,d=-1,m=r.length,x=-1,I=s.length,z=jn(o-m,0),L=g(z+I),X=!t;++a<z;)L[a]=n[a];for(var ce=a;++x<I;)L[ce+x]=s[x];for(;++d<m;)(X||a<o)&&(L[ce+r[d]]=n[a++]);return L}function zn(n,s){var r=-1,t=n.length;for(s||(s=g(t));++r<t;)s[r]=n[r];return s}function us(n,s,r,t){var a=!r;r||(r={});for(var o=-1,d=s.length;++o<d;){var m=s[o],x=t?t(r[m],n[m],m,r,n):i;x===i&&(x=n[m]),a?Ss(r,m,x):Hr(r,m,x)}return r}function eh(n,s){return us(n,fi(n),s)}function nh(n,s){return us(n,Oc(n),s)}function Ot(n,s){return function(r,t){var a=Ae(r)?iu:wm,o=s?s():{};return a(r,n,ge(t,2),o)}}function Ar(n){return ze(function(s,r){var t=-1,a=r.length,o=a>1?r[a-1]:i,d=a>2?r[2]:i;for(o=n.length>3&&typeof o=="function"?(a--,o):i,d&&Tn(r[0],r[1],d)&&(o=a<3?i:o,a=1),s=Ze(s);++t<a;){var m=r[t];m&&n(s,m,t,o)}return s})}function Sc(n,s){return function(r,t){if(r==null)return r;if(!Pn(r))return n(r,t);for(var a=r.length,o=s?a:-1,d=Ze(r);(s?o--:++o<a)&&t(d[o],o,d)!==!1;);return r}}function _c(n){return function(s,r,t){for(var a=-1,o=Ze(s),d=t(s),m=d.length;m--;){var x=d[n?m:++a];if(r(o[x],x,o)===!1)break}return s}}function sh(n,s,r){var t=s&f,a=Jr(n);function o(){var d=this&&this!==Nn&&this instanceof o?a:n;return d.apply(t?r:this,arguments)}return o}function Ac(n){return function(s){s=We(s);var r=Nr(s)?ns(s):i,t=r?r[0]:s.charAt(0),a=r?Ws(r,1).join(""):s.slice(1);return t[n]()+a}}function Tr(n){return function(s){return Da(_o(So(s).replace(Gd,"")),n,"")}}function Jr(n){return function(){var s=arguments;switch(s.length){case 0:return new n;case 1:return new n(s[0]);case 2:return new n(s[0],s[1]);case 3:return new n(s[0],s[1],s[2]);case 4:return new n(s[0],s[1],s[2],s[3]);case 5:return new n(s[0],s[1],s[2],s[3],s[4]);case 6:return new n(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new n(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var r=_r(n.prototype),t=n.apply(r,s);return rn(t)?t:r}}function rh(n,s,r){var t=Jr(n);function a(){for(var o=arguments.length,d=g(o),m=o,x=Er(a);m--;)d[m]=arguments[m];var I=o<3&&d[0]!==x&&d[o-1]!==x?[]:ks(d,x);if(o-=I.length,o<r)return Pc(n,s,kt,a.placeholder,i,d,I,i,i,r-o);var z=this&&this!==Nn&&this instanceof a?t:n;return On(z,this,d)}return a}function Tc(n){return function(s,r,t){var a=Ze(s);if(!Pn(s)){var o=ge(r,3);s=gn(s),r=function(m){return o(a[m],m,a)}}var d=n(s,r,t);return d>-1?a[o?s[d]:d]:i}}function Ec(n){return As(function(s){var r=s.length,t=r,a=Kn.prototype.thru;for(n&&s.reverse();t--;){var o=s[t];if(typeof o!="function")throw new Hn(O);if(a&&!d&&Ut(o)=="wrapper")var d=new Kn([],!0)}for(t=d?t:r;++t<r;){o=s[t];var m=Ut(o),x=m=="wrapper"?xi(o):i;x&&gi(x[0])&&x[1]==(H|Y|me|E)&&!x[4].length&&x[9]==1?d=d[Ut(x[0])].apply(d,x[3]):d=o.length==1&&gi(o)?d[m]():d.thru(o)}return function(){var I=arguments,z=I[0];if(d&&I.length==1&&Ae(z))return d.plant(z).value();for(var L=0,X=r?s[L].apply(this,I):z;++L<r;)X=s[L].call(this,X);return X}})}function kt(n,s,r,t,a,o,d,m,x,I){var z=s&H,L=s&f,X=s&$,ce=s&(Y|N),ve=s&P,Ee=X?i:Jr(n);function Ne(){for(var Fe=arguments.length,Me=g(Fe),Bn=Fe;Bn--;)Me[Bn]=arguments[Bn];if(ce)var En=Er(Ne),Un=pu(Me,En);if(t&&(Me=wc(Me,t,a,ce)),o&&(Me=Cc(Me,o,d,ce)),Fe-=Un,ce&&Fe<I){var un=ks(Me,En);return Pc(n,s,kt,Ne.placeholder,r,Me,un,m,x,I-Fe)}var ts=L?r:this,zs=X?ts[n]:n;return Fe=Me.length,m?Me=wh(Me,m):ve&&Fe>1&&Me.reverse(),z&&x<Fe&&(Me.length=x),this&&this!==Nn&&this instanceof Ne&&(zs=Ee||Jr(zs)),zs.apply(ts,Me)}return Ne}function Ic(n,s){return function(r,t){return zm(r,n,s(t),{})}}function Mt(n,s){return function(r,t){var a;if(r===i&&t===i)return s;if(r!==i&&(a=r),t!==i){if(a===i)return t;typeof r=="string"||typeof t=="string"?(r=Mn(r),t=Mn(t)):(r=pc(r),t=pc(t)),a=n(r,t)}return a}}function di(n){return As(function(s){return s=sn(s,kn(ge())),ze(function(r){var t=this;return n(s,function(a){return On(a,t,r)})})})}function Vt(n,s){s=s===i?" ":Mn(s);var r=s.length;if(r<2)return r?ri(s,n):s;var t=ri(s,_t(n/br(s)));return Nr(s)?Ws(ns(t),0,n).join(""):t.slice(0,n)}function th(n,s,r,t){var a=s&f,o=Jr(n);function d(){for(var m=-1,x=arguments.length,I=-1,z=t.length,L=g(z+x),X=this&&this!==Nn&&this instanceof d?o:n;++I<z;)L[I]=t[I];for(;x--;)L[I++]=arguments[++m];return On(X,a?r:this,L)}return d}function zc(n){return function(s,r,t){return t&&typeof t!="number"&&Tn(s,r,t)&&(r=t=i),s=Is(s),r===i?(r=s,s=0):r=Is(r),t=t===i?s<r?1:-1:Is(t),Wm(s,r,t,n)}}function Bt(n){return function(s,r){return typeof s=="string"&&typeof r=="string"||(s=Jn(s),r=Jn(r)),n(s,r)}}function Pc(n,s,r,t,a,o,d,m,x,I){var z=s&Y,L=z?d:i,X=z?i:d,ce=z?o:i,ve=z?i:o;s|=z?me:T,s&=~(z?T:me),s&le||(s&=-4);var Ee=[n,s,a,ce,L,ve,X,m,x,I],Ne=r.apply(i,Ee);return gi(n)&&qc(Ne,Ee),Ne.placeholder=t,$c(Ne,n,s)}function ui(n){var s=fn[n];return function(r,t){if(r=Jn(r),t=t==null?0:yn(Te(t),292),t&&$l(r)){var a=(We(r)+"e").split("e"),o=s(a[0]+"e"+(+a[1]+t));return a=(We(o)+"e").split("e"),+(a[0]+"e"+(+a[1]-t))}return s(r)}}var ah=Cr&&1/ft(new Cr([,-0]))[1]==ie?function(n){return new Cr(n)}:Ri;function Rc(n){return function(s){var r=wn(s);return r==nn?Ba(s):r==es?yu(s):xu(s,n(s))}}function _s(n,s,r,t,a,o,d,m){var x=s&$;if(!x&&typeof n!="function")throw new Hn(O);var I=t?t.length:0;if(I||(s&=-97,t=a=i),d=d===i?d:jn(Te(d),0),m=m===i?m:Te(m),I-=a?a.length:0,s&T){var z=t,L=a;t=a=i}var X=x?i:xi(n),ce=[n,s,r,t,a,z,L,o,d,m];if(X&&Nh(ce,X),n=ce[0],s=ce[1],r=ce[2],t=ce[3],a=ce[4],m=ce[9]=ce[9]===i?x?0:n.length:jn(ce[9]-I,0),!m&&s&(Y|N)&&(s&=-25),!s||s==f)var ve=sh(n,s,r);else s==Y||s==N?ve=rh(n,s,m):(s==me||s==(f|me))&&!a.length?ve=th(n,s,r,t):ve=kt.apply(i,ce);var Ee=X?hc:qc;return $c(Ee(ve,ce),n,s)}function Dc(n,s,r,t){return n===i||rs(n,wr[r])&&!$e.call(t,r)?s:n}function Lc(n,s,r,t,a,o){return rn(n)&&rn(s)&&(o.set(s,n),Dt(n,s,i,Lc,o),o.delete(s)),n}function ih(n){return nt(n)?i:n}function Fc(n,s,r,t,a,o){var d=r&V,m=n.length,x=s.length;if(m!=x&&!(d&&x>m))return!1;var I=o.get(n),z=o.get(s);if(I&&z)return I==s&&z==n;var L=-1,X=!0,ce=r&G?new ir:i;for(o.set(n,s),o.set(s,n);++L<m;){var ve=n[L],Ee=s[L];if(t)var Ne=d?t(Ee,ve,L,s,n,o):t(ve,Ee,L,n,s,o);if(Ne!==i){if(Ne)continue;X=!1;break}if(ce){if(!La(s,function(Fe,Me){if(!Br(ce,Me)&&(ve===Fe||a(ve,Fe,r,t,o)))return ce.push(Me)})){X=!1;break}}else if(!(ve===Ee||a(ve,Ee,r,t,o))){X=!1;break}}return o.delete(n),o.delete(s),X}function lh(n,s,r,t,a,o,d){switch(r){case jr:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case Vr:return!(n.byteLength!=s.byteLength||!o(new yt(n),new yt(s)));case ee:case Ke:case bs:return rs(+n,+s);case nr:return n.name==s.name&&n.message==s.message;case Or:case kr:return n==s+"";case nn:var m=Ba;case es:var x=t&V;if(m||(m=ft),n.size!=s.size&&!x)return!1;var I=d.get(n);if(I)return I==s;t|=G,d.set(n,s);var z=Fc(m(n),m(s),t,a,o,d);return d.delete(n),z;case dt:if(Gr)return Gr.call(n)==Gr.call(s)}return!1}function ch(n,s,r,t,a,o){var d=r&V,m=mi(n),x=m.length,I=mi(s),z=I.length;if(x!=z&&!d)return!1;for(var L=x;L--;){var X=m[L];if(!(d?X in s:$e.call(s,X)))return!1}var ce=o.get(n),ve=o.get(s);if(ce&&ve)return ce==s&&ve==n;var Ee=!0;o.set(n,s),o.set(s,n);for(var Ne=d;++L<x;){X=m[L];var Fe=n[X],Me=s[X];if(t)var Bn=d?t(Me,Fe,X,s,n,o):t(Fe,Me,X,n,s,o);if(!(Bn===i?Fe===Me||a(Fe,Me,r,t,o):Bn)){Ee=!1;break}Ne||(Ne=X=="constructor")}if(Ee&&!Ne){var En=n.constructor,Un=s.constructor;En!=Un&&"constructor"in n&&"constructor"in s&&!(typeof En=="function"&&En instanceof En&&typeof Un=="function"&&Un instanceof Un)&&(Ee=!1)}return o.delete(n),o.delete(s),Ee}function As(n){return Ni(Uc(n,i,Qc),n+"")}function mi(n){return sc(n,gn,fi)}function hi(n){return sc(n,Rn,Oc)}var xi=Tt?function(n){return Tt.get(n)}:Ri;function Ut(n){for(var s=n.name+"",r=Sr[s],t=$e.call(Sr,s)?r.length:0;t--;){var a=r[t],o=a.func;if(o==null||o==n)return a.name}return s}function Er(n){var s=$e.call(l,"placeholder")?l:n;return s.placeholder}function ge(){var n=l.iteratee||zi;return n=n===zi?ac:n,arguments.length?n(arguments[0],arguments[1]):n}function Wt(n,s){var r=n.__data__;return fh(s)?r[typeof s=="string"?"string":"hash"]:r.map}function pi(n){for(var s=gn(n),r=s.length;r--;){var t=s[r],a=n[t];s[r]=[t,a,Vc(a)]}return s}function or(n,s){var r=vu(n,s);return tc(r)?r:i}function oh(n){var s=$e.call(n,tr),r=n[tr];try{n[tr]=i;var t=!0}catch{}var a=Nt.call(n);return t&&(s?n[tr]=r:delete n[tr]),a}var fi=Wa?function(n){return n==null?[]:(n=Ze(n),Fs(Wa(n),function(s){return Wl.call(n,s)}))}:Di,Oc=Wa?function(n){for(var s=[];n;)Os(s,fi(n)),n=wt(n);return s}:Di,wn=An;(qa&&wn(new qa(new ArrayBuffer(1)))!=jr||Wr&&wn(new Wr)!=nn||$a&&wn($a.resolve())!=Xi||Cr&&wn(new Cr)!=es||qr&&wn(new qr)!=Mr)&&(wn=function(n){var s=An(n),r=s==ys?n.constructor:i,t=r?dr(r):"";if(t)switch(t){case $u:return jr;case Gu:return nn;case Hu:return Xi;case Ku:return es;case Zu:return Mr}return s});function dh(n,s,r){for(var t=-1,a=r.length;++t<a;){var o=r[t],d=o.size;switch(o.type){case"drop":n+=d;break;case"dropRight":s-=d;break;case"take":s=yn(s,n+d);break;case"takeRight":n=jn(n,s-d);break}}return{start:n,end:s}}function uh(n){var s=n.match(jd);return s?s[1].split(gd):[]}function kc(n,s,r){s=Us(s,n);for(var t=-1,a=s.length,o=!1;++t<a;){var d=ms(s[t]);if(!(o=n!=null&&r(n,d)))break;n=n[d]}return o||++t!=a?o:(a=n==null?0:n.length,!!a&&Yt(a)&&Ts(d,a)&&(Ae(n)||ur(n)))}function mh(n){var s=n.length,r=new n.constructor(s);return s&&typeof n[0]=="string"&&$e.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Mc(n){return typeof n.constructor=="function"&&!Xr(n)?_r(wt(n)):{}}function hh(n,s,r){var t=n.constructor;switch(s){case Vr:return oi(n);case ee:case Ke:return new t(+n);case jr:return Ym(n,r);case pa:case fa:case ja:case ga:case va:case Na:case ba:case ya:case wa:return bc(n,r);case nn:return new t;case bs:case kr:return new t(n);case Or:return Qm(n);case es:return new t;case dt:return Jm(n)}}function xh(n,s){var r=s.length;if(!r)return n;var t=r-1;return s[t]=(r>1?"& ":"")+s[t],s=s.join(r>2?", ":" "),n.replace(fd,`{
/* [wrapped with `+s+`] */
`)}function ph(n){return Ae(n)||ur(n)||!!(ql&&n&&n[ql])}function Ts(n,s){var r=typeof n;return s=s??se,!!s&&(r=="number"||r!="symbol"&&Ad.test(n))&&n>-1&&n%1==0&&n<s}function Tn(n,s,r){if(!rn(r))return!1;var t=typeof s;return(t=="number"?Pn(r)&&Ts(s,r.length):t=="string"&&s in r)?rs(r[s],n):!1}function ji(n,s){if(Ae(n))return!1;var r=typeof n;return r=="number"||r=="symbol"||r=="boolean"||n==null||Vn(n)?!0:md.test(n)||!ud.test(n)||s!=null&&n in Ze(s)}function fh(n){var s=typeof n;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?n!=="__proto__":n===null}function gi(n){var s=Ut(n),r=l[s];if(typeof r!="function"||!(s in Oe.prototype))return!1;if(n===r)return!0;var t=xi(r);return!!t&&n===t[0]}function jh(n){return!!Vl&&Vl in n}var gh=gt?Es:Li;function Xr(n){var s=n&&n.constructor,r=typeof s=="function"&&s.prototype||wr;return n===r}function Vc(n){return n===n&&!rn(n)}function Bc(n,s){return function(r){return r==null?!1:r[n]===s&&(s!==i||n in Ze(r))}}function vh(n){var s=Kt(n,function(t){return r.size===D&&r.clear(),t}),r=s.cache;return s}function Nh(n,s){var r=n[1],t=s[1],a=r|t,o=a<(f|$|H),d=t==H&&r==Y||t==H&&r==E&&n[7].length<=s[8]||t==(H|E)&&s[7].length<=s[8]&&r==Y;if(!(o||d))return n;t&f&&(n[2]=s[2],a|=r&f?0:le);var m=s[3];if(m){var x=n[3];n[3]=x?wc(x,m,s[4]):m,n[4]=x?ks(n[3],R):s[4]}return m=s[5],m&&(x=n[5],n[5]=x?Cc(x,m,s[6]):m,n[6]=x?ks(n[5],R):s[6]),m=s[7],m&&(n[7]=m),t&H&&(n[8]=n[8]==null?s[8]:yn(n[8],s[8])),n[9]==null&&(n[9]=s[9]),n[0]=s[0],n[1]=a,n}function bh(n){var s=[];if(n!=null)for(var r in Ze(n))s.push(r);return s}function yh(n){return Nt.call(n)}function Uc(n,s,r){return s=jn(s===i?n.length-1:s,0),function(){for(var t=arguments,a=-1,o=jn(t.length-s,0),d=g(o);++a<o;)d[a]=t[s+a];a=-1;for(var m=g(s+1);++a<s;)m[a]=t[a];return m[s]=r(d),On(n,this,m)}}function Wc(n,s){return s.length<2?n:cr(n,Yn(s,0,-1))}function wh(n,s){for(var r=n.length,t=yn(s.length,r),a=zn(n);t--;){var o=s[t];n[t]=Ts(o,r)?a[o]:i}return n}function vi(n,s){if(!(s==="constructor"&&typeof n[s]=="function")&&s!="__proto__")return n[s]}var qc=Gc(hc),et=ku||function(n,s){return Nn.setTimeout(n,s)},Ni=Gc(Gm);function $c(n,s,r){var t=s+"";return Ni(n,xh(t,Ch(uh(t),r)))}function Gc(n){var s=0,r=0;return function(){var t=Uu(),a=Ue-(t-r);if(r=t,a>0){if(++s>=fe)return arguments[0]}else s=0;return n.apply(i,arguments)}}function qt(n,s){var r=-1,t=n.length,a=t-1;for(s=s===i?t:s;++r<s;){var o=si(r,a),d=n[o];n[o]=n[r],n[r]=d}return n.length=s,n}var Hc=vh(function(n){var s=[];return n.charCodeAt(0)===46&&s.push(""),n.replace(hd,function(r,t,a,o){s.push(a?o.replace(bd,"$1"):t||r)}),s});function ms(n){if(typeof n=="string"||Vn(n))return n;var s=n+"";return s=="0"&&1/n==-1/0?"-0":s}function dr(n){if(n!=null){try{return vt.call(n)}catch{}try{return n+""}catch{}}return""}function Ch(n,s){return Gn(de,function(r){var t="_."+r[0];s&r[1]&&!xt(n,t)&&n.push(t)}),n.sort()}function Kc(n){if(n instanceof Oe)return n.clone();var s=new Kn(n.__wrapped__,n.__chain__);return s.__actions__=zn(n.__actions__),s.__index__=n.__index__,s.__values__=n.__values__,s}function Sh(n,s,r){(r?Tn(n,s,r):s===i)?s=1:s=jn(Te(s),0);var t=n==null?0:n.length;if(!t||s<1)return[];for(var a=0,o=0,d=g(_t(t/s));a<t;)d[o++]=Yn(n,a,a+=s);return d}function _h(n){for(var s=-1,r=n==null?0:n.length,t=0,a=[];++s<r;){var o=n[s];o&&(a[t++]=o)}return a}function Ah(){var n=arguments.length;if(!n)return[];for(var s=g(n-1),r=arguments[0],t=n;t--;)s[t-1]=arguments[t];return Os(Ae(r)?zn(r):[r],bn(s,1))}var Th=ze(function(n,s){return dn(n)?Kr(n,bn(s,1,dn,!0)):[]}),Eh=ze(function(n,s){var r=Qn(s);return dn(r)&&(r=i),dn(n)?Kr(n,bn(s,1,dn,!0),ge(r,2)):[]}),Ih=ze(function(n,s){var r=Qn(s);return dn(r)&&(r=i),dn(n)?Kr(n,bn(s,1,dn,!0),i,r):[]});function zh(n,s,r){var t=n==null?0:n.length;return t?(s=r||s===i?1:Te(s),Yn(n,s<0?0:s,t)):[]}function Ph(n,s,r){var t=n==null?0:n.length;return t?(s=r||s===i?1:Te(s),s=t-s,Yn(n,0,s<0?0:s)):[]}function Rh(n,s){return n&&n.length?Ft(n,ge(s,3),!0,!0):[]}function Dh(n,s){return n&&n.length?Ft(n,ge(s,3),!0):[]}function Lh(n,s,r,t){var a=n==null?0:n.length;return a?(r&&typeof r!="number"&&Tn(n,s,r)&&(r=0,t=a),Am(n,s,r,t)):[]}function Zc(n,s,r){var t=n==null?0:n.length;if(!t)return-1;var a=r==null?0:Te(r);return a<0&&(a=jn(t+a,0)),pt(n,ge(s,3),a)}function Yc(n,s,r){var t=n==null?0:n.length;if(!t)return-1;var a=t-1;return r!==i&&(a=Te(r),a=r<0?jn(t+a,0):yn(a,t-1)),pt(n,ge(s,3),a,!0)}function Qc(n){var s=n==null?0:n.length;return s?bn(n,1):[]}function Fh(n){var s=n==null?0:n.length;return s?bn(n,ie):[]}function Oh(n,s){var r=n==null?0:n.length;return r?(s=s===i?1:Te(s),bn(n,s)):[]}function kh(n){for(var s=-1,r=n==null?0:n.length,t={};++s<r;){var a=n[s];t[a[0]]=a[1]}return t}function Jc(n){return n&&n.length?n[0]:i}function Mh(n,s,r){var t=n==null?0:n.length;if(!t)return-1;var a=r==null?0:Te(r);return a<0&&(a=jn(t+a,0)),vr(n,s,a)}function Vh(n){var s=n==null?0:n.length;return s?Yn(n,0,-1):[]}var Bh=ze(function(n){var s=sn(n,li);return s.length&&s[0]===n[0]?Qa(s):[]}),Uh=ze(function(n){var s=Qn(n),r=sn(n,li);return s===Qn(r)?s=i:r.pop(),r.length&&r[0]===n[0]?Qa(r,ge(s,2)):[]}),Wh=ze(function(n){var s=Qn(n),r=sn(n,li);return s=typeof s=="function"?s:i,s&&r.pop(),r.length&&r[0]===n[0]?Qa(r,i,s):[]});function qh(n,s){return n==null?"":Vu.call(n,s)}function Qn(n){var s=n==null?0:n.length;return s?n[s-1]:i}function $h(n,s,r){var t=n==null?0:n.length;if(!t)return-1;var a=t;return r!==i&&(a=Te(r),a=a<0?jn(t+a,0):yn(a,t-1)),s===s?Cu(n,s,a):pt(n,Pl,a,!0)}function Gh(n,s){return n&&n.length?oc(n,Te(s)):i}var Hh=ze(Xc);function Xc(n,s){return n&&n.length&&s&&s.length?ni(n,s):n}function Kh(n,s,r){return n&&n.length&&s&&s.length?ni(n,s,ge(r,2)):n}function Zh(n,s,r){return n&&n.length&&s&&s.length?ni(n,s,i,r):n}var Yh=As(function(n,s){var r=n==null?0:n.length,t=Ha(n,s);return mc(n,sn(s,function(a){return Ts(a,r)?+a:a}).sort(yc)),t});function Qh(n,s){var r=[];if(!(n&&n.length))return r;var t=-1,a=[],o=n.length;for(s=ge(s,3);++t<o;){var d=n[t];s(d,t,n)&&(r.push(d),a.push(t))}return mc(n,a),r}function bi(n){return n==null?n:qu.call(n)}function Jh(n,s,r){var t=n==null?0:n.length;return t?(r&&typeof r!="number"&&Tn(n,s,r)?(s=0,r=t):(s=s==null?0:Te(s),r=r===i?t:Te(r)),Yn(n,s,r)):[]}function Xh(n,s){return Lt(n,s)}function ex(n,s,r){return ti(n,s,ge(r,2))}function nx(n,s){var r=n==null?0:n.length;if(r){var t=Lt(n,s);if(t<r&&rs(n[t],s))return t}return-1}function sx(n,s){return Lt(n,s,!0)}function rx(n,s,r){return ti(n,s,ge(r,2),!0)}function tx(n,s){var r=n==null?0:n.length;if(r){var t=Lt(n,s,!0)-1;if(rs(n[t],s))return t}return-1}function ax(n){return n&&n.length?xc(n):[]}function ix(n,s){return n&&n.length?xc(n,ge(s,2)):[]}function lx(n){var s=n==null?0:n.length;return s?Yn(n,1,s):[]}function cx(n,s,r){return n&&n.length?(s=r||s===i?1:Te(s),Yn(n,0,s<0?0:s)):[]}function ox(n,s,r){var t=n==null?0:n.length;return t?(s=r||s===i?1:Te(s),s=t-s,Yn(n,s<0?0:s,t)):[]}function dx(n,s){return n&&n.length?Ft(n,ge(s,3),!1,!0):[]}function ux(n,s){return n&&n.length?Ft(n,ge(s,3)):[]}var mx=ze(function(n){return Bs(bn(n,1,dn,!0))}),hx=ze(function(n){var s=Qn(n);return dn(s)&&(s=i),Bs(bn(n,1,dn,!0),ge(s,2))}),xx=ze(function(n){var s=Qn(n);return s=typeof s=="function"?s:i,Bs(bn(n,1,dn,!0),i,s)});function px(n){return n&&n.length?Bs(n):[]}function fx(n,s){return n&&n.length?Bs(n,ge(s,2)):[]}function jx(n,s){return s=typeof s=="function"?s:i,n&&n.length?Bs(n,i,s):[]}function yi(n){if(!(n&&n.length))return[];var s=0;return n=Fs(n,function(r){if(dn(r))return s=jn(r.length,s),!0}),Ma(s,function(r){return sn(n,Fa(r))})}function eo(n,s){if(!(n&&n.length))return[];var r=yi(n);return s==null?r:sn(r,function(t){return On(s,i,t)})}var gx=ze(function(n,s){return dn(n)?Kr(n,s):[]}),vx=ze(function(n){return ii(Fs(n,dn))}),Nx=ze(function(n){var s=Qn(n);return dn(s)&&(s=i),ii(Fs(n,dn),ge(s,2))}),bx=ze(function(n){var s=Qn(n);return s=typeof s=="function"?s:i,ii(Fs(n,dn),i,s)}),yx=ze(yi);function wx(n,s){return gc(n||[],s||[],Hr)}function Cx(n,s){return gc(n||[],s||[],Qr)}var Sx=ze(function(n){var s=n.length,r=s>1?n[s-1]:i;return r=typeof r=="function"?(n.pop(),r):i,eo(n,r)});function no(n){var s=l(n);return s.__chain__=!0,s}function _x(n,s){return s(n),n}function $t(n,s){return s(n)}var Ax=As(function(n){var s=n.length,r=s?n[0]:0,t=this.__wrapped__,a=function(o){return Ha(o,n)};return s>1||this.__actions__.length||!(t instanceof Oe)||!Ts(r)?this.thru(a):(t=t.slice(r,+r+(s?1:0)),t.__actions__.push({func:$t,args:[a],thisArg:i}),new Kn(t,this.__chain__).thru(function(o){return s&&!o.length&&o.push(i),o}))});function Tx(){return no(this)}function Ex(){return new Kn(this.value(),this.__chain__)}function Ix(){this.__values__===i&&(this.__values__=fo(this.value()));var n=this.__index__>=this.__values__.length,s=n?i:this.__values__[this.__index__++];return{done:n,value:s}}function zx(){return this}function Px(n){for(var s,r=this;r instanceof It;){var t=Kc(r);t.__index__=0,t.__values__=i,s?a.__wrapped__=t:s=t;var a=t;r=r.__wrapped__}return a.__wrapped__=n,s}function Rx(){var n=this.__wrapped__;if(n instanceof Oe){var s=n;return this.__actions__.length&&(s=new Oe(this)),s=s.reverse(),s.__actions__.push({func:$t,args:[bi],thisArg:i}),new Kn(s,this.__chain__)}return this.thru(bi)}function Dx(){return jc(this.__wrapped__,this.__actions__)}var Lx=Ot(function(n,s,r){$e.call(n,r)?++n[r]:Ss(n,r,1)});function Fx(n,s,r){var t=Ae(n)?Il:_m;return r&&Tn(n,s,r)&&(s=i),t(n,ge(s,3))}function Ox(n,s){var r=Ae(n)?Fs:ec;return r(n,ge(s,3))}var kx=Tc(Zc),Mx=Tc(Yc);function Vx(n,s){return bn(Gt(n,s),1)}function Bx(n,s){return bn(Gt(n,s),ie)}function Ux(n,s,r){return r=r===i?1:Te(r),bn(Gt(n,s),r)}function so(n,s){var r=Ae(n)?Gn:Vs;return r(n,ge(s,3))}function ro(n,s){var r=Ae(n)?lu:Xl;return r(n,ge(s,3))}var Wx=Ot(function(n,s,r){$e.call(n,r)?n[r].push(s):Ss(n,r,[s])});function qx(n,s,r,t){n=Pn(n)?n:zr(n),r=r&&!t?Te(r):0;var a=n.length;return r<0&&(r=jn(a+r,0)),Qt(n)?r<=a&&n.indexOf(s,r)>-1:!!a&&vr(n,s,r)>-1}var $x=ze(function(n,s,r){var t=-1,a=typeof s=="function",o=Pn(n)?g(n.length):[];return Vs(n,function(d){o[++t]=a?On(s,d,r):Zr(d,s,r)}),o}),Gx=Ot(function(n,s,r){Ss(n,r,s)});function Gt(n,s){var r=Ae(n)?sn:ic;return r(n,ge(s,3))}function Hx(n,s,r,t){return n==null?[]:(Ae(s)||(s=s==null?[]:[s]),r=t?i:r,Ae(r)||(r=r==null?[]:[r]),dc(n,s,r))}var Kx=Ot(function(n,s,r){n[r?0:1].push(s)},function(){return[[],[]]});function Zx(n,s,r){var t=Ae(n)?Da:Dl,a=arguments.length<3;return t(n,ge(s,4),r,a,Vs)}function Yx(n,s,r){var t=Ae(n)?cu:Dl,a=arguments.length<3;return t(n,ge(s,4),r,a,Xl)}function Qx(n,s){var r=Ae(n)?Fs:ec;return r(n,Zt(ge(s,3)))}function Jx(n){var s=Ae(n)?Zl:qm;return s(n)}function Xx(n,s,r){(r?Tn(n,s,r):s===i)?s=1:s=Te(s);var t=Ae(n)?bm:$m;return t(n,s)}function ep(n){var s=Ae(n)?ym:Hm;return s(n)}function np(n){if(n==null)return 0;if(Pn(n))return Qt(n)?br(n):n.length;var s=wn(n);return s==nn||s==es?n.size:Xa(n).length}function sp(n,s,r){var t=Ae(n)?La:Km;return r&&Tn(n,s,r)&&(s=i),t(n,ge(s,3))}var rp=ze(function(n,s){if(n==null)return[];var r=s.length;return r>1&&Tn(n,s[0],s[1])?s=[]:r>2&&Tn(s[0],s[1],s[2])&&(s=[s[0]]),dc(n,bn(s,1),[])}),Ht=Ou||function(){return Nn.Date.now()};function tp(n,s){if(typeof s!="function")throw new Hn(O);return n=Te(n),function(){if(--n<1)return s.apply(this,arguments)}}function to(n,s,r){return s=r?i:s,s=n&&s==null?n.length:s,_s(n,H,i,i,i,i,s)}function ao(n,s){var r;if(typeof s!="function")throw new Hn(O);return n=Te(n),function(){return--n>0&&(r=s.apply(this,arguments)),n<=1&&(s=i),r}}var wi=ze(function(n,s,r){var t=f;if(r.length){var a=ks(r,Er(wi));t|=me}return _s(n,t,s,r,a)}),io=ze(function(n,s,r){var t=f|$;if(r.length){var a=ks(r,Er(io));t|=me}return _s(s,t,n,r,a)});function lo(n,s,r){s=r?i:s;var t=_s(n,Y,i,i,i,i,i,s);return t.placeholder=lo.placeholder,t}function co(n,s,r){s=r?i:s;var t=_s(n,N,i,i,i,i,i,s);return t.placeholder=co.placeholder,t}function oo(n,s,r){var t,a,o,d,m,x,I=0,z=!1,L=!1,X=!0;if(typeof n!="function")throw new Hn(O);s=Jn(s)||0,rn(r)&&(z=!!r.leading,L="maxWait"in r,o=L?jn(Jn(r.maxWait)||0,s):o,X="trailing"in r?!!r.trailing:X);function ce(un){var ts=t,zs=a;return t=a=i,I=un,d=n.apply(zs,ts),d}function ve(un){return I=un,m=et(Fe,s),z?ce(un):d}function Ee(un){var ts=un-x,zs=un-I,Eo=s-ts;return L?yn(Eo,o-zs):Eo}function Ne(un){var ts=un-x,zs=un-I;return x===i||ts>=s||ts<0||L&&zs>=o}function Fe(){var un=Ht();if(Ne(un))return Me(un);m=et(Fe,Ee(un))}function Me(un){return m=i,X&&t?ce(un):(t=a=i,d)}function Bn(){m!==i&&vc(m),I=0,t=x=a=m=i}function En(){return m===i?d:Me(Ht())}function Un(){var un=Ht(),ts=Ne(un);if(t=arguments,a=this,x=un,ts){if(m===i)return ve(x);if(L)return vc(m),m=et(Fe,s),ce(x)}return m===i&&(m=et(Fe,s)),d}return Un.cancel=Bn,Un.flush=En,Un}var ap=ze(function(n,s){return Jl(n,1,s)}),ip=ze(function(n,s,r){return Jl(n,Jn(s)||0,r)});function lp(n){return _s(n,P)}function Kt(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new Hn(O);var r=function(){var t=arguments,a=s?s.apply(this,t):t[0],o=r.cache;if(o.has(a))return o.get(a);var d=n.apply(this,t);return r.cache=o.set(a,d)||o,d};return r.cache=new(Kt.Cache||Cs),r}Kt.Cache=Cs;function Zt(n){if(typeof n!="function")throw new Hn(O);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}function cp(n){return ao(2,n)}var op=Zm(function(n,s){s=s.length==1&&Ae(s[0])?sn(s[0],kn(ge())):sn(bn(s,1),kn(ge()));var r=s.length;return ze(function(t){for(var a=-1,o=yn(t.length,r);++a<o;)t[a]=s[a].call(this,t[a]);return On(n,this,t)})}),Ci=ze(function(n,s){var r=ks(s,Er(Ci));return _s(n,me,i,s,r)}),uo=ze(function(n,s){var r=ks(s,Er(uo));return _s(n,T,i,s,r)}),dp=As(function(n,s){return _s(n,E,i,i,i,s)});function up(n,s){if(typeof n!="function")throw new Hn(O);return s=s===i?s:Te(s),ze(n,s)}function mp(n,s){if(typeof n!="function")throw new Hn(O);return s=s==null?0:jn(Te(s),0),ze(function(r){var t=r[s],a=Ws(r,0,s);return t&&Os(a,t),On(n,this,a)})}function hp(n,s,r){var t=!0,a=!0;if(typeof n!="function")throw new Hn(O);return rn(r)&&(t="leading"in r?!!r.leading:t,a="trailing"in r?!!r.trailing:a),oo(n,s,{leading:t,maxWait:s,trailing:a})}function xp(n){return to(n,1)}function pp(n,s){return Ci(ci(s),n)}function fp(){if(!arguments.length)return[];var n=arguments[0];return Ae(n)?n:[n]}function jp(n){return Zn(n,K)}function gp(n,s){return s=typeof s=="function"?s:i,Zn(n,K,s)}function vp(n){return Zn(n,U|K)}function Np(n,s){return s=typeof s=="function"?s:i,Zn(n,U|K,s)}function bp(n,s){return s==null||Ql(n,s,gn(s))}function rs(n,s){return n===s||n!==n&&s!==s}var yp=Bt(Ya),wp=Bt(function(n,s){return n>=s}),ur=rc(function(){return arguments}())?rc:function(n){return an(n)&&$e.call(n,"callee")&&!Wl.call(n,"callee")},Ae=g.isArray,Cp=Cl?kn(Cl):Pm;function Pn(n){return n!=null&&Yt(n.length)&&!Es(n)}function dn(n){return an(n)&&Pn(n)}function Sp(n){return n===!0||n===!1||an(n)&&An(n)==ee}var qs=Mu||Li,_p=Sl?kn(Sl):Rm;function Ap(n){return an(n)&&n.nodeType===1&&!nt(n)}function Tp(n){if(n==null)return!0;if(Pn(n)&&(Ae(n)||typeof n=="string"||typeof n.splice=="function"||qs(n)||Ir(n)||ur(n)))return!n.length;var s=wn(n);if(s==nn||s==es)return!n.size;if(Xr(n))return!Xa(n).length;for(var r in n)if($e.call(n,r))return!1;return!0}function Ep(n,s){return Yr(n,s)}function Ip(n,s,r){r=typeof r=="function"?r:i;var t=r?r(n,s):i;return t===i?Yr(n,s,i,r):!!t}function Si(n){if(!an(n))return!1;var s=An(n);return s==nr||s==fr||typeof n.message=="string"&&typeof n.name=="string"&&!nt(n)}function zp(n){return typeof n=="number"&&$l(n)}function Es(n){if(!rn(n))return!1;var s=An(n);return s==sr||s==je||s==he||s==nd}function mo(n){return typeof n=="number"&&n==Te(n)}function Yt(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=se}function rn(n){var s=typeof n;return n!=null&&(s=="object"||s=="function")}function an(n){return n!=null&&typeof n=="object"}var ho=_l?kn(_l):Lm;function Pp(n,s){return n===s||Ja(n,s,pi(s))}function Rp(n,s,r){return r=typeof r=="function"?r:i,Ja(n,s,pi(s),r)}function Dp(n){return xo(n)&&n!=+n}function Lp(n){if(gh(n))throw new Ce(ae);return tc(n)}function Fp(n){return n===null}function Op(n){return n==null}function xo(n){return typeof n=="number"||an(n)&&An(n)==bs}function nt(n){if(!an(n)||An(n)!=ys)return!1;var s=wt(n);if(s===null)return!0;var r=$e.call(s,"constructor")&&s.constructor;return typeof r=="function"&&r instanceof r&&vt.call(r)==Ru}var _i=Al?kn(Al):Fm;function kp(n){return mo(n)&&n>=-9007199254740991&&n<=se}var po=Tl?kn(Tl):Om;function Qt(n){return typeof n=="string"||!Ae(n)&&an(n)&&An(n)==kr}function Vn(n){return typeof n=="symbol"||an(n)&&An(n)==dt}var Ir=El?kn(El):km;function Mp(n){return n===i}function Vp(n){return an(n)&&wn(n)==Mr}function Bp(n){return an(n)&&An(n)==rd}var Up=Bt(ei),Wp=Bt(function(n,s){return n<=s});function fo(n){if(!n)return[];if(Pn(n))return Qt(n)?ns(n):zn(n);if(Ur&&n[Ur])return bu(n[Ur]());var s=wn(n),r=s==nn?Ba:s==es?ft:zr;return r(n)}function Is(n){if(!n)return n===0?n:0;if(n=Jn(n),n===ie||n===-1/0){var s=n<0?-1:1;return s*Ye}return n===n?n:0}function Te(n){var s=Is(n),r=s%1;return s===s?r?s-r:s:0}function jo(n){return n?lr(Te(n),0,He):0}function Jn(n){if(typeof n=="number")return n;if(Vn(n))return ke;if(rn(n)){var s=typeof n.valueOf=="function"?n.valueOf():n;n=rn(s)?s+"":s}if(typeof n!="string")return n===0?n:+n;n=Ll(n);var r=Cd.test(n);return r||_d.test(n)?tu(n.slice(2),r?2:8):wd.test(n)?ke:+n}function go(n){return us(n,Rn(n))}function qp(n){return n?lr(Te(n),-9007199254740991,se):n===0?n:0}function We(n){return n==null?"":Mn(n)}var $p=Ar(function(n,s){if(Xr(s)||Pn(s)){us(s,gn(s),n);return}for(var r in s)$e.call(s,r)&&Hr(n,r,s[r])}),vo=Ar(function(n,s){us(s,Rn(s),n)}),Jt=Ar(function(n,s,r,t){us(s,Rn(s),n,t)}),Gp=Ar(function(n,s,r,t){us(s,gn(s),n,t)}),Hp=As(Ha);function Kp(n,s){var r=_r(n);return s==null?r:Yl(r,s)}var Zp=ze(function(n,s){n=Ze(n);var r=-1,t=s.length,a=t>2?s[2]:i;for(a&&Tn(s[0],s[1],a)&&(t=1);++r<t;)for(var o=s[r],d=Rn(o),m=-1,x=d.length;++m<x;){var I=d[m],z=n[I];(z===i||rs(z,wr[I])&&!$e.call(n,I))&&(n[I]=o[I])}return n}),Yp=ze(function(n){return n.push(i,Lc),On(No,i,n)});function Qp(n,s){return zl(n,ge(s,3),ds)}function Jp(n,s){return zl(n,ge(s,3),Za)}function Xp(n,s){return n==null?n:Ka(n,ge(s,3),Rn)}function ef(n,s){return n==null?n:nc(n,ge(s,3),Rn)}function nf(n,s){return n&&ds(n,ge(s,3))}function sf(n,s){return n&&Za(n,ge(s,3))}function rf(n){return n==null?[]:Rt(n,gn(n))}function tf(n){return n==null?[]:Rt(n,Rn(n))}function Ai(n,s,r){var t=n==null?i:cr(n,s);return t===i?r:t}function af(n,s){return n!=null&&kc(n,s,Tm)}function Ti(n,s){return n!=null&&kc(n,s,Em)}var lf=Ic(function(n,s,r){s!=null&&typeof s.toString!="function"&&(s=Nt.call(s)),n[s]=r},Ii(Dn)),cf=Ic(function(n,s,r){s!=null&&typeof s.toString!="function"&&(s=Nt.call(s)),$e.call(n,s)?n[s].push(r):n[s]=[r]},ge),of=ze(Zr);function gn(n){return Pn(n)?Kl(n):Xa(n)}function Rn(n){return Pn(n)?Kl(n,!0):Mm(n)}function df(n,s){var r={};return s=ge(s,3),ds(n,function(t,a,o){Ss(r,s(t,a,o),t)}),r}function uf(n,s){var r={};return s=ge(s,3),ds(n,function(t,a,o){Ss(r,a,s(t,a,o))}),r}var mf=Ar(function(n,s,r){Dt(n,s,r)}),No=Ar(function(n,s,r,t){Dt(n,s,r,t)}),hf=As(function(n,s){var r={};if(n==null)return r;var t=!1;s=sn(s,function(o){return o=Us(o,n),t||(t=o.length>1),o}),us(n,hi(n),r),t&&(r=Zn(r,U|v|K,ih));for(var a=s.length;a--;)ai(r,s[a]);return r});function xf(n,s){return bo(n,Zt(ge(s)))}var pf=As(function(n,s){return n==null?{}:Bm(n,s)});function bo(n,s){if(n==null)return{};var r=sn(hi(n),function(t){return[t]});return s=ge(s),uc(n,r,function(t,a){return s(t,a[0])})}function ff(n,s,r){s=Us(s,n);var t=-1,a=s.length;for(a||(a=1,n=i);++t<a;){var o=n==null?i:n[ms(s[t])];o===i&&(t=a,o=r),n=Es(o)?o.call(n):o}return n}function jf(n,s,r){return n==null?n:Qr(n,s,r)}function gf(n,s,r,t){return t=typeof t=="function"?t:i,n==null?n:Qr(n,s,r,t)}var yo=Rc(gn),wo=Rc(Rn);function vf(n,s,r){var t=Ae(n),a=t||qs(n)||Ir(n);if(s=ge(s,4),r==null){var o=n&&n.constructor;a?r=t?new o:[]:rn(n)?r=Es(o)?_r(wt(n)):{}:r={}}return(a?Gn:ds)(n,function(d,m,x){return s(r,d,m,x)}),r}function Nf(n,s){return n==null?!0:ai(n,s)}function bf(n,s,r){return n==null?n:fc(n,s,ci(r))}function yf(n,s,r,t){return t=typeof t=="function"?t:i,n==null?n:fc(n,s,ci(r),t)}function zr(n){return n==null?[]:Va(n,gn(n))}function wf(n){return n==null?[]:Va(n,Rn(n))}function Cf(n,s,r){return r===i&&(r=s,s=i),r!==i&&(r=Jn(r),r=r===r?r:0),s!==i&&(s=Jn(s),s=s===s?s:0),lr(Jn(n),s,r)}function Sf(n,s,r){return s=Is(s),r===i?(r=s,s=0):r=Is(r),n=Jn(n),Im(n,s,r)}function _f(n,s,r){if(r&&typeof r!="boolean"&&Tn(n,s,r)&&(s=r=i),r===i&&(typeof s=="boolean"?(r=s,s=i):typeof n=="boolean"&&(r=n,n=i)),n===i&&s===i?(n=0,s=1):(n=Is(n),s===i?(s=n,n=0):s=Is(s)),n>s){var t=n;n=s,s=t}if(r||n%1||s%1){var a=Gl();return yn(n+a*(s-n+ru("1e-"+((a+"").length-1))),s)}return si(n,s)}var Af=Tr(function(n,s,r){return s=s.toLowerCase(),n+(r?Co(s):s)});function Co(n){return Ei(We(n).toLowerCase())}function So(n){return n=We(n),n&&n.replace(Td,fu).replace(Hd,"")}function Tf(n,s,r){n=We(n),s=Mn(s);var t=n.length;r=r===i?t:lr(Te(r),0,t);var a=r;return r-=s.length,r>=0&&n.slice(r,a)==s}function Ef(n){return n=We(n),n&&cd.test(n)?n.replace(nl,ju):n}function If(n){return n=We(n),n&&xd.test(n)?n.replace(Ca,"\\$&"):n}var zf=Tr(function(n,s,r){return n+(r?"-":"")+s.toLowerCase()}),Pf=Tr(function(n,s,r){return n+(r?" ":"")+s.toLowerCase()}),Rf=Ac("toLowerCase");function Df(n,s,r){n=We(n),s=Te(s);var t=s?br(n):0;if(!s||t>=s)return n;var a=(s-t)/2;return Vt(At(a),r)+n+Vt(_t(a),r)}function Lf(n,s,r){n=We(n),s=Te(s);var t=s?br(n):0;return s&&t<s?n+Vt(s-t,r):n}function Ff(n,s,r){n=We(n),s=Te(s);var t=s?br(n):0;return s&&t<s?Vt(s-t,r)+n:n}function Of(n,s,r){return r||s==null?s=0:s&&(s=+s),Wu(We(n).replace(Sa,""),s||0)}function kf(n,s,r){return(r?Tn(n,s,r):s===i)?s=1:s=Te(s),ri(We(n),s)}function Mf(){var n=arguments,s=We(n[0]);return n.length<3?s:s.replace(n[1],n[2])}var Vf=Tr(function(n,s,r){return n+(r?"_":"")+s.toLowerCase()});function Bf(n,s,r){return r&&typeof r!="number"&&Tn(n,s,r)&&(s=r=i),r=r===i?He:r>>>0,r?(n=We(n),n&&(typeof s=="string"||s!=null&&!_i(s))&&(s=Mn(s),!s&&Nr(n))?Ws(ns(n),0,r):n.split(s,r)):[]}var Uf=Tr(function(n,s,r){return n+(r?" ":"")+Ei(s)});function Wf(n,s,r){return n=We(n),r=r==null?0:lr(Te(r),0,n.length),s=Mn(s),n.slice(r,r+s.length)==s}function qf(n,s,r){var t=l.templateSettings;r&&Tn(n,s,r)&&(s=i),n=We(n),s=Jt({},s,t,Dc);var a=Jt({},s.imports,t.imports,Dc),o=gn(a),d=Va(a,o),m,x,I=0,z=s.interpolate||ut,L="__p += '",X=Ua((s.escape||ut).source+"|"+z.source+"|"+(z===sl?yd:ut).source+"|"+(s.evaluate||ut).source+"|$","g"),ce="//# sourceURL="+($e.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jd+"]")+`
`;n.replace(X,function(Ne,Fe,Me,Bn,En,Un){return Me||(Me=Bn),L+=n.slice(I,Un).replace(Ed,gu),Fe&&(m=!0,L+=`' +
__e(`+Fe+`) +
'`),En&&(x=!0,L+=`';
`+En+`;
__p += '`),Me&&(L+=`' +
((__t = (`+Me+`)) == null ? '' : __t) +
'`),I=Un+Ne.length,Ne}),L+=`';
`;var ve=$e.call(s,"variable")&&s.variable;if(!ve)L=`with (obj) {
`+L+`
}
`;else if(Nd.test(ve))throw new Ce(J);L=(x?L.replace(td,""):L).replace(ad,"$1").replace(id,"$1;"),L="function("+(ve||"obj")+`) {
`+(ve?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(m?", __e = _.escape":"")+(x?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+L+`return __p
}`;var Ee=Ao(function(){return Ve(o,ce+"return "+L).apply(i,d)});if(Ee.source=L,Si(Ee))throw Ee;return Ee}function $f(n){return We(n).toLowerCase()}function Gf(n){return We(n).toUpperCase()}function Hf(n,s,r){if(n=We(n),n&&(r||s===i))return Ll(n);if(!n||!(s=Mn(s)))return n;var t=ns(n),a=ns(s),o=Fl(t,a),d=Ol(t,a)+1;return Ws(t,o,d).join("")}function Kf(n,s,r){if(n=We(n),n&&(r||s===i))return n.slice(0,Ml(n)+1);if(!n||!(s=Mn(s)))return n;var t=ns(n),a=Ol(t,ns(s))+1;return Ws(t,0,a).join("")}function Zf(n,s,r){if(n=We(n),n&&(r||s===i))return n.replace(Sa,"");if(!n||!(s=Mn(s)))return n;var t=ns(n),a=Fl(t,ns(s));return Ws(t,a).join("")}function Yf(n,s){var r=we,t=j;if(rn(s)){var a="separator"in s?s.separator:a;r="length"in s?Te(s.length):r,t="omission"in s?Mn(s.omission):t}n=We(n);var o=n.length;if(Nr(n)){var d=ns(n);o=d.length}if(r>=o)return n;var m=r-br(t);if(m<1)return t;var x=d?Ws(d,0,m).join(""):n.slice(0,m);if(a===i)return x+t;if(d&&(m+=x.length-m),_i(a)){if(n.slice(m).search(a)){var I,z=x;for(a.global||(a=Ua(a.source,We(rl.exec(a))+"g")),a.lastIndex=0;I=a.exec(z);)var L=I.index;x=x.slice(0,L===i?m:L)}}else if(n.indexOf(Mn(a),m)!=m){var X=x.lastIndexOf(a);X>-1&&(x=x.slice(0,X))}return x+t}function Qf(n){return n=We(n),n&&ld.test(n)?n.replace(el,Su):n}var Jf=Tr(function(n,s,r){return n+(r?" ":"")+s.toUpperCase()}),Ei=Ac("toUpperCase");function _o(n,s,r){return n=We(n),s=r?i:s,s===i?Nu(n)?Tu(n):uu(n):n.match(s)||[]}var Ao=ze(function(n,s){try{return On(n,i,s)}catch(r){return Si(r)?r:new Ce(r)}}),Xf=As(function(n,s){return Gn(s,function(r){r=ms(r),Ss(n,r,wi(n[r],n))}),n});function ej(n){var s=n==null?0:n.length,r=ge();return n=s?sn(n,function(t){if(typeof t[1]!="function")throw new Hn(O);return[r(t[0]),t[1]]}):[],ze(function(t){for(var a=-1;++a<s;){var o=n[a];if(On(o[0],this,t))return On(o[1],this,t)}})}function nj(n){return Sm(Zn(n,U))}function Ii(n){return function(){return n}}function sj(n,s){return n==null||n!==n?s:n}var rj=Ec(),tj=Ec(!0);function Dn(n){return n}function zi(n){return ac(typeof n=="function"?n:Zn(n,U))}function aj(n){return lc(Zn(n,U))}function ij(n,s){return cc(n,Zn(s,U))}var lj=ze(function(n,s){return function(r){return Zr(r,n,s)}}),cj=ze(function(n,s){return function(r){return Zr(n,r,s)}});function Pi(n,s,r){var t=gn(s),a=Rt(s,t);r==null&&!(rn(s)&&(a.length||!t.length))&&(r=s,s=n,n=this,a=Rt(s,gn(s)));var o=!(rn(r)&&"chain"in r)||!!r.chain,d=Es(n);return Gn(a,function(m){var x=s[m];n[m]=x,d&&(n.prototype[m]=function(){var I=this.__chain__;if(o||I){var z=n(this.__wrapped__),L=z.__actions__=zn(this.__actions__);return L.push({func:x,args:arguments,thisArg:n}),z.__chain__=I,z}return x.apply(n,Os([this.value()],arguments))})}),n}function oj(){return Nn._===this&&(Nn._=Du),this}function Ri(){}function dj(n){return n=Te(n),ze(function(s){return oc(s,n)})}var uj=di(sn),mj=di(Il),hj=di(La);function To(n){return ji(n)?Fa(ms(n)):Um(n)}function xj(n){return function(s){return n==null?i:cr(n,s)}}var pj=zc(),fj=zc(!0);function Di(){return[]}function Li(){return!1}function jj(){return{}}function gj(){return""}function vj(){return!0}function Nj(n,s){if(n=Te(n),n<1||n>se)return[];var r=He,t=yn(n,He);s=ge(s),n-=He;for(var a=Ma(t,s);++r<n;)s(r);return a}function bj(n){return Ae(n)?sn(n,ms):Vn(n)?[n]:zn(Hc(We(n)))}function yj(n){var s=++Pu;return We(n)+s}var wj=Mt(function(n,s){return n+s},0),Cj=ui("ceil"),Sj=Mt(function(n,s){return n/s},1),_j=ui("floor");function Aj(n){return n&&n.length?Pt(n,Dn,Ya):i}function Tj(n,s){return n&&n.length?Pt(n,ge(s,2),Ya):i}function Ej(n){return Rl(n,Dn)}function Ij(n,s){return Rl(n,ge(s,2))}function zj(n){return n&&n.length?Pt(n,Dn,ei):i}function Pj(n,s){return n&&n.length?Pt(n,ge(s,2),ei):i}var Rj=Mt(function(n,s){return n*s},1),Dj=ui("round"),Lj=Mt(function(n,s){return n-s},0);function Fj(n){return n&&n.length?ka(n,Dn):0}function Oj(n,s){return n&&n.length?ka(n,ge(s,2)):0}return l.after=tp,l.ary=to,l.assign=$p,l.assignIn=vo,l.assignInWith=Jt,l.assignWith=Gp,l.at=Hp,l.before=ao,l.bind=wi,l.bindAll=Xf,l.bindKey=io,l.castArray=fp,l.chain=no,l.chunk=Sh,l.compact=_h,l.concat=Ah,l.cond=ej,l.conforms=nj,l.constant=Ii,l.countBy=Lx,l.create=Kp,l.curry=lo,l.curryRight=co,l.debounce=oo,l.defaults=Zp,l.defaultsDeep=Yp,l.defer=ap,l.delay=ip,l.difference=Th,l.differenceBy=Eh,l.differenceWith=Ih,l.drop=zh,l.dropRight=Ph,l.dropRightWhile=Rh,l.dropWhile=Dh,l.fill=Lh,l.filter=Ox,l.flatMap=Vx,l.flatMapDeep=Bx,l.flatMapDepth=Ux,l.flatten=Qc,l.flattenDeep=Fh,l.flattenDepth=Oh,l.flip=lp,l.flow=rj,l.flowRight=tj,l.fromPairs=kh,l.functions=rf,l.functionsIn=tf,l.groupBy=Wx,l.initial=Vh,l.intersection=Bh,l.intersectionBy=Uh,l.intersectionWith=Wh,l.invert=lf,l.invertBy=cf,l.invokeMap=$x,l.iteratee=zi,l.keyBy=Gx,l.keys=gn,l.keysIn=Rn,l.map=Gt,l.mapKeys=df,l.mapValues=uf,l.matches=aj,l.matchesProperty=ij,l.memoize=Kt,l.merge=mf,l.mergeWith=No,l.method=lj,l.methodOf=cj,l.mixin=Pi,l.negate=Zt,l.nthArg=dj,l.omit=hf,l.omitBy=xf,l.once=cp,l.orderBy=Hx,l.over=uj,l.overArgs=op,l.overEvery=mj,l.overSome=hj,l.partial=Ci,l.partialRight=uo,l.partition=Kx,l.pick=pf,l.pickBy=bo,l.property=To,l.propertyOf=xj,l.pull=Hh,l.pullAll=Xc,l.pullAllBy=Kh,l.pullAllWith=Zh,l.pullAt=Yh,l.range=pj,l.rangeRight=fj,l.rearg=dp,l.reject=Qx,l.remove=Qh,l.rest=up,l.reverse=bi,l.sampleSize=Xx,l.set=jf,l.setWith=gf,l.shuffle=ep,l.slice=Jh,l.sortBy=rp,l.sortedUniq=ax,l.sortedUniqBy=ix,l.split=Bf,l.spread=mp,l.tail=lx,l.take=cx,l.takeRight=ox,l.takeRightWhile=dx,l.takeWhile=ux,l.tap=_x,l.throttle=hp,l.thru=$t,l.toArray=fo,l.toPairs=yo,l.toPairsIn=wo,l.toPath=bj,l.toPlainObject=go,l.transform=vf,l.unary=xp,l.union=mx,l.unionBy=hx,l.unionWith=xx,l.uniq=px,l.uniqBy=fx,l.uniqWith=jx,l.unset=Nf,l.unzip=yi,l.unzipWith=eo,l.update=bf,l.updateWith=yf,l.values=zr,l.valuesIn=wf,l.without=gx,l.words=_o,l.wrap=pp,l.xor=vx,l.xorBy=Nx,l.xorWith=bx,l.zip=yx,l.zipObject=wx,l.zipObjectDeep=Cx,l.zipWith=Sx,l.entries=yo,l.entriesIn=wo,l.extend=vo,l.extendWith=Jt,Pi(l,l),l.add=wj,l.attempt=Ao,l.camelCase=Af,l.capitalize=Co,l.ceil=Cj,l.clamp=Cf,l.clone=jp,l.cloneDeep=vp,l.cloneDeepWith=Np,l.cloneWith=gp,l.conformsTo=bp,l.deburr=So,l.defaultTo=sj,l.divide=Sj,l.endsWith=Tf,l.eq=rs,l.escape=Ef,l.escapeRegExp=If,l.every=Fx,l.find=kx,l.findIndex=Zc,l.findKey=Qp,l.findLast=Mx,l.findLastIndex=Yc,l.findLastKey=Jp,l.floor=_j,l.forEach=so,l.forEachRight=ro,l.forIn=Xp,l.forInRight=ef,l.forOwn=nf,l.forOwnRight=sf,l.get=Ai,l.gt=yp,l.gte=wp,l.has=af,l.hasIn=Ti,l.head=Jc,l.identity=Dn,l.includes=qx,l.indexOf=Mh,l.inRange=Sf,l.invoke=of,l.isArguments=ur,l.isArray=Ae,l.isArrayBuffer=Cp,l.isArrayLike=Pn,l.isArrayLikeObject=dn,l.isBoolean=Sp,l.isBuffer=qs,l.isDate=_p,l.isElement=Ap,l.isEmpty=Tp,l.isEqual=Ep,l.isEqualWith=Ip,l.isError=Si,l.isFinite=zp,l.isFunction=Es,l.isInteger=mo,l.isLength=Yt,l.isMap=ho,l.isMatch=Pp,l.isMatchWith=Rp,l.isNaN=Dp,l.isNative=Lp,l.isNil=Op,l.isNull=Fp,l.isNumber=xo,l.isObject=rn,l.isObjectLike=an,l.isPlainObject=nt,l.isRegExp=_i,l.isSafeInteger=kp,l.isSet=po,l.isString=Qt,l.isSymbol=Vn,l.isTypedArray=Ir,l.isUndefined=Mp,l.isWeakMap=Vp,l.isWeakSet=Bp,l.join=qh,l.kebabCase=zf,l.last=Qn,l.lastIndexOf=$h,l.lowerCase=Pf,l.lowerFirst=Rf,l.lt=Up,l.lte=Wp,l.max=Aj,l.maxBy=Tj,l.mean=Ej,l.meanBy=Ij,l.min=zj,l.minBy=Pj,l.stubArray=Di,l.stubFalse=Li,l.stubObject=jj,l.stubString=gj,l.stubTrue=vj,l.multiply=Rj,l.nth=Gh,l.noConflict=oj,l.noop=Ri,l.now=Ht,l.pad=Df,l.padEnd=Lf,l.padStart=Ff,l.parseInt=Of,l.random=_f,l.reduce=Zx,l.reduceRight=Yx,l.repeat=kf,l.replace=Mf,l.result=ff,l.round=Dj,l.runInContext=h,l.sample=Jx,l.size=np,l.snakeCase=Vf,l.some=sp,l.sortedIndex=Xh,l.sortedIndexBy=ex,l.sortedIndexOf=nx,l.sortedLastIndex=sx,l.sortedLastIndexBy=rx,l.sortedLastIndexOf=tx,l.startCase=Uf,l.startsWith=Wf,l.subtract=Lj,l.sum=Fj,l.sumBy=Oj,l.template=qf,l.times=Nj,l.toFinite=Is,l.toInteger=Te,l.toLength=jo,l.toLower=$f,l.toNumber=Jn,l.toSafeInteger=qp,l.toString=We,l.toUpper=Gf,l.trim=Hf,l.trimEnd=Kf,l.trimStart=Zf,l.truncate=Yf,l.unescape=Qf,l.uniqueId=yj,l.upperCase=Jf,l.upperFirst=Ei,l.each=so,l.eachRight=ro,l.first=Jc,Pi(l,function(){var n={};return ds(l,function(s,r){$e.call(l.prototype,r)||(n[r]=s)}),n}(),{chain:!1}),l.VERSION=ne,Gn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){l[n].placeholder=l}),Gn(["drop","take"],function(n,s){Oe.prototype[n]=function(r){r=r===i?1:jn(Te(r),0);var t=this.__filtered__&&!s?new Oe(this):this.clone();return t.__filtered__?t.__takeCount__=yn(r,t.__takeCount__):t.__views__.push({size:yn(r,He),type:n+(t.__dir__<0?"Right":"")}),t},Oe.prototype[n+"Right"]=function(r){return this.reverse()[n](r).reverse()}}),Gn(["filter","map","takeWhile"],function(n,s){var r=s+1,t=r==b||r==u;Oe.prototype[n]=function(a){var o=this.clone();return o.__iteratees__.push({iteratee:ge(a,3),type:r}),o.__filtered__=o.__filtered__||t,o}}),Gn(["head","last"],function(n,s){var r="take"+(s?"Right":"");Oe.prototype[n]=function(){return this[r](1).value()[0]}}),Gn(["initial","tail"],function(n,s){var r="drop"+(s?"":"Right");Oe.prototype[n]=function(){return this.__filtered__?new Oe(this):this[r](1)}}),Oe.prototype.compact=function(){return this.filter(Dn)},Oe.prototype.find=function(n){return this.filter(n).head()},Oe.prototype.findLast=function(n){return this.reverse().find(n)},Oe.prototype.invokeMap=ze(function(n,s){return typeof n=="function"?new Oe(this):this.map(function(r){return Zr(r,n,s)})}),Oe.prototype.reject=function(n){return this.filter(Zt(ge(n)))},Oe.prototype.slice=function(n,s){n=Te(n);var r=this;return r.__filtered__&&(n>0||s<0)?new Oe(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),s!==i&&(s=Te(s),r=s<0?r.dropRight(-s):r.take(s-n)),r)},Oe.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Oe.prototype.toArray=function(){return this.take(He)},ds(Oe.prototype,function(n,s){var r=/^(?:filter|find|map|reject)|While$/.test(s),t=/^(?:head|last)$/.test(s),a=l[t?"take"+(s=="last"?"Right":""):s],o=t||/^find/.test(s);a&&(l.prototype[s]=function(){var d=this.__wrapped__,m=t?[1]:arguments,x=d instanceof Oe,I=m[0],z=x||Ae(d),L=function(Fe){var Me=a.apply(l,Os([Fe],m));return t&&X?Me[0]:Me};z&&r&&typeof I=="function"&&I.length!=1&&(x=z=!1);var X=this.__chain__,ce=!!this.__actions__.length,ve=o&&!X,Ee=x&&!ce;if(!o&&z){d=Ee?d:new Oe(this);var Ne=n.apply(d,m);return Ne.__actions__.push({func:$t,args:[L],thisArg:i}),new Kn(Ne,X)}return ve&&Ee?n.apply(this,m):(Ne=this.thru(L),ve?t?Ne.value()[0]:Ne.value():Ne)})}),Gn(["pop","push","shift","sort","splice","unshift"],function(n){var s=jt[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",t=/^(?:pop|shift)$/.test(n);l.prototype[n]=function(){var a=arguments;if(t&&!this.__chain__){var o=this.value();return s.apply(Ae(o)?o:[],a)}return this[r](function(d){return s.apply(Ae(d)?d:[],a)})}}),ds(Oe.prototype,function(n,s){var r=l[s];if(r){var t=r.name+"";$e.call(Sr,t)||(Sr[t]=[]),Sr[t].push({name:s,func:r})}}),Sr[kt(i,$).name]=[{name:"wrapper",func:i}],Oe.prototype.clone=Yu,Oe.prototype.reverse=Qu,Oe.prototype.value=Ju,l.prototype.at=Ax,l.prototype.chain=Tx,l.prototype.commit=Ex,l.prototype.next=Ix,l.prototype.plant=Px,l.prototype.reverse=Rx,l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=Dx,l.prototype.first=l.prototype.head,Ur&&(l.prototype[Ur]=zx),l},yr=Eu();rr?((rr.exports=yr)._=yr,za._=yr):Nn._=yr}).call(wg)}(st,st.exports)),st.exports}var Sg=Cg();const _g=Rr({employeeId:xe().min(1,{message:"Selectați un angajat"}),contractNumber:xe().min(1,{message:"Numărul contractului este obligatoriu"}),revisalId:xe().optional(),registrationNumber:xe().optional(),startDate:Ps({required_error:"Data de început este obligatorie"}),endDate:Ps().optional(),contractType:xe().min(1,{message:"Tipul contractului este obligatoriu"}),durationType:xe().min(1,{message:"Durata contractului este obligatorie"}),contractTypeSpecial:xe().optional(),retirementStatus:xe().optional(),position:xe().min(1,{message:"Funcția oficială este obligatorie pentru contract și Revisal"}),corCode:xe().min(1,{message:"Codul COR este obligatoriu pentru raportare în Revisal"}),corOccupationName:xe().min(1,{message:"Denumirea oficială a ocupației conform COR este obligatorie"}),workHours:js.number().int().positive().default(8),workingDaysPerWeek:js.number().int().min(1).max(7).default(5),workNorm:xe().default("full_time"),workScheduleType:xe().default("fixed"),grossSalary:js.number().positive({message:"Salariul trebuie să fie pozitiv"}),currency:xe().default("RON"),bonusesBenefits:xe().optional(),status:xe().default("draft"),isApprenticeshipContract:Wn().default(!1),isInternshipContract:Wn().default(!1),isTelemuncaContract:Wn().default(!1),suspensionReason:xe().optional(),suspensionStartDate:Ps().optional(),suspensionEndDate:Ps().optional(),terminationDate:Ps().optional(),terminationReason:xe().optional(),terminationNoticeDate:Ps().optional(),notes:xe().optional()}).refine(p=>!p.endDate||p.endDate&&p.startDate&&p.endDate>p.startDate,{message:"Data de sfârșit trebuie să fie după data de început",path:["endDate"]}).refine(p=>!p.suspensionEndDate||p.suspensionEndDate&&p.suspensionStartDate&&p.suspensionEndDate>p.suspensionStartDate,{message:"Data de sfârșit a suspendării trebuie să fie după data de început",path:["suspensionEndDate"]}),Ag=({onSubmit:p,initialData:c,initialEmployeeId:i,isSubmitting:ne=!1})=>{var W;const[Z,ae]=M.useState(""),[O,J]=M.useState(null),[B,D]=M.useState("general"),[R,U]=M.useState({general:c?!!c.employeeId&&!!c.contractNumber&&!!c.startDate:!1,details:c?!!c.position&&!!c.corCode&&!!c.corOccupationName&&c.workHours>0&&c.workingDaysPerWeek>0:!1,salary:c?c.grossSalary>0:!1,status:c?!!c.status:!1}),[v,K]=M.useState(!1),{toast:V}=Ns(),{useEmployees:G,useCorOccupations:f}=_n(),$=()=>{K(!0);let u=!1;switch(B){case"general":u=!!P.getValues("employeeId")&&!!P.getValues("contractNumber")&&!!P.getValues("startDate");break;case"occupation":u=!!P.getValues("position")&&!!P.getValues("corCode")&&!!P.getValues("corOccupationName");break;case"schedule":u=P.getValues("workHours")>0&&P.getValues("workingDaysPerWeek")>0;break;case"compensation":u=P.getValues("grossSalary")>0;break;case"status":u=!!P.getValues("status");break}if(u){switch(B){case"general":U(ie=>({...ie,general:!0}));break;case"occupation":case"schedule":U(ie=>({...ie,details:!0}));break;case"compensation":U(ie=>({...ie,salary:!0}));break;case"status":U(ie=>({...ie,status:!0}));break}V({title:"Informații salvate",description:"Informațiile din tab-ul curent au fost salvate."})}else V({title:"Eroare",description:"Completați toate câmpurile obligatorii pentru a salva.",variant:"destructive"});K(!1)},{data:le}=G(),Y=((W=le==null?void 0:le.data)==null?void 0:W.items)||[],{data:N,isLoading:me}=f(Z),T=(N==null?void 0:N.data)||[],H=Sg.debounce(u=>{u.length>=3&&ae(u)},300),E=()=>R.general&&R.details&&R.salary&&R.status,P=Gs({resolver:Hs(_g),defaultValues:{employeeId:(c==null?void 0:c.employeeId)||i||"",contractNumber:(c==null?void 0:c.contractNumber)||"",revisalId:(c==null?void 0:c.revisalId)||"",registrationNumber:(c==null?void 0:c.registrationNumber)||"",startDate:c!=null&&c.startDate?new Date(c.startDate):new Date,endDate:c!=null&&c.endDate?new Date(c.endDate):void 0,contractType:(c==null?void 0:c.contractType)||"full_time",durationType:(c==null?void 0:c.durationType)||"indefinite",contractTypeSpecial:(c==null?void 0:c.contractTypeSpecial)||"",retirementStatus:(c==null?void 0:c.retirementStatus)||"",position:(c==null?void 0:c.position)||"",corCode:(c==null?void 0:c.corCode)||"",corOccupationName:(c==null?void 0:c.corOccupationName)||"",workHours:(c==null?void 0:c.workHours)||8,workingDaysPerWeek:(c==null?void 0:c.workingDaysPerWeek)||5,workNorm:(c==null?void 0:c.workNorm)||"full_time",workScheduleType:(c==null?void 0:c.workScheduleType)||"fixed",grossSalary:(c==null?void 0:c.grossSalary)||0,currency:(c==null?void 0:c.currency)||"RON",bonusesBenefits:(c==null?void 0:c.bonusesBenefits)||"",status:(c==null?void 0:c.status)||"draft",isApprenticeshipContract:(c==null?void 0:c.isApprenticeshipContract)||!1,isInternshipContract:(c==null?void 0:c.isInternshipContract)||!1,isTelemuncaContract:(c==null?void 0:c.isTelemuncaContract)||!1,suspensionReason:(c==null?void 0:c.suspensionReason)||"",suspensionStartDate:c!=null&&c.suspensionStartDate?new Date(c.suspensionStartDate):void 0,suspensionEndDate:c!=null&&c.suspensionEndDate?new Date(c.suspensionEndDate):void 0,terminationDate:c!=null&&c.terminationDate?new Date(c.terminationDate):void 0,terminationReason:(c==null?void 0:c.terminationReason)||"",terminationNoticeDate:c!=null&&c.terminationNoticeDate?new Date(c.terminationNoticeDate):void 0,notes:(c==null?void 0:c.notes)||""}});M.useEffect(()=>{const u=P.getValues(),ie=!!u.employeeId&&!!u.contractNumber&&!!u.startDate,se=!!u.position&&!!u.corCode&&!!u.corOccupationName,Ye=u.workHours>0&&u.workingDaysPerWeek>0,ke=u.grossSalary>0,He=!!u.status;U({general:ie,details:se&&Ye,salary:ke,status:He})},[P,P.watch("employeeId"),P.watch("contractNumber"),P.watch("startDate"),P.watch("position"),P.watch("corCode"),P.watch("corOccupationName"),P.watch("workHours"),P.watch("workingDaysPerWeek"),P.watch("grossSalary"),P.watch("status")]);const we=P.watch("contractType"),j=P.watch("durationType");P.watch("workNorm");const fe=u=>{p(u)},Ue=["temporary","seasonal","internship"].includes(we)||j==="fixed",b=(u,ie)=>{P.setValue("corCode",u),P.setValue("corOccupationName",ie),J(u)};return e.jsx(Ks,{...P,children:e.jsxs("form",{onSubmit:P.handleSubmit(fe),className:"space-y-6",children:[e.jsxs(Xs,{defaultValue:"general",value:B,onValueChange:D,className:"space-y-4",children:[e.jsxs(er,{className:"grid grid-cols-2 md:grid-cols-5 w-full mb-4",children:[e.jsxs(en,{value:"general",className:"flex items-center gap-1.5",children:["Informații generale ",R.general&&e.jsx(hr,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(en,{value:"occupation",className:"flex items-center gap-1.5",children:["Funcție și COR ",R.details&&e.jsx(hr,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(en,{value:"schedule",className:"flex items-center gap-1.5",children:["Program de lucru ",R.details&&e.jsx(hr,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(en,{value:"compensation",className:"flex items-center gap-1.5",children:["Salarizare ",R.salary&&e.jsx(hr,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(en,{value:"status",className:"flex items-center gap-1.5",children:["Status contract ",R.status&&e.jsx(hr,{className:"h-4 w-4 text-green-500"})]})]}),e.jsxs(hn,{value:"general",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"employeeId",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Angajat"}),e.jsxs(Pe,{value:u.value,onValueChange:u.onChange,disabled:!!i||!!c,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează angajatul"})})}),e.jsx(Le,{children:Y.map(ie=>e.jsxs(w,{value:ie.id,children:[ie.lastName," ",ie.firstName]},ie.id))})]}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"contractNumber",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Număr contract"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Număr contract",...u})}),e.jsx(Q,{children:"Numărul contractului conform registrului intern"}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"revisalId",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"ID REVISAL"}),e.jsx(A,{children:e.jsx(te,{placeholder:"ID înregistrare REVISAL",...u})}),e.jsx(Q,{children:"ID-ul de înregistrare din sistemul REVISAL"}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"registrationNumber",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Număr înregistrare ITM"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Număr înregistrare la ITM",...u})}),e.jsx(Q,{children:"Numărul de înregistrare în registrul general de evidență"}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"startDate",render:({field:u})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsx(_,{children:"Data început"}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[u.value?vn(u.value,"P",{locale:cn}):e.jsx("span",{className:"text-muted-foreground",children:"Selectează data"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"start",children:e.jsx(fs,{mode:"single",selected:u.value,onSelect:u.onChange,initialFocus:!0})})]}),e.jsx(Q,{children:"Data de începere a contractului"}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"durationType",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Durata contractului"}),e.jsxs(Pe,{value:u.value,onValueChange:u.onChange,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează durata"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"indefinite",children:"Nedeterminată"}),e.jsx(w,{value:"fixed",children:"Determinată"})]})]}),e.jsx(Q,{children:"Durata contractului conform legislației"}),e.jsx(k,{})]})})]}),j==="fixed"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"endDate",render:({field:u})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsxs(_,{children:["Data sfârșit",Ue&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[u.value?vn(u.value,"P",{locale:cn}):e.jsx("span",{className:"text-muted-foreground",children:Ue?"Selectează data":"Nedeterminat"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"start",children:e.jsx(fs,{mode:"single",selected:u.value,onSelect:u.onChange,initialFocus:!0,disabled:ie=>{const se=P.getValues("startDate");return se?ie<se:!1}})})]}),Ue&&!u.value&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Data de sfârșit este obligatorie pentru contractele pe perioadă determinată"}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"contractType",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Tip contract"}),e.jsxs(Pe,{value:u.value,onValueChange:u.onChange,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează tipul de contract"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"full_time",children:"Normă întreagă"}),e.jsx(w,{value:"part_time",children:"Timp parțial"}),e.jsx(w,{value:"temporary",children:"Perioadă determinată"}),e.jsx(w,{value:"seasonal",children:"Sezonier"}),e.jsx(w,{value:"internship",children:"Internship"})]})]}),e.jsx(Q,{children:"Tipul contractului conform legislației muncii"}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(C,{control:P.control,name:"isApprenticeshipContract",render:({field:u})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:u.value,onCheckedChange:u.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Contract de ucenicie"}),e.jsx(Q,{children:"Contractul este de tip ucenicie"})]})]})}),e.jsx(C,{control:P.control,name:"isInternshipContract",render:({field:u})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:u.value,onCheckedChange:u.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Contract de stagiu"}),e.jsx(Q,{children:"Contractul este de tip stagiu"})]})]})}),e.jsx(C,{control:P.control,name:"isTelemuncaContract",render:({field:u})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:u.value,onCheckedChange:u.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Telemuncă"}),e.jsx(Q,{children:"Contract cu muncă la distanță"})]})]})})]})]}),e.jsxs(hn,{value:"occupation",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"position",render:({field:u})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Funcție oficială ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{placeholder:"Funcția oficială conform contractului de muncă",...u})}),e.jsx(Q,{children:"Titlul oficial al funcției folosit în contractul individual de muncă și Revisal"}),e.jsx(k,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{control:P.control,name:"corCode",render:({field:u})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Cod COR oficial ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{placeholder:"Cod COR necesar pentru Revisal",...u,readOnly:!!O})}),e.jsx(Q,{children:"Codul COR conform Clasificării Ocupațiilor din România, obligatoriu pentru raportare Revisal"}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"corOccupationName",render:({field:u})=>e.jsxs(S,{children:[e.jsxs(_,{children:["Denumire ocupație oficială ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{children:e.jsx(te,{placeholder:"Denumirea oficială a ocupației conform nomenclatorului COR",...u,readOnly:!!O})}),e.jsx(Q,{children:"Denumirea oficială a ocupației conform nomenclatorului COR, obligatorie pentru raportarea Revisal"}),e.jsx(k,{})]})})]})]}),e.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-md",children:[e.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Căutare cod COR obligatoriu pentru Revisal"}),e.jsx("div",{className:"flex gap-2 mb-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Zs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Caută denumire sau cod ocupație conform COR...",className:"pl-8",onChange:u=>H(u.target.value)}),e.jsx(Q,{className:"mt-1 text-xs",children:"Introdu minim 3 caractere pentru a începe căutarea în nomenclatorul național COR"})]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-md",children:me?e.jsx("div",{className:"p-4 text-center",children:"Se încarcă..."}):T.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:Z.length>=3?"Nu au fost găsite ocupații":"Introduceți minim 3 caractere pentru a căuta"}):e.jsx("div",{className:"divide-y",children:T.map(u=>e.jsxs("div",{className:"p-2 hover:bg-gray-100 cursor-pointer flex justify-between items-center",onClick:()=>b(u.code,u.name),children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:u.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Cod COR: ",u.code]})]}),e.jsx(F,{variant:"ghost",size:"sm",children:"Selectează"})]},u.id))})})]})]}),e.jsxs(hn,{value:"schedule",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"workNorm",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Norma de lucru"}),e.jsxs(Pe,{value:u.value,onValueChange:u.onChange,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează norma de lucru"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"full_time",children:"Normă întreagă"}),e.jsx(w,{value:"part_time",children:"Normă parțială"})]})]}),e.jsx(Q,{children:"Tipul normei de lucru conform contractului"}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"workScheduleType",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Tip program de lucru"}),e.jsxs(Pe,{value:u.value,onValueChange:u.onChange,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează tipul programului"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"fixed",children:"Program fix"}),e.jsx(w,{value:"flexible",children:"Program flexibil"}),e.jsx(w,{value:"uneven",children:"Repartizare inegală"}),e.jsx(w,{value:"shifts",children:"Program în ture"})]})]}),e.jsx(Q,{children:"Tipul programului de lucru"}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"workHours",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Ore pe zi"}),e.jsx(A,{children:e.jsx(te,{type:"number",min:"1",max:"24",step:"1",...u})}),e.jsx(Q,{children:"Numărul de ore de lucru pe zi"}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"workingDaysPerWeek",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Zile lucrătoare pe săptămână"}),e.jsxs(Pe,{value:u.value.toString(),onValueChange:ie=>u.onChange(Number(ie)),children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează zilele"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"1",children:"1 zi"}),e.jsx(w,{value:"2",children:"2 zile"}),e.jsx(w,{value:"3",children:"3 zile"}),e.jsx(w,{value:"4",children:"4 zile"}),e.jsx(w,{value:"5",children:"5 zile"}),e.jsx(w,{value:"6",children:"6 zile"}),e.jsx(w,{value:"7",children:"7 zile"})]})]}),e.jsx(Q,{children:"Numărul de zile lucrătoare pe săptămână"}),e.jsx(k,{})]})})]})]}),e.jsxs(hn,{value:"compensation",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"grossSalary",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Salariu brut"}),e.jsx(A,{children:e.jsx(te,{type:"number",min:"0",step:"1",...u})}),e.jsx(Q,{children:"Salariul brut lunar în moneda selectată"}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"currency",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Monedă"}),e.jsxs(Pe,{value:u.value,onValueChange:u.onChange,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează moneda"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"RON",children:"RON (Lei)"}),e.jsx(w,{value:"EUR",children:"EUR (Euro)"}),e.jsx(w,{value:"USD",children:"USD (Dolari)"})]})]}),e.jsx(Q,{children:"Moneda în care este exprimat salariul"}),e.jsx(k,{})]})})]}),e.jsx(C,{control:P.control,name:"bonusesBenefits",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Bonusuri și beneficii"}),e.jsx(A,{children:e.jsx(Ls,{placeholder:"Descrieți bonusurile, primele și alte beneficii prevăzute în contract",className:"min-h-[100px] resize-none",...u})}),e.jsx(Q,{children:"Orice bonusuri, prime sau alte beneficii menţionate în contract"}),e.jsx(k,{})]})})]}),e.jsxs(hn,{value:"status",className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsx(C,{control:P.control,name:"status",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Status contract"}),e.jsxs(Pe,{value:u.value,onValueChange:u.onChange,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează statusul"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"draft",children:"Ciornă"}),e.jsx(w,{value:"pending",children:"În așteptare"}),e.jsx(w,{value:"active",children:"Activ"}),e.jsx(w,{value:"suspended",children:"Suspendat"}),e.jsx(w,{value:"expired",children:"Expirat"}),e.jsx(w,{value:"terminated",children:"Încetat"})]})]}),e.jsx(Q,{children:"Statusul actual al contractului"}),e.jsx(k,{})]})})}),P.watch("status")==="suspended"&&e.jsxs("div",{className:"border p-4 rounded-md space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Detalii suspendare"}),e.jsx(C,{control:P.control,name:"suspensionReason",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Motiv suspendare"}),e.jsxs(Pe,{value:u.value||"",onValueChange:u.onChange,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează motivul suspendării"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"medical_leave",children:"Concediu medical"}),e.jsx(w,{value:"parental_leave",children:"Concediu creștere copil"}),e.jsx(w,{value:"unpaid_leave",children:"Concediu fără plată"}),e.jsx(w,{value:"technical_unemployment",children:"Șomaj tehnic"}),e.jsx(w,{value:"force_majeure",children:"Forță majoră"}),e.jsx(w,{value:"other",children:"Alt motiv"})]})]}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"suspensionStartDate",render:({field:u})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsx(_,{children:"Data început suspendare"}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[u.value?vn(u.value,"P",{locale:cn}):e.jsx("span",{className:"text-muted-foreground",children:"Selectează data"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"start",children:e.jsx(fs,{mode:"single",selected:u.value,onSelect:u.onChange,initialFocus:!0})})]}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"suspensionEndDate",render:({field:u})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsx(_,{children:"Data sfârșit suspendare"}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[u.value?vn(u.value,"P",{locale:cn}):e.jsx("span",{className:"text-muted-foreground",children:"Selectează data"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"start",children:e.jsx(fs,{mode:"single",selected:u.value,onSelect:u.onChange,initialFocus:!0,disabled:ie=>{const se=P.getValues("suspensionStartDate");return se?ie<se:!1}})})]}),e.jsx(k,{})]})})]})]}),P.watch("status")==="terminated"&&e.jsxs("div",{className:"border p-4 rounded-md space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Detalii încetare contract"}),e.jsx(C,{control:P.control,name:"terminationReason",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Motiv încetare"}),e.jsxs(Pe,{value:u.value||"",onValueChange:u.onChange,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectează motivul încetării"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"agreement",children:"Acordul părților"}),e.jsx(w,{value:"employee_initiative",children:"Demisie"}),e.jsx(w,{value:"employer_initiative",children:"Concediere"}),e.jsx(w,{value:"disciplinary",children:"Disciplinar"}),e.jsx(w,{value:"retirement",children:"Pensionare"}),e.jsx(w,{value:"death",children:"Deces"}),e.jsx(w,{value:"expiration",children:"Expirare perioadă determinată"}),e.jsx(w,{value:"other",children:"Alt motiv"})]})]}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:P.control,name:"terminationDate",render:({field:u})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsx(_,{children:"Data încetare contract"}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[u.value?vn(u.value,"P",{locale:cn}):e.jsx("span",{className:"text-muted-foreground",children:"Selectează data"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"start",children:e.jsx(fs,{mode:"single",selected:u.value,onSelect:u.onChange,initialFocus:!0})})]}),e.jsx(k,{})]})}),e.jsx(C,{control:P.control,name:"terminationNoticeDate",render:({field:u})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsx(_,{children:"Data notificare încetare"}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[u.value?vn(u.value,"P",{locale:cn}):e.jsx("span",{className:"text-muted-foreground",children:"Selectează data"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"start",children:e.jsx(fs,{mode:"single",selected:u.value,onSelect:u.onChange,initialFocus:!0})})]}),e.jsx(k,{})]})})]})]}),e.jsx(C,{control:P.control,name:"notes",render:({field:u})=>e.jsxs(S,{children:[e.jsx(_,{children:"Note și clauze adiționale"}),e.jsx(A,{children:e.jsx(Ls,{placeholder:"Note, clauze sau observații privind contractul",className:"min-h-[100px] resize-none",...u})}),e.jsx(Q,{children:"Clauze speciale, observații sau note adiționale despre contract"}),e.jsx(k,{})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-6 border-t",children:[e.jsx(F,{type:"button",variant:"outline",onClick:()=>window.history.back(),disabled:ne,children:"Anulează"}),e.jsx(F,{type:"button",variant:"outline",className:"flex items-center gap-1.5",onClick:$,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Salvează..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Dr,{className:"h-4 w-4"}),"Salvează informații"]})}),e.jsx(F,{type:"submit",disabled:ne||!E(),title:E()?"":"Completați toate taburile pentru a putea salva contractul",children:ne?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Se salvează..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dr,{className:"h-4 w-4"}),c?"Actualizează contract":"Salvează contract"]})})]})]})})},ki=()=>{const c=ct().id,i=!c,[ne,Z]=Ln(),[ae,O]=M.useState(!1),[J,B]=M.useState(null),{useContract:D,useUpdateContract:R,useCreateContract:U}=_n(),{data:v,isLoading:K,error:V}=D(c||""),{mutate:G}=(R==null?void 0:R())||{mutate:async()=>{}},{mutate:f}=(U==null?void 0:U())||{mutate:async()=>{}},$=v==null?void 0:v.data,le=N=>{O(!0),B(null),i?f(N,{onSuccess:me=>{O(!1),Z("/hr/contracts")},onError:me=>{O(!1),B(me.message||"A apărut o eroare la crearea contractului.")}}):G({id:c,data:N},{onSuccess:me=>{O(!1),Z("/hr/contracts")},onError:me=>{O(!1),B(me.message||"A apărut o eroare la actualizarea contractului.")}})},Y=$?`Contract pentru ${$.employeeName||"angajat"}`:i?"Creați un contract nou":`ID contract: ${c}`;return e.jsxs(xn,{activeTab:"contracts",title:i?"Contract nou":"Detalii contract",subtitle:Y,children:[e.jsx("div",{className:"mb-4",children:e.jsxs(F,{variant:"ghost",onClick:()=>Z("/hr/contracts"),className:"flex items-center",children:[e.jsx(ot,{className:"mr-2 h-4 w-4"}),"Înapoi la contracte"]})}),J&&e.jsxs(ls,{variant:"destructive",className:"mb-4",children:[e.jsx(cs,{children:"Eroare"}),e.jsx(os,{children:J})]}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:i?"Contract nou":"Detalii contract"}),e.jsx(Be,{children:i?"Introduceți informațiile pentru noul contract":"Vizualizare și editare informații contract"})]}),e.jsx(pe,{children:K?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(qn,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Se încarcă datele contractului..."})]}):V?e.jsxs(ls,{variant:"destructive",children:[e.jsx(cs,{children:"Nu s-a putut încărca contractul"}),e.jsx(os,{children:V instanceof Error?V.message:"A apărut o eroare la încărcarea datelor."})]}):e.jsx(Ag,{onSubmit:le,initialData:$,isSubmitting:ae})})]})]})},Tg=()=>{var Fn;const[p,c]=Ln(),[i,ne]=M.useState(1),[Z,ae]=M.useState(10),[O,J]=M.useState("name"),[B,D]=M.useState("asc"),[R,U]=M.useState(""),[v,K]=M.useState(!1),[V,G]=M.useState(""),{useDepartments:f,useEmployees:$,useDeleteDepartment:le}=_n(),{data:Y,isLoading:N,refetch:me}=f(),{data:T}=$(),{mutate:H}=(le==null?void 0:le())||{mutate:async()=>{}},E=(Y==null?void 0:Y.data)||[],P=E.length,we=((Fn=T==null?void 0:T.data)==null?void 0:Fn.items)||[],j=de=>we.filter(q=>q.departmentId===de).length,fe=de=>{const q=we.find(Qe=>Qe.departmentId===de&&Qe.isManager===!0);return q?`${q.lastName} ${q.firstName}`:"Nealocat"},Ue=de=>{var q;return((q=E.find(Qe=>Qe.id===de))==null?void 0:q.budgetUsed)||0},b=de=>{var q;return((q=E.find(Qe=>Qe.id===de))==null?void 0:q.budgetAllocated)||0},W=de=>{const q=Ue(de),Qe=b(de);return Qe===0?0:Math.min(Math.round(q/Qe*100),100)},u=de=>{O===de?D(B==="asc"?"desc":"asc"):(J(de),D("asc"))},ie=()=>{c("/hr/departments/new")},se=de=>{c(`/hr/departments/${de}`)},Ye=de=>{G(de),K(!0)},ke=we.length,He=E.reduce((de,q)=>de+q.budgetAllocated,0),pn=E.reduce((de,q)=>de+q.budgetUsed,0);return e.jsx(xn,{activeTab:"departments",title:"Departamente",subtitle:"Gestionarea structurii organizaționale",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(tn,{title:"Total departamente",value:P.toString(),icon:e.jsx(at,{size:20}),color:"primary"}),e.jsx(tn,{title:"Total angajați",value:ke.toString(),icon:e.jsx(Xn,{size:20}),color:"success"}),e.jsx(tn,{title:"Buget utilizat",value:`${Math.round(pn/He*100)}%`,description:`${pn.toLocaleString()} / ${He.toLocaleString()} RON`,icon:e.jsx(Zi,{size:20}),color:"warning"})]}),e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Structura departamentelor"}),e.jsx(Be,{children:"Gestionați structura organizațională a companiei"})]}),e.jsxs(F,{onClick:ie,children:[e.jsx(ia,{className:"mr-2 h-4 w-4"}),"Departament nou"]})]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Caută departament...",className:"pl-8 w-[250px]",value:R,onChange:de=>U(de.target.value)})]}),e.jsx(F,{variant:"outline",size:"icon",onClick:()=>me(),children:e.jsx(Lr,{className:"h-4 w-4"})})]}),e.jsxs(Ys,{children:[e.jsx(Qs,{children:e.jsxs(Ge,{children:[e.jsx(ye,{className:"cursor-pointer",onClick:()=>u("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Denumire",O==="name"&&e.jsx($s,{className:"h-3 w-3"})]})}),e.jsx(ye,{children:"Manager"}),e.jsx(ye,{children:"Angajați"}),e.jsx(ye,{children:"Buget"}),e.jsx(ye,{className:"text-right",children:"Acțiuni"})]})}),e.jsx(Js,{children:N?e.jsx(Ge,{children:e.jsx(oe,{colSpan:5,className:"text-center",children:"Se încarcă departamentele..."})}):E.length===0?e.jsx(Ge,{children:e.jsx(oe,{colSpan:5,className:"text-center",children:"Nu au fost găsite departamente"})}):E.map(de=>e.jsxs(Ge,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>se(de.id),children:[e.jsxs(oe,{className:"font-medium",children:[de.name,e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:de.code})]}),e.jsx(oe,{children:fe(de.id)}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:j(de.id)}),e.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"})]})}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{children:[W(de.id),"% utilizat"]}),e.jsxs("span",{children:[de.budgetUsed.toLocaleString()," / ",de.budgetAllocated.toLocaleString()," RON"]})]}),e.jsx(Go,{value:W(de.id),className:"h-2"})]})}),e.jsx(oe,{className:"text-right",children:e.jsxs(la,{children:[e.jsx(ca,{asChild:!0,children:e.jsx(F,{variant:"ghost",size:"icon",onClick:q=>q.stopPropagation(),children:e.jsx(oa,{className:"h-4 w-4"})})}),e.jsxs(da,{align:"end",children:[e.jsxs(Rs,{onClick:q=>{q.stopPropagation(),se(de.id)},children:[e.jsx(on,{className:"mr-2 h-4 w-4"}),"Detalii departament"]}),e.jsx(ua,{}),e.jsxs(Rs,{className:"text-red-600",onClick:q=>{q.stopPropagation(),Ye(de.id)},children:[e.jsx(ma,{className:"mr-2 h-4 w-4"}),"Șterge departament"]})]})]})})]},de.id))})]})]})]}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Structura organizațională"}),e.jsx(Be,{children:"Vizualizare generală a structurii organizaționale a companiei"})]}),e.jsx(pe,{children:e.jsx("div",{className:"space-y-6",children:E.map(de=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("div",{className:"font-medium text-lg",children:de.name}),e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>se(de.id),children:[e.jsx(on,{className:"mr-2 h-4 w-4"}),"Detalii"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mb-4",children:["Manager: ",fe(de.id)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:j(de.id)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Angajați"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:de.budgetAllocated.toLocaleString()}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Buget alocat (RON)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:de.budgetUsed.toLocaleString()}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Buget utilizat (RON)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[W(de.id),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Utilizare buget"})]})]}),we.filter(q=>q.departmentId===de.id).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"my-4"}),e.jsx("div",{className:"text-sm font-medium mb-2",children:"Angajați în acest departament:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:we.filter(q=>q.departmentId===de.id).map(q=>e.jsxs("div",{className:"text-sm px-3 py-2 border rounded-md flex justify-between items-center",children:[e.jsxs("span",{children:[q.lastName," ",q.firstName]}),e.jsx(F,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>c(`/hr/employees/${q.id}`),children:e.jsx(rt,{className:"h-4 w-4"})})]},q.id))})]})]},de.id))})})]})]})})},Eg=Rr({name:xe().min(2,{message:"Numele departamentului trebuie să aibă minim 2 caractere"}).max(100,{message:"Numele departamentului nu poate depăși 100 caractere"}),code:xe().min(1,{message:"Codul departamentului este obligatoriu"}).max(20,{message:"Codul departamentului nu poate depăși 20 caractere"}),description:xe().optional(),budgetAllocated:js.number().nonnegative({message:"Bugetul alocat trebuie să fie un număr pozitiv"}).default(0),managerId:xe().optional(),parentId:xe().optional(),status:Xj(["ACTIVE","INACTIVE"]).default("ACTIVE"),responsibilityCenter:Wn().default(!1),isCostCenter:Wn().default(!1)}),Mo=({onSubmit:p,initialData:c,isSubmitting:i=!1})=>{var V;const[ne,Z]=M.useState("general");Ns();const{useEmployees:ae,useDepartments:O}=_n(),{data:J}=ae(),B=((V=J==null?void 0:J.data)==null?void 0:V.items)||[],{data:D}=O(),U=((D==null?void 0:D.data)||[]).filter(G=>!(c!=null&&c.id)||G.id!==c.id),v=Gs({resolver:Hs(Eg),defaultValues:{name:(c==null?void 0:c.name)||"",code:(c==null?void 0:c.code)||"",description:(c==null?void 0:c.description)||"",budgetAllocated:(c==null?void 0:c.budgetAllocated)||0,managerId:(c==null?void 0:c.managerId)||"null",parentId:(c==null?void 0:c.parentId)||"null",status:(c==null?void 0:c.status)||"ACTIVE",responsibilityCenter:(c==null?void 0:c.responsibilityCenter)||!1,isCostCenter:(c==null?void 0:c.isCostCenter)||!1}}),K=G=>{const f={...G,managerId:G.managerId==="null"?null:G.managerId,parentId:G.parentId==="null"?null:G.parentId};p(f)};return e.jsx(Ks,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(K),className:"space-y-6",children:[e.jsxs(Xs,{defaultValue:"general",value:ne,onValueChange:Z,className:"space-y-4",children:[e.jsxs(er,{className:"grid grid-cols-1 md:grid-cols-3 w-full mb-4",children:[e.jsxs(en,{value:"general",className:"flex items-center gap-1.5",children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Informații generale"]}),e.jsxs(en,{value:"budget",className:"flex items-center gap-1.5",children:[e.jsx(aa,{className:"h-4 w-4 mr-2"}),"Buget și clasificare"]}),e.jsxs(en,{value:"organization",className:"flex items-center gap-1.5",children:[e.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Management și organizare"]})]}),e.jsxs(hn,{value:"general",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:v.control,name:"name",render:({field:G})=>e.jsxs(S,{children:[e.jsx(_,{children:"Denumire departament"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Denumire departament",...G})}),e.jsx(Q,{children:"Introduceți denumirea oficială a departamentului"}),e.jsx(k,{})]})}),e.jsx(C,{control:v.control,name:"code",render:({field:G})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cod departament"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Cod departament (ex: HR, FIN, IT)",...G})}),e.jsx(Q,{children:"Codul unic folosit pentru identificarea departamentului"}),e.jsx(k,{})]})})]}),e.jsx(C,{control:v.control,name:"description",render:({field:G})=>e.jsxs(S,{children:[e.jsx(_,{children:"Descriere"}),e.jsx(A,{children:e.jsx(Ls,{placeholder:"Descriere departament și responsabilități...",className:"resize-none min-h-[120px]",...G})}),e.jsx(Q,{children:"Descrieți pe scurt departamentul și principalele sale responsabilități"}),e.jsx(k,{})]})}),e.jsx(C,{control:v.control,name:"status",render:({field:G})=>e.jsxs(S,{children:[e.jsx(_,{children:"Status departament"}),e.jsxs(Pe,{onValueChange:G.onChange,defaultValue:G.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați statusul departamentului"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"ACTIVE",children:"Activ"}),e.jsx(w,{value:"INACTIVE",children:"Inactiv"})]})]}),e.jsx(Q,{children:"Statusul actual al departamentului"}),e.jsx(k,{})]})})]}),e.jsxs(hn,{value:"budget",className:"space-y-4",children:[e.jsx(C,{control:v.control,name:"budgetAllocated",render:({field:G})=>e.jsxs(S,{children:[e.jsx(_,{children:"Buget alocat (RON)"}),e.jsx(A,{children:e.jsx(te,{type:"number",placeholder:"0.00",...G,onChange:f=>{const $=f.target.value===""?"0":f.target.value;G.onChange(parseFloat($))}})}),e.jsx(Q,{children:"Bugetul alocat departamentului pentru anul financiar curent"}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:v.control,name:"responsibilityCenter",render:({field:G})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:G.value,onCheckedChange:G.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Centru de responsabilitate"}),e.jsx(Q,{children:"Marchează departamentul ca fiind un centru de responsabilitate cu obiective specifice"})]})]})}),e.jsx(C,{control:v.control,name:"isCostCenter",render:({field:G})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:G.value,onCheckedChange:G.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Centru de cost"}),e.jsx(Q,{children:"Marchează departamentul ca fiind un centru de cost pentru evidența contabilă"})]})]})})]})]}),e.jsxs(hn,{value:"organization",className:"space-y-4",children:[e.jsx(C,{control:v.control,name:"managerId",render:({field:G})=>e.jsxs(S,{children:[e.jsx(_,{children:"Manager departament"}),e.jsxs(Pe,{onValueChange:G.onChange,defaultValue:G.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați managerul departamentului"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"null",children:"-- Fără manager --"}),B.map(f=>e.jsxs(w,{value:f.id,children:[f.lastName," ",f.firstName]},f.id))]})]}),e.jsx(Q,{children:"Managerul responsabil de conducerea departamentului"}),e.jsx(k,{})]})}),e.jsx(C,{control:v.control,name:"parentId",render:({field:G})=>e.jsxs(S,{children:[e.jsx(_,{children:"Departament părinte"}),e.jsxs(Pe,{onValueChange:G.onChange,defaultValue:G.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați departamentul părinte"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"null",children:"-- Fără departament părinte --"}),U.map(f=>e.jsx(w,{value:f.id,children:f.name},f.id))]})]}),e.jsx(Q,{children:"Departamentul de care aparține în structura organizațională"}),e.jsx(k,{})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-6 border-t",children:[e.jsx(F,{type:"button",variant:"outline",onClick:()=>window.history.back(),disabled:i,children:"Anulează"}),e.jsx(F,{type:"submit",disabled:i,className:"gap-2",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Se salvează..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Dr,{className:"h-4 w-4"}),c?"Actualizează departament":"Salvează departament"]})})]})]})})},Mi=()=>{var E,P,we;const c=ct().id,i=!c,[ne,Z]=Ln(),[ae,O]=M.useState(!1),[J,B]=M.useState("details"),{useDepartment:D,useCreateDepartment:R,useUpdateDepartment:U,useEmployees:v}=_n(),{data:K,isLoading:V,isError:G,refetch:f}=D(c||""),{data:$}=v(),le=((E=$==null?void 0:$.data)==null?void 0:E.items)||[],Y=K==null?void 0:K.data,N=le.filter(j=>j.departmentId===c),{mutate:me}=R(),{mutate:T}=U(),H=j=>{O(!0),i?me(j,{onSuccess:()=>{O(!1),Z("/hr/departments")},onError:()=>{O(!1)}}):c&&T({id:c,data:j},{onSuccess:()=>{O(!1),f(),B("details")},onError:()=>{O(!1)}})};return e.jsxs(xn,{activeTab:"departments",title:i?"Departament nou":(Y==null?void 0:Y.name)||"Detalii departament",subtitle:i?"Creați un nou departament în structura organizațională":`Cod departament: ${(Y==null?void 0:Y.code)||"..."}`,children:[e.jsx("div",{className:"mb-4",children:e.jsxs(F,{variant:"ghost",onClick:()=>Z("/hr/departments"),className:"flex items-center",children:[e.jsx(ot,{className:"mr-2 h-4 w-4"}),"Înapoi la departamente"]})}),G&&!i&&e.jsxs(ls,{variant:"destructive",className:"mb-6",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx(cs,{children:"Eroare la încărcarea departamentului"}),e.jsx(os,{children:"Nu s-au putut încărca informațiile departamentului. Încercați să reîmprospătați pagina sau contactați administratorul."})]}),i&&e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Departament nou"}),e.jsx(Be,{children:"Introduceți informațiile pentru noul departament"})]}),e.jsx(pe,{children:e.jsx(Mo,{onSubmit:H,isSubmitting:ae})})]}),!i&&e.jsxs(Xs,{value:J,onValueChange:B,className:"space-y-4",children:[e.jsxs(er,{className:"grid w-full grid-cols-2",children:[e.jsxs(en,{value:"details",className:"flex items-center gap-2",children:[e.jsx(on,{className:"h-4 w-4"}),"Detalii departament"]}),e.jsxs(en,{value:"edit",className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-4 w-4"}),"Editare departament"]})]}),e.jsx(hn,{value:"details",className:"space-y-4",children:e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Informații departament"}),e.jsx(Be,{children:"Detaliile complete ale departamentului"})]}),e.jsx(pe,{className:"space-y-6",children:V?e.jsxs("div",{className:"space-y-4",children:[e.jsx(In,{className:"h-8 w-[250px]"}),e.jsx(In,{className:"h-20 w-full"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(In,{className:"h-24 w-full"}),e.jsx(In,{className:"h-24 w-full"}),e.jsx(In,{className:"h-24 w-full"})]})]}):Y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(at,{className:"h-5 w-5 text-primary"}),Y.name,Y.status==="ACTIVE"&&e.jsxs("span",{className:"inline-flex items-center ml-2 px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(hr,{className:"h-3 w-3 mr-1"}),"Activ"]}),Y.status==="INACTIVE"&&e.jsx("span",{className:"inline-flex items-center ml-2 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Inactiv"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cod departament: ",Y.code]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(F,{variant:"outline",onClick:()=>B("edit"),className:"gap-2",children:[e.jsx(at,{className:"h-4 w-4"}),"Editează departamentul"]})})]}),Y.description&&e.jsxs("div",{className:"mt-2",children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Descriere:"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:Y.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs(ue,{children:[e.jsx(Se,{className:"pb-2",children:e.jsxs(_e,{className:"text-base flex items-center gap-2",children:[e.jsx(Xn,{className:"h-4 w-4 text-primary"}),"Angajați"]})}),e.jsxs(pe,{children:[e.jsx("div",{className:"text-3xl font-bold",children:N.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Angajați în departament"})]})]}),e.jsxs(ue,{children:[e.jsx(Se,{className:"pb-2",children:e.jsxs(_e,{className:"text-base flex items-center gap-2",children:[e.jsx(aa,{className:"h-4 w-4 text-primary"}),"Buget alocat"]})}),e.jsxs(pe,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:[((P=Y.budgetAllocated)==null?void 0:P.toLocaleString())||0," RON"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Buget total alocat"})]})]}),e.jsxs(ue,{children:[e.jsx(Se,{className:"pb-2",children:e.jsxs(_e,{className:"text-base flex items-center gap-2",children:[e.jsx(aa,{className:"h-4 w-4 text-orange-500"}),"Buget utilizat"]})}),e.jsxs(pe,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:[((we=Y.budgetUsed)==null?void 0:we.toLocaleString())||0," RON"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Y.budgetAllocated?`${Math.min(Math.round((Y.budgetUsed||0)/Y.budgetAllocated*100),100)}% din buget`:"Nu există buget alocat"})]})]})]}),N.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Angajați în departament"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(j=>e.jsx(ue,{children:e.jsx(pe,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:[j.lastName," ",j.firstName]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:j.position}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j.email})]}),e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>Z(`/hr/employees/${j.id}`),children:"Detalii"})]})})},j.id))})]})]}):e.jsxs(ls,{children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx(cs,{children:"Departament inexistent"}),e.jsx(os,{children:"Nu s-au găsit informații pentru acest departament."})]})})]})}),e.jsx(hn,{value:"edit",children:e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Editare departament"}),e.jsx(Be,{children:"Modificați informațiile departamentului"})]}),e.jsx(pe,{children:V?e.jsxs("div",{className:"space-y-6",children:[e.jsx(In,{className:"h-10 w-full"}),e.jsx(In,{className:"h-10 w-full"}),e.jsx(In,{className:"h-24 w-full"}),e.jsx(In,{className:"h-10 w-full"})]}):Y?e.jsx(Mo,{initialData:Y,onSubmit:H,isSubmitting:ae}):e.jsxs(ls,{children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx(cs,{children:"Departament inexistent"}),e.jsx(os,{children:"Nu s-au găsit informații pentru acest departament."})]})})]})})]})]})},Ig=()=>{var fr,nr,sr;const[p,c]=Ln(),[i,ne]=M.useState(1),[Z,ae]=M.useState(10),[O,J]=M.useState("startDate"),[B,D]=M.useState("desc"),[R,U]=M.useState(""),[v,K]=M.useState(),[V,G]=M.useState(),[f,$]=M.useState("pending"),[le,Y]=M.useState("all"),[N,me]=M.useState(!1),[T,H]=M.useState(""),{useAbsences:E,useEmployees:P,useDeleteAbsence:we}=_n(),{data:j,isLoading:fe,refetch:Ue}=E(i,Z,R,v,V,f),{data:b}=P(1,100,"",void 0,!0),{mutate:W}=we(),u=((fr=j==null?void 0:j.data)==null?void 0:fr.items)||[],ie=((nr=j==null?void 0:j.data)==null?void 0:nr.total)||0,se=((sr=b==null?void 0:b.data)==null?void 0:sr.items)||[],Ye=u.filter(je=>je.status==="pending").length,ke=u.filter(je=>je.status==="approved").length,He=u.filter(je=>je.status==="rejected").length,pn=[{value:"vacation",label:"Concediu de odihnă"},{value:"sick_leave",label:"Concediu medical"},{value:"unpaid_leave",label:"Concediu fără plată"},{value:"parental_leave",label:"Concediu parental"},{value:"study_leave",label:"Concediu pentru studii"},{value:"other",label:"Alt tip de absență"}],Fn=je=>{O===je?D(B==="asc"?"desc":"asc"):(J(je),D("asc"))},de=()=>{c("/hr/absences/new")},q=je=>{c(`/hr/absences/${je}`)},Qe=je=>{H(je),me(!0)},he=je=>{const nn=se.find(bs=>bs.id===je);return nn?`${nn.lastName} ${nn.firstName}`:"Necunoscut"},ee=je=>{const nn=pn.find(bs=>bs.value===je);return nn?nn.label:je},Ke=je=>{switch(je){case"pending":return e.jsx(mn,{variant:"outline",className:"bg-amber-50 text-amber-600 hover:bg-amber-50",children:"În așteptare"});case"approved":return e.jsx(mn,{variant:"outline",className:"bg-green-50 text-green-600 hover:bg-green-50",children:"Aprobat"});case"rejected":return e.jsx(mn,{variant:"outline",className:"bg-red-50 text-red-600 hover:bg-red-50",children:"Respins"});default:return e.jsx(mn,{variant:"outline",children:je})}};return e.jsx(xn,{activeTab:"absences",title:"Absențe",subtitle:"Gestionarea absențelor și concediilor",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(tn,{title:"Total absențe",value:ie.toString(),icon:e.jsx(Sn,{size:20}),color:"primary"}),e.jsx(tn,{title:"În așteptare",value:Ye.toString(),icon:e.jsx(ra,{size:20}),color:"warning"}),e.jsx(tn,{title:"Aprobate",value:ke.toString(),icon:e.jsx(pr,{size:20}),color:"success"}),e.jsx(tn,{title:"Respinse",value:He.toString(),icon:e.jsx(Ji,{size:20}),color:"danger"})]}),e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Absențe și concedii"}),e.jsx(Be,{children:"Gestionați absențele și concediile angajaților"})]}),e.jsxs(F,{onClick:de,children:[e.jsx(ia,{className:"mr-2 h-4 w-4"}),"Adaugă absență"]})]})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsx(Xs,{defaultValue:"all",value:le,onValueChange:Y,className:"mb-6",children:e.jsxs(er,{className:"grid w-full grid-cols-4",children:[e.jsx(en,{value:"all",onClick:()=>$(void 0),children:"Toate"}),e.jsx(en,{value:"pending",onClick:()=>$("pending"),children:"În așteptare"}),e.jsx(en,{value:"approved",onClick:()=>$("approved"),children:"Aprobate"}),e.jsx(en,{value:"rejected",onClick:()=>$("rejected"),children:"Respinse"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Caută absență...",className:"pl-8 w-[200px]",value:R,onChange:je=>U(je.target.value)})]}),e.jsxs(Pe,{value:v||"all",onValueChange:je=>K(je==="all"?void 0:je),children:[e.jsx(Re,{className:"w-[170px]",children:e.jsx(De,{placeholder:"Tip absență"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"all",children:"Toate tipurile"}),pn.map(je=>e.jsx(w,{value:je.value,children:je.label},je.value))]})]}),e.jsxs(Pe,{value:V||"all",onValueChange:je=>G(je==="all"?void 0:je),children:[e.jsx(Re,{className:"w-[180px]",children:e.jsx(De,{placeholder:"Angajat"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"all",children:"Toți angajații"}),se.map(je=>e.jsxs(w,{value:je.id,children:[je.lastName," ",je.firstName]},je.id))]})]}),e.jsx(F,{variant:"outline",size:"icon",onClick:()=>Ue(),children:e.jsx(Lr,{className:"h-4 w-4"})})]}),e.jsxs(Ys,{children:[e.jsx(Qs,{children:e.jsxs(Ge,{children:[e.jsx(ye,{className:"w-[250px]",children:"Angajat"}),e.jsx(ye,{children:"Tip absență"}),e.jsx(ye,{className:"cursor-pointer",onClick:()=>Fn("startDate"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Perioada",O==="startDate"&&e.jsx($s,{className:"h-3 w-3"})]})}),e.jsx(ye,{children:"Durata"}),e.jsx(ye,{children:"Status"}),e.jsx(ye,{className:"text-right",children:"Acțiuni"})]})}),e.jsx(Js,{children:fe?e.jsx(Ge,{children:e.jsx(oe,{colSpan:6,className:"text-center",children:"Se încarcă absențele..."})}):u.length===0?e.jsx(Ge,{children:e.jsx(oe,{colSpan:6,className:"text-center",children:"Nu au fost găsite absențe"})}):u.map(je=>e.jsxs(Ge,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>q(je.id),children:[e.jsx(oe,{className:"font-medium",children:he(je.employeeId)}),e.jsx(oe,{children:ee(je.type)}),e.jsx(oe,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-xs",children:["De la: ",lt(je.startDate)]}),e.jsxs("span",{className:"text-xs",children:["Până la: ",lt(je.endDate)]})]})}),e.jsxs(oe,{children:[je.daysCount," zile"]}),e.jsx(oe,{children:Ke(je.status)}),e.jsx(oe,{className:"text-right",children:e.jsxs(la,{children:[e.jsx(ca,{asChild:!0,children:e.jsx(F,{variant:"ghost",size:"icon",onClick:nn=>nn.stopPropagation(),children:e.jsx(oa,{className:"h-4 w-4"})})}),e.jsxs(da,{align:"end",children:[e.jsxs(Rs,{onClick:nn=>{nn.stopPropagation(),q(je.id)},children:[e.jsx(on,{className:"mr-2 h-4 w-4"}),"Detalii absență"]}),e.jsx(ua,{}),e.jsxs(Rs,{className:"text-red-600",onClick:nn=>{nn.stopPropagation(),Qe(je.id)},children:[e.jsx(ma,{className:"mr-2 h-4 w-4"}),"Șterge absență"]})]})]})})]},je.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:u.length})," din ",e.jsx("strong",{children:ie})," absențe"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>ne(i-1),disabled:i===1,children:"Anterior"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>ne(i+1),disabled:u.length<Z,children:"Următor"})]})]})]})]})]})})},zg=Rr({employeeId:xe().min(1,{message:"Selectați un angajat"}),absenceType:xe().min(1,{message:"Selectați tipul de absență"}),absenceCode:xe().min(1,{message:"Selectați codul de absență"}).optional(),medicalLeaveCode:xe().optional(),startDate:Ps({required_error:"Data de început este obligatorie"}),endDate:Ps({required_error:"Data de sfârșit este obligatorie"}),workingDays:js.number().positive({message:"Numărul zilelor lucrătoare trebuie să fie pozitiv"}),notes:xe().optional(),medicalCertificateNumber:xe().optional(),medicalCertificateDate:Ps().optional(),medicalCertificateIssuedBy:xe().optional(),status:xe().default("pending")}).refine(p=>!ea(p.endDate,p.startDate),{message:"Data de sfârșit trebuie să fie după data de început",path:["endDate"]}).refine(p=>p.absenceType==="medical_leave"?!!p.medicalCertificateNumber&&!!p.medicalCertificateDate&&!!p.medicalCertificateIssuedBy&&!!p.medicalLeaveCode:!0,{message:"Pentru concediul medical, toate detaliile certificatului medical sunt obligatorii",path:["medicalCertificateNumber"]}),Pg=({onSubmit:p,initialData:c,isSubmitting:i=!1,defaultEmployeeId:ne})=>{var me;const[Z,ae]=M.useState("general"),[O,J]=M.useState(!0);Ns();const{useEmployees:B}=_n(),{data:D,isLoading:R}=B(),U=((me=D==null?void 0:D.data)==null?void 0:me.items)||[],{data:v,isLoading:K}=ln({queryKey:["/api/hr/holidays"],queryFn:async()=>await(await Ie("/api/hr/holidays")).json(),staleTime:24*60*60*1e3}),V=(v==null?void 0:v.data)||[],G=M.useMemo(()=>V.map(T=>new Date(T.date)),[V]),f=Gs({resolver:Hs(zg),defaultValues:{employeeId:(c==null?void 0:c.employeeId)||ne||"",absenceType:(c==null?void 0:c.absenceType)||"",absenceCode:(c==null?void 0:c.absenceCode)||"",medicalLeaveCode:(c==null?void 0:c.medicalLeaveCode)||"",startDate:(c==null?void 0:c.startDate)||new Date,endDate:(c==null?void 0:c.endDate)||zo(new Date,1),workingDays:(c==null?void 0:c.workingDays)||1,notes:(c==null?void 0:c.notes)||"",medicalCertificateNumber:(c==null?void 0:c.medicalCertificateNumber)||"",medicalCertificateDate:(c==null?void 0:c.medicalCertificateDate)||void 0,medicalCertificateIssuedBy:(c==null?void 0:c.medicalCertificateIssuedBy)||"",status:(c==null?void 0:c.status)||"pending"}}),$=(T,H)=>{let E=0,P=new Date(T);for(;P<=H;){const we=G.some(j=>j.getDate()===P.getDate()&&j.getMonth()===P.getMonth()&&j.getFullYear()===P.getFullYear());!mg(P)&&!we&&E++,P=zo(P,1)}return E};M.useEffect(()=>{if(O){const T=f.getValues("startDate"),H=f.getValues("endDate");if(T&&H&&!ea(H,T)){const E=$(T,H);f.setValue("workingDays",E)}}},[f.watch("startDate"),f.watch("endDate"),O]),M.useEffect(()=>{const T=f.watch("absenceType");T==="annual_leave"?(f.setValue("absenceCode","CO"),f.setValue("medicalLeaveCode","")):T==="medical_leave"?f.setValue("absenceCode","CM"):T==="unpaid_leave"?(f.setValue("absenceCode","CFS"),f.setValue("medicalLeaveCode","")):T==="study_leave"?(f.setValue("absenceCode","CS"),f.setValue("medicalLeaveCode","")):T==="special_leave"&&(f.setValue("absenceCode","CE"),f.setValue("medicalLeaveCode","")),T!=="medical_leave"&&(f.setValue("medicalCertificateNumber",""),f.setValue("medicalCertificateDate",void 0),f.setValue("medicalCertificateIssuedBy",""),f.setValue("medicalLeaveCode",""))},[f.watch("absenceType")]);const le=T=>{p(T)},Y=f.watch("absenceType")==="medical_leave",N=T=>{if(J(T),T){const H=f.getValues("startDate"),E=f.getValues("endDate");if(H&&E&&!ea(E,H)){const P=$(H,E);f.setValue("workingDays",P)}}};return e.jsx(Ks,{...f,children:e.jsx("form",{onSubmit:f.handleSubmit(le),className:"space-y-6",children:e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Înregistrare absență"}),e.jsx(Be,{children:"Completați informațiile despre absența angajatului"})]}),e.jsxs(pe,{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(eg,{className:"h-5 w-5"}),"Informații generale"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:f.control,name:"employeeId",render:({field:T})=>e.jsxs(S,{children:[e.jsx(_,{children:"Angajat"}),e.jsxs(Pe,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați angajatul"})})}),e.jsx(Le,{children:R?e.jsx(w,{value:"loading",disabled:!0,children:"Se încarcă angajații..."}):U.length===0?e.jsx(w,{value:"none",disabled:!0,children:"Nu există angajați"}):U.map(H=>e.jsxs(w,{value:H.id,children:[H.lastName," ",H.firstName]},H.id))})]}),e.jsx(Q,{children:"Selectați angajatul pentru care înregistrați absența"}),e.jsx(k,{})]})}),e.jsx(C,{control:f.control,name:"absenceType",render:({field:T})=>e.jsxs(S,{children:[e.jsx(_,{children:"Tip absență"}),e.jsxs(Pe,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați tipul de absență"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"annual_leave",children:"Concediu de odihnă (CO)"}),e.jsx(w,{value:"medical_leave",children:"Concediu medical (CM)"}),e.jsx(w,{value:"unpaid_leave",children:"Concediu fără salariu (CFS)"}),e.jsx(w,{value:"study_leave",children:"Concediu de studii (CS)"}),e.jsx(w,{value:"special_leave",children:"Concediu evenimente speciale (CE)"}),e.jsx(w,{value:"other",children:"Altă absență"})]})]}),e.jsx(Q,{children:"Tipul de absență conform clasificării standard"}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.watch("absenceType")==="other"&&e.jsx(C,{control:f.control,name:"absenceCode",render:({field:T})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cod absență"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Introduceți codul de absență",...T})}),e.jsx(Q,{children:"Codul de absență specific (dacă este cazul)"}),e.jsx(k,{})]})}),e.jsx(C,{control:f.control,name:"status",render:({field:T})=>e.jsxs(S,{children:[e.jsx(_,{children:"Status"}),e.jsxs(Pe,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați statusul"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"pending",children:"În așteptare"}),e.jsx(w,{value:"approved",children:"Aprobat"}),e.jsx(w,{value:"rejected",children:"Respins"})]})]}),e.jsx(Q,{children:"Statusul curent al absenței"}),e.jsx(k,{})]})})]})]}),e.jsx(gs,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(xa,{className:"h-5 w-5"}),"Perioadă absență"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:f.control,name:"startDate",render:({field:T})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsx(_,{children:"Data de început"}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:`w-full pl-3 text-left font-normal ${!T.value&&"text-muted-foreground"}`,children:[T.value?vn(T.value,"PPP",{locale:cn}):e.jsx("span",{children:"Selectați data de început"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"center",children:e.jsx(fs,{mode:"single",selected:T.value,onSelect:T.onChange,disabled:H=>ng(H,f.getValues("endDate")),initialFocus:!0,locale:cn})})]}),e.jsx(Q,{children:"Prima zi de absență"}),e.jsx(k,{})]})}),e.jsx(C,{control:f.control,name:"endDate",render:({field:T})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsx(_,{children:"Data de sfârșit"}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:`w-full pl-3 text-left font-normal ${!T.value&&"text-muted-foreground"}`,children:[T.value?vn(T.value,"PPP",{locale:cn}):e.jsx("span",{children:"Selectați data de sfârșit"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"center",children:e.jsx(fs,{mode:"single",selected:T.value,onSelect:T.onChange,disabled:H=>ea(H,f.getValues("startDate")),initialFocus:!0,locale:cn})})]}),e.jsx(Q,{children:"Ultima zi de absență"}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(as,{id:"auto-calculate",checked:O,onCheckedChange:N}),e.jsx(sg,{htmlFor:"auto-calculate",children:"Calculează automat zilele lucrătoare"})]}),e.jsx(C,{control:f.control,name:"workingDays",render:({field:T})=>e.jsxs(S,{children:[e.jsx(_,{children:"Zile lucrătoare"}),e.jsx(A,{children:e.jsx(te,{type:"number",step:"0.5",placeholder:"0",...T,disabled:O,onChange:H=>{const E=H.target.value===""?"0":H.target.value;T.onChange(parseFloat(E))}})}),e.jsx(Q,{children:"Numărul de zile lucrătoare aferente perioadei de absență"}),e.jsx(k,{})]})}),f.watch("startDate")&&f.watch("endDate")&&e.jsxs(ls,{className:"mt-4 bg-primary/5 border border-primary/10",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx(cs,{children:"Informație"}),e.jsxs(os,{children:["Perioada selectată: ",f.watch("startDate")?vn(f.watch("startDate"),"PPP",{locale:cn}):"-"," -> ",f.watch("endDate")?vn(f.watch("endDate"),"PPP",{locale:cn}):"-",e.jsx("br",{}),"Durată totală: ",f.watch("startDate")&&f.watch("endDate")?Math.ceil((f.watch("endDate").getTime()-f.watch("startDate").getTime())/(1e3*60*60*24))+1:0," zile calendaristice",e.jsx("br",{}),"Zile lucrătoare: ",f.watch("workingDays")," zile"]})]})]})]}),e.jsx(gs,{}),Y&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(rg,{className:"h-5 w-5"}),"Certificat medical ",e.jsx(mn,{variant:"outline",className:"ml-1",children:"CM"})]}),e.jsxs(ls,{className:"mb-4",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx(cs,{children:"Document obligatoriu"}),e.jsx(os,{children:"Concediul medical trebuie obligatoriu să aibă atașat certificatul medical în original."})]}),e.jsx(C,{control:f.control,name:"medicalLeaveCode",render:({field:T})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cod concediu medical"}),e.jsxs(Pe,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați codul de concediu medical"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"01",children:"01 - Boală obișnuită"}),e.jsx(w,{value:"02",children:"02 - Accident în timpul deplasării la/de la locul de muncă"}),e.jsx(w,{value:"03",children:"03 - Accident de muncă"}),e.jsx(w,{value:"04",children:"04 - Boală profesională"}),e.jsx(w,{value:"05",children:"05 - Urgență medico-chirurgicală"}),e.jsx(w,{value:"06",children:"06 - Carantină"}),e.jsx(w,{value:"07",children:"07 - Sarcină și lăuzie"}),e.jsx(w,{value:"08",children:"08 - Îngrijire copil bolnav"}),e.jsx(w,{value:"09",children:"09 - Risc maternal"}),e.jsx(w,{value:"10",children:"10 - Recuperare capacitate de muncă"}),e.jsx(w,{value:"11",children:"11 - Tuberculoză, SIDA"}),e.jsx(w,{value:"12",children:"12 - Afecțiuni cardiovasculare"}),e.jsx(w,{value:"13",children:"13 - Neoplazii, cancer"}),e.jsx(w,{value:"14",children:"14 - Alte boli specifice"})]})]}),e.jsx(Q,{children:"Codul de concediu medical conform standardelor CNAS"}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:f.control,name:"medicalCertificateNumber",render:({field:T})=>e.jsxs(S,{children:[e.jsx(_,{children:"Număr certificat medical"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Introduceți numărul certificatului",...T})}),e.jsx(Q,{children:"Numărul oficial al certificatului medical"}),e.jsx(k,{})]})}),e.jsx(C,{control:f.control,name:"medicalCertificateDate",render:({field:T})=>e.jsxs(S,{className:"flex flex-col",children:[e.jsx(_,{children:"Data eliberare certificat"}),e.jsxs(hs,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(A,{children:e.jsxs(F,{variant:"outline",className:`w-full pl-3 text-left font-normal ${!T.value&&"text-muted-foreground"}`,children:[T.value?vn(T.value,"PPP",{locale:cn}):e.jsx("span",{children:"Selectați data eliberării"}),e.jsx(Sn,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(ps,{className:"w-auto p-0",align:"center",children:e.jsx(fs,{mode:"single",selected:T.value,onSelect:T.onChange,initialFocus:!0,locale:cn})})]}),e.jsx(Q,{children:"Data la care a fost eliberat certificatul medical"}),e.jsx(k,{})]})})]}),e.jsx(C,{control:f.control,name:"medicalCertificateIssuedBy",render:({field:T})=>e.jsxs(S,{children:[e.jsx(_,{children:"Emitent certificat medical"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Introduceți numele medicului/unității medicale",...T})}),e.jsx(Q,{children:"Instituția medicală sau medicul care a emis certificatul"}),e.jsx(k,{})]})})]}),e.jsx(gs,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(on,{className:"h-5 w-5"}),"Observații și detalii suplimentare"]}),e.jsx(C,{control:f.control,name:"notes",render:({field:T})=>e.jsxs(S,{children:[e.jsx(_,{children:"Observații"}),e.jsx(A,{children:e.jsx(Ls,{placeholder:"Observații privind absența",className:"resize-none min-h-[150px]",...T})}),e.jsx(Q,{children:"Detalii suplimentare despre această absență, motive, sau alte informații relevante"}),e.jsx(k,{})]})}),c&&c.status==="rejected"&&c.rejectionReason&&e.jsxs(ls,{variant:"destructive",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx(cs,{children:"Absență respinsă"}),e.jsxs(os,{children:["Motiv respingere: ",c.rejectionReason]})]}),c&&c.approvedBy&&c.approvedAt&&e.jsxs(ls,{variant:"default",className:"bg-green-50 border-green-200 text-green-800",children:[e.jsx(hr,{className:"h-4 w-4"}),e.jsx(cs,{children:"Absență aprobată"}),e.jsxs(os,{children:["Aprobată la data: ",vn(new Date(c.approvedAt),"PPP",{locale:cn})]})]})]})]}),e.jsxs(xr,{className:"flex justify-end gap-2 pt-6 border-t",children:[e.jsx(F,{type:"button",variant:"outline",onClick:()=>window.history.back(),disabled:i,children:"Anulează"}),e.jsx(F,{type:"submit",disabled:i,className:"gap-2",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Se salvează..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Dr,{className:"h-4 w-4"}),c?"Actualizează absența":"Salvează absența"]})})]})]})})})},Vi=()=>{const c=ct().id,i=!c,[ne,Z]=Ln(),[ae,O]=M.useState(!1),J=tg(),D=new URLSearchParams(J).get("employeeId")||void 0,{useAbsence:R,useCreateAbsence:U,useUpdateAbsence:v}=_n(),{data:K,isLoading:V,isError:G,refetch:f}=R(c||""),$=K==null?void 0:K.data,{mutate:le}=U(),{mutate:Y}=v(),N=T=>{O(!0),i?le(T,{onSuccess:()=>{O(!1),Z("/hr/absences")},onError:()=>{O(!1)}}):c&&Y({id:c,data:T},{onSuccess:()=>{O(!1),f()},onError:()=>{O(!1)}})},me=()=>{if($)return{id:$.id,employeeId:$.employeeId,absenceType:$.absenceType,absenceCode:$.absenceCode||"",medicalLeaveCode:$.medicalLeaveCode||"",startDate:new Date($.startDate),endDate:new Date($.endDate),workingDays:typeof $.workingDays=="string"?parseFloat($.workingDays):$.workingDays,status:$.status,notes:$.notes||"",medicalCertificateNumber:$.medicalCertificateNumber||"",medicalCertificateDate:$.medicalCertificateDate?new Date($.medicalCertificateDate):void 0,medicalCertificateIssuedBy:$.medicalCertificateIssuedBy||"",approvedBy:$.approvedBy,approvedAt:$.approvedAt,rejectionReason:$.rejectionReason,createdAt:$.createdAt,updatedAt:$.updatedAt}};return e.jsxs(xn,{activeTab:"absences",title:i?"Absență nouă":($==null?void 0:$.employeeName)||"Detalii absență",subtitle:i?"Înregistrați o nouă absență în sistem":$?`${vn(new Date($.startDate),"dd MMM yyyy",{locale:cn})} - ${vn(new Date($.endDate),"dd MMM yyyy",{locale:cn})}`:"Se încarcă...",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(F,{variant:"ghost",onClick:()=>Z("/hr/absences"),className:"flex items-center",children:[e.jsx(ot,{className:"mr-2 h-4 w-4"}),"Înapoi la absențe"]})}),G&&!i&&e.jsxs(ls,{variant:"destructive",className:"mb-6",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx(cs,{children:"Eroare la încărcarea absenței"}),e.jsx(os,{children:"Nu s-au putut încărca informațiile absenței. Încercați să reîmprospătați pagina sau contactați administratorul."})]}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:i?"Absență nouă":"Detalii absență"}),e.jsx(Be,{children:i?"Introduceți informațiile pentru absența nouă":"Vizualizare și editare informații absență"})]}),e.jsx(pe,{children:V&&!i?e.jsxs("div",{className:"space-y-4",children:[e.jsx(In,{className:"h-8 w-1/2"}),e.jsx(In,{className:"h-12 w-full"}),e.jsx(In,{className:"h-12 w-full"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(In,{className:"h-12 w-full"}),e.jsx(In,{className:"h-12 w-full"})]}),e.jsx(In,{className:"h-24 w-full"})]}):e.jsx(Pg,{onSubmit:N,initialData:i?void 0:me(),isSubmitting:ae,defaultEmployeeId:D})})]})]})},Rg=()=>{var q,Qe,he;const[p,c]=Ln(),i=new Date,ne=i.getFullYear(),Z=i.getMonth()+1,[ae,O]=M.useState(1),[J,B]=M.useState(10),[D,R]=M.useState("lastName"),[U,v]=M.useState("asc"),[K,V]=M.useState(""),[G,f]=M.useState(),[$,le]=M.useState(ne),[Y,N]=M.useState(Z),{useDepartments:me}=_n(),{data:T,isLoading:H,refetch:E}=ln({queryKey:["/api/hr/payroll",$,Y,ae,J,K,G],queryFn:async()=>{const ee=new URLSearchParams;return ee.append("year",$.toString()),ee.append("month",Y.toString()),ee.append("page",ae.toString()),ee.append("pageSize",J.toString()),K&&ee.append("search",K),G&&ee.append("departmentId",G),await Ie(`/api/hr/payroll?${ee.toString()}`)}}),{data:P}=ln({queryKey:["/api/hr/employees",1,100,"",!0],queryFn:async()=>{const ee=new URLSearchParams;return ee.append("page","1"),ee.append("pageSize","100"),ee.append("activeOnly","true"),await Ie(`/api/hr/employees?${ee.toString()}`)}}),{data:we}=me(),{mutate:j}=Cn({mutationFn:async ee=>await Ie("POST","/api/hr/payroll/run"),onSuccess:()=>{E()}}),fe=((q=T==null?void 0:T.data)==null?void 0:q.items)||[],Ue=((Qe=T==null?void 0:T.data)==null?void 0:Qe.total)||0;(he=P==null?void 0:P.data)!=null&&he.items;const b=(we==null?void 0:we.data)||[],W=ee=>["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"][ee-1],u=fe.reduce((ee,Ke)=>ee+Ke.grossSalary,0),ie=fe.reduce((ee,Ke)=>ee+Ke.netSalary,0),se=fe.reduce((ee,Ke)=>ee+Ke.totalTaxes,0),Ye=ee=>{const Ke=b.find(fr=>fr.id===ee);return Ke?Ke.name:"Nedefinit"},ke=ee=>{D===ee?v(U==="asc"?"desc":"asc"):(R(ee),v("asc"))},He=()=>{j({year:$,month:Y},{onSuccess:()=>{E()}})},pn=ee=>{c(`/hr/payroll/${ee}`)},Fn=Array.from({length:6},(ee,Ke)=>ne-Ke),de=Array.from({length:12},(ee,Ke)=>Ke+1);return e.jsx(xn,{activeTab:"payroll",title:"Salarizare",subtitle:"Gestionarea și calculul salariilor",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(tn,{title:"Salarii brute",value:mr(u),icon:e.jsx(Oi,{size:20}),color:"primary"}),e.jsx(tn,{title:"Salarii nete",value:mr(ie),icon:e.jsx(Oi,{size:20}),color:"success"}),e.jsx(tn,{title:"Taxe și contribuții",value:mr(se),icon:e.jsx(Lo,{size:20}),color:"warning"}),e.jsx(tn,{title:"Angajați",value:Ue.toString(),icon:e.jsx(Xn,{size:20}),color:"secondary"})]}),e.jsx(ue,{children:e.jsx(Se,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(_e,{children:["Salarizare ",W(Y)," ",$]}),e.jsx(Be,{children:"Gestionați salariile angajaților pentru perioada selectată"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-end",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Pe,{value:Y.toString(),onValueChange:ee=>N(parseInt(ee)),children:[e.jsx(Re,{className:"w-[150px]",children:e.jsx(De,{placeholder:"Luna"})}),e.jsx(Le,{children:de.map(ee=>e.jsx(w,{value:ee.toString(),children:W(ee)},ee))})]}),e.jsxs(Pe,{value:$.toString(),onValueChange:ee=>le(parseInt(ee)),children:[e.jsx(Re,{className:"w-[100px]",children:e.jsx(De,{placeholder:"Anul"})}),e.jsx(Le,{children:Fn.map(ee=>e.jsx(w,{value:ee.toString(),children:ee},ee))})]})]}),e.jsxs(F,{onClick:He,children:[e.jsx(Lo,{className:"mr-2 h-4 w-4"}),"Calcul salarizare"]})]})]})})}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"State de plată"}),e.jsxs(Be,{children:["Lista salariilor calculate pentru perioada ",W(Y)," ",$]})]}),e.jsxs(pe,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Caută angajat...",className:"pl-8 w-[200px]",value:K,onChange:ee=>V(ee.target.value)})]}),e.jsxs(Pe,{value:G||"all",onValueChange:ee=>f(ee==="all"?void 0:ee),children:[e.jsx(Re,{className:"w-[180px]",children:e.jsx(De,{placeholder:"Departament"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"all",children:"Toate departamentele"}),b.map(ee=>e.jsx(w,{value:ee.id,children:ee.name},ee.id))]})]}),e.jsx(F,{variant:"outline",size:"icon",onClick:()=>E(),children:e.jsx(Lr,{className:"h-4 w-4"})}),e.jsxs(F,{variant:"outline",className:"ml-auto",children:[e.jsx(Fr,{className:"mr-2 h-4 w-4"}),"Export Excel"]}),e.jsxs(F,{variant:"outline",children:[e.jsx(qo,{className:"mr-2 h-4 w-4"}),"Trimite fluturași"]})]}),e.jsxs(Ys,{children:[e.jsx(Qs,{children:e.jsxs(Ge,{children:[e.jsx(ye,{className:"cursor-pointer",onClick:()=>ke("lastName"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Nume angajat",D==="lastName"&&e.jsx($s,{className:"h-3 w-3"})]})}),e.jsx(ye,{children:"Departament"}),e.jsx(ye,{className:"cursor-pointer",onClick:()=>ke("grossSalary"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Salariu brut",D==="grossSalary"&&e.jsx($s,{className:"h-3 w-3"})]})}),e.jsx(ye,{children:"Taxe"}),e.jsx(ye,{className:"cursor-pointer",onClick:()=>ke("netSalary"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Salariu net",D==="netSalary"&&e.jsx($s,{className:"h-3 w-3"})]})}),e.jsx(ye,{className:"text-right",children:"Acțiuni"})]})}),e.jsx(Js,{children:H?e.jsx(Ge,{children:e.jsx(oe,{colSpan:6,className:"text-center",children:"Se încarcă salariile..."})}):fe.length===0?e.jsx(Ge,{children:e.jsx(oe,{colSpan:6,className:"text-center",children:'Nu există state de plată pentru perioada selectată. Folosiți butonul "Calcul salarizare" pentru a genera statele de plată.'})}):fe.map(ee=>e.jsxs(Ge,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>pn(ee.id),children:[e.jsxs(oe,{className:"font-medium",children:[ee.lastName," ",ee.firstName]}),e.jsx(oe,{children:Ye(ee.departmentId)}),e.jsxs(oe,{children:[mr(ee.grossSalary)," RON"]}),e.jsxs(oe,{children:[mr(ee.totalTaxes)," RON"]}),e.jsxs(oe,{children:[mr(ee.netSalary)," RON"]}),e.jsx(oe,{className:"text-right",children:e.jsx(F,{variant:"ghost",size:"icon",onClick:Ke=>{Ke.stopPropagation(),pn(ee.id)},children:e.jsx(on,{className:"h-4 w-4"})})})]},ee.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:fe.length})," din ",e.jsx("strong",{children:Ue})," salarii"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:()=>O(ae-1),disabled:ae===1,children:"Anterior"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>O(ae+1),disabled:fe.length<J,children:"Următor"})]})]})]})]}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Calendar salarizare"}),e.jsx(Be,{children:"Următoarele date importante pentru salarizare"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md",children:[e.jsx("div",{className:"bg-blue-100 text-blue-800 rounded-lg p-3",children:e.jsx(xa,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Plată salarii"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Luna ",W(Y)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[$,"-",Y.toString().padStart(2,"0"),"-10"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Data plății"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md",children:[e.jsx("div",{className:"bg-amber-100 text-amber-800 rounded-lg p-3",children:e.jsx(on,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Declarații fiscale"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Declarația 112"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[$,"-",Y.toString().padStart(2,"0"),"-25"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Termen limită"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md",children:[e.jsx("div",{className:"bg-green-100 text-green-800 rounded-lg p-3",children:e.jsx(Oi,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Plată contribuții"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"CAS, CASS, impozit"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[$,"-",Y.toString().padStart(2,"0"),"-25"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Termen limită"})]})]})]})})]})]})})},Dg=()=>{const c=ct().id,[i,ne]=Ln();return e.jsxs(xn,{activeTab:"payroll",title:"Detalii salariu",subtitle:`ID salariu: ${c}`,children:[e.jsxs("div",{className:"mb-4 flex justify-between",children:[e.jsxs(F,{variant:"ghost",onClick:()=>ne("/hr/payroll"),className:"flex items-center",children:[e.jsx(ot,{className:"mr-2 h-4 w-4"}),"Înapoi la salarizare"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{variant:"outline",className:"flex items-center",children:[e.jsx($o,{className:"mr-2 h-4 w-4"}),"Tipărire fluturași"]}),e.jsxs(F,{variant:"outline",className:"flex items-center",children:[e.jsx(Fr,{className:"mr-2 h-4 w-4"}),"Export PDF"]})]})]}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Detalii salariu"}),e.jsx(Be,{children:"Vizualizare detalii salariu pentru perioada curentă"})]}),e.jsx(pe,{children:e.jsx("p",{children:"Detalii salariu vor fi afișate aici"})})]})]})},Lg=()=>{const[p,c]=M.useState("employees"),[i,ne]=M.useState(new Date().getFullYear().toString()),[Z,ae]=M.useState((new Date().getMonth()+1).toString()),[O,J]=M.useState("pdf"),{toast:B}=Ns(),D=[{id:"employees",name:"Rapoarte angajați",icon:e.jsx(Xn,{className:"h-5 w-5"}),reports:[{id:"employee-list",name:"Listă angajați",description:"Raport complet cu toți angajații activi"},{id:"employee-birthdays",name:"Zile de naștere",description:"Calendar zile de naștere angajați"},{id:"employee-analysis",name:"Analiză personal",description:"Statistici și grafice despre angajați"},{id:"employee-certifications",name:"Certificate și competențe",description:"Raport certificate angajați"}]},{id:"payroll",name:"Rapoarte salarizare",icon:e.jsx(Wi,{className:"h-5 w-5"}),reports:[{id:"payroll-summary",name:"Situație salarii",description:"Raport centralizator salarii"},{id:"payroll-analysis",name:"Analiză salarizare",description:"Analiză detaliată salarii și bonusuri"},{id:"salary-comparisons",name:"Comparație salarii",description:"Comparație salarii pe departamente"},{id:"tax-report",name:"Raport impozite",description:"Centralizator impozite și contribuții"}]},{id:"absences",name:"Rapoarte absențe",icon:e.jsx(Sn,{className:"h-5 w-5"}),reports:[{id:"absence-summary",name:"Situație concedii",description:"Centralizator concedii pe departamente"},{id:"absence-trends",name:"Tendințe absențe",description:"Analiză absențe pe perioade"},{id:"sick-leave-report",name:"Concedii medicale",description:"Raport concedii medicale"},{id:"absence-balances",name:"Sold zile concediu",description:"Situație zile concediu disponibile"}]},{id:"time",name:"Rapoarte de timp",icon:e.jsx(ra,{className:"h-5 w-5"}),reports:[{id:"time-sheets",name:"Pontaje",description:"Situație pontaje pe departamente"},{id:"overtime-report",name:"Raport ore suplimentare",description:"Centralizator ore suplimentare"},{id:"attendance-report",name:"Raport prezență",description:"Situație prezență angajați"},{id:"lateness-report",name:"Raport întârzieri",description:"Analiză întârzieri"}]}];D.find(U=>U.id===p);const R=U=>{B({title:"Raport în curs de generare",description:"Raportul va fi disponibil în câteva momente"}),setTimeout(()=>{B({title:"Raport generat cu succes",description:"Raportul a fost generat și este gata pentru descărcare"})},1500)};return e.jsx(xn,{activeTab:"reports",title:"Rapoarte HR",subtitle:"Generare și management rapoarte HR",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ue,{children:[e.jsxs(Se,{className:"pb-3",children:[e.jsx(_e,{children:"Control rapoarte"}),e.jsx(Be,{children:"Selectați perioada și formatul pentru rapoarte"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"An"}),e.jsxs(Pe,{value:i,onValueChange:ne,children:[e.jsx(Re,{className:"w-32",children:e.jsx(De,{placeholder:"Selectează anul"})}),e.jsx(Le,{children:[...Array(5)].map((U,v)=>{const K=(new Date().getFullYear()-2+v).toString();return e.jsx(w,{value:K,children:K},K)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Lună"}),e.jsxs(Pe,{value:Z,onValueChange:ae,children:[e.jsx(Re,{className:"w-40",children:e.jsx(De,{placeholder:"Selectează luna"})}),e.jsx(Le,{children:[...Array(12)].map((U,v)=>{const K=(v+1).toString(),V=vn(new Date(2024,v,1),"LLLL",{locale:cn});return e.jsx(w,{value:K,children:V.charAt(0).toUpperCase()+V.slice(1)},K)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Format"}),e.jsxs(Pe,{value:O,onValueChange:J,children:[e.jsx(Re,{className:"w-40",children:e.jsx(De,{placeholder:"Selectează formatul"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"pdf",children:"PDF"}),e.jsx(w,{value:"excel",children:"Excel"}),e.jsx(w,{value:"csv",children:"CSV"})]})]})]}),e.jsx("div",{className:"ml-auto",children:e.jsxs(F,{variant:"outline",children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Filtre avansate"]})})]})})]}),e.jsxs(Xs,{defaultValue:"employees",value:p,onValueChange:c,children:[e.jsx(er,{className:"grid grid-cols-4 mb-6",children:D.map(U=>e.jsxs(en,{value:U.id,className:"flex items-center",children:[U.icon&&e.jsx("span",{className:"mr-2",children:U.icon}),U.name]},U.id))}),D.map(U=>e.jsx(hn,{value:U.id,className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:U.reports.map(v=>e.jsxs(ue,{children:[e.jsxs(Se,{className:"pb-3",children:[e.jsxs(_e,{className:"flex items-center",children:[e.jsx(on,{className:"h-5 w-5 mr-2 text-primary"}),v.name]}),e.jsx(Be,{children:v.description})]}),e.jsxs(xr,{className:"border-t pt-4 pb-2 flex justify-between",children:[e.jsxs(F,{variant:"outline",size:"sm",children:[e.jsx(ag,{className:"h-4 w-4 mr-2"}),"Previzualizare"]}),e.jsxs(F,{size:"sm",onClick:()=>R(v.id),children:[e.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Generează"]})]})]},v.id))})},U.id))]})]})})},Vo=()=>{var me,T;const[p,c]=Ln(),[i,ne]=M.useState(""),[Z,ae]=M.useState(1),[O,J]=M.useState("all"),B=10,{useCorOccupations:D,useCorGroups:R}=_n(),{data:U,isLoading:v,isError:K}=D({page:Z,limit:B,search:i,group:O==="all"?"":O}),{data:V}=R(),G=(V==null?void 0:V.data)||[],f=((me=U==null?void 0:U.data)==null?void 0:me.items)||[],$=((T=U==null?void 0:U.data)==null?void 0:T.total)||0,le=Math.ceil($/B),Y=H=>{ae(H)},N=()=>{let H=[];H.push(e.jsx(is,{children:e.jsx(Yo,{onClick:()=>Y(Math.max(1,Z-1)),disabled:Z===1})},"prev"));let P=Math.max(1,Z-Math.floor(5/2)),we=Math.min(le,P+5-1);we-P+1<5&&(P=Math.max(1,we-5+1)),P>1&&(H.push(e.jsx(is,{children:e.jsx(na,{onClick:()=>Y(1),children:"1"})},"1")),P>2&&H.push(e.jsx(is,{children:e.jsx(Ki,{})},"start-ellipsis")));for(let j=P;j<=we;j++)H.push(e.jsx(is,{children:e.jsx(na,{onClick:()=>Y(j),isActive:Z===j,children:j})},j));return we<le&&(we<le-1&&H.push(e.jsx(is,{children:e.jsx(Ki,{})},"end-ellipsis")),H.push(e.jsx(is,{children:e.jsx(na,{onClick:()=>Y(le),children:le})},le))),H.push(e.jsx(is,{children:e.jsx(Qo,{onClick:()=>Y(Math.min(le,Z+1)),disabled:Z===le||le===0})},"next")),H};return e.jsx(xn,{activeTab:"cor",title:"Clasificarea Ocupațiilor din România (COR)",subtitle:"Consultă și caută ocupații conform nomenclatorului COR",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Căutare ocupații COR"}),e.jsx(Be,{children:"Caută după cod COR sau denumire ocupație"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Caută după cod sau denumire...",className:"pl-10",value:i,onChange:H=>ne(H.target.value)})]})}),e.jsxs("div",{className:"w-full md:w-auto min-w-[200px]",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Filtrează după grupă"}),e.jsxs(Pe,{value:O,onValueChange:J,children:[e.jsx(Re,{children:e.jsx(De,{placeholder:"Toate grupele"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"all",children:"Toate grupele"}),G.map(H=>e.jsxs(w,{value:H.id.toString(),children:[H.code," - ",H.name]},H.id))]})]})]}),e.jsxs(F,{variant:"outline",className:"flex gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),e.jsx("span",{children:"Filtre avansate"})]}),e.jsxs(F,{variant:"outline",className:"flex gap-2",children:[e.jsx(Fr,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})})]}),e.jsxs(ue,{children:[e.jsx(Se,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Ocupații COR"}),e.jsxs(Be,{children:[$," ocupații disponibile"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ho,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Nomenclator complet COR 2023/2024"})]})]})}),e.jsx(pe,{children:v?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Se încarcă datele..."})}):K?e.jsxs("div",{className:"text-center py-8 text-destructive",children:[e.jsx("p",{children:"A apărut o eroare la încărcarea datelor."}),e.jsx(F,{variant:"outline",onClick:()=>window.location.reload(),className:"mt-4",children:"Reîncarcă"})]}):f.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(on,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"Nu au fost găsite ocupații conform criteriilor de căutare."}),e.jsx("p",{className:"text-sm mt-2",children:"Încercați o căutare diferită sau resetați filtrele."}),e.jsx(F,{variant:"outline",onClick:()=>{ne(""),J("all")},className:"mt-4",children:"Resetează filtrele"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ys,{children:[e.jsx(Qs,{children:e.jsxs(Ge,{children:[e.jsx(ye,{className:"w-[150px]",children:"Cod COR"}),e.jsx(ye,{children:"Denumire ocupație"}),e.jsx(ye,{className:"w-[180px]",children:"Grupa"}),e.jsx(ye,{className:"w-[100px] text-right",children:"Acțiuni"})]})}),e.jsx(Js,{children:f.map(H=>e.jsxs(Ge,{children:[e.jsx(oe,{className:"font-medium",children:H.code}),e.jsx(oe,{children:H.name}),e.jsx(oe,{children:H.groupName}),e.jsx(oe,{className:"text-right",children:e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>c(`/hr/cor/${H.id}`),children:"Detalii"})})]},H.id))})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:f.length})," din ",e.jsx("strong",{children:$})," ocupații"]}),e.jsx(Ko,{children:e.jsx(Zo,{children:N()})})]})]})})]}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Despre clasificarea COR"}),e.jsx(Be,{children:"Informații despre nomenclatorul clasificării ocupațiilor din România"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{children:"Clasificarea Ocupațiilor din România (COR) reprezintă sistemul de identificare, ierarhizare și codificare a ocupațiilor din economia națională."}),e.jsx("p",{children:"COR este utilizat pentru completarea documentelor oficiale, aplicarea politicilor în domeniul forței de muncă, pentru sistemele de evidență și prelucrarea statisitică a datelor privind ocupațiile."}),e.jsx("p",{children:"Structura COR este compatibilă cu Clasificarea Internațională Standard a Ocupațiilor (ISCO-08) elaborată de Organizația Internațională a Muncii (OIM)."})]})})]})]})})},Pr=p=>{if(p==null)return"";const c=typeof p=="string"?parseFloat(p):p;return isNaN(c)?"":new Intl.NumberFormat("ro-RO",{style:"currency",currency:"RON",minimumFractionDigits:2,maximumFractionDigits:2}).format(c)},Fg=p=>{const c=p.replace(/[^\d,.-]/g,"").replace(/\./g,"").replace(/,/g,"."),i=parseFloat(c);return isNaN(i)?0:i},Yi=M.forwardRef(({value:p,onValueChange:c,symbol:i="RON",locale:ne="ro-RO",...Z},ae)=>{const[O,J]=M.useState("");M.useEffect(()=>{if(p||p===0){const R=typeof p=="string"?parseFloat(p):p,U=new Intl.NumberFormat(ne,{minimumFractionDigits:2,maximumFractionDigits:2}).format(R);J(U)}else J("")},[p,ne]);const B=R=>{const U=R.target.value;if(!U.trim()){J(""),c(0);return}const v=U.replace(/[^\d,.-]/g,"");J(v);const K=Fg(v);c(K)},D=()=>{if(p){const R=typeof p=="string"?parseFloat(p):p,U=new Intl.NumberFormat(ne,{minimumFractionDigits:2,maximumFractionDigits:2}).format(R);J(U)}};return e.jsxs("div",{className:"relative",children:[e.jsx(te,{...Z,ref:ae,value:O,onChange:B,onBlur:D,className:`${Z.className||""} pl-10`}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:i})]})});Yi.displayName="CurrencyInput";const Og={calculated:"bg-blue-500",approved:"bg-green-500",paid:"bg-emerald-700",cancelled:"bg-red-500",pending:"bg-amber-500"},kg={calculated:"Calculat",approved:"Aprobat",paid:"Plătit",cancelled:"Anulat",pending:"În așteptare"},Bo=()=>{var V,G;const[p,c]=M.useState("pending"),[i,ne]=M.useState("current"),[Z,ae]=M.useState(1),O=10,{data:J,isLoading:B,error:D}=ln({queryKey:["/api/hr/commissions",Z,O,p,i],queryFn:async()=>await(await Ie("GET",`/api/hr/commissions?page=${Z}&limit=${O}&status=${p}&month=${i}`)).json()}),{data:R,isLoading:U}=ln({queryKey:["/api/hr/commissions/stats"],queryFn:async()=>await(await Ie("GET","/api/hr/commissions/stats")).json()}),v=[{value:"current",label:"Luna curentă"},{value:"last",label:"Luna trecută"},{value:"all",label:"Toate"}],K=[{value:"all",label:"Toate"},{value:"pending",label:"În așteptare"},{value:"calculated",label:"Calculat"},{value:"approved",label:"Aprobat"},{value:"paid",label:"Plătit"},{value:"cancelled",label:"Anulat"}];return e.jsxs(xn,{title:"Comisioane",subtitle:"Gestionați comisioanele pentru agenții de vânzări",activeTab:"commissions",action:{label:"Adaugă comision",href:"/hr/commissions/new",icon:e.jsx(it,{className:"h-4 w-4 mr-2"})},children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(ue,{children:[e.jsxs(Se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(_e,{className:"text-sm font-medium",children:"Total Comisioane"}),e.jsx(mn,{variant:"outline",className:"font-normal",children:"Luna curentă"})]}),e.jsxs(pe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:U?e.jsx(qn,{className:"h-4 w-4 animate-spin"}):Pr((R==null?void 0:R.totalAmount)||0)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[U?"-":(R==null?void 0:R.totalCount)||0," comisioane"]})]})]}),e.jsxs(ue,{children:[e.jsxs(Se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(_e,{className:"text-sm font-medium",children:"În așteptare"}),e.jsx(mn,{variant:"secondary",children:"Necesită aprobare"})]}),e.jsxs(pe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:U?e.jsx(qn,{className:"h-4 w-4 animate-spin"}):Pr((R==null?void 0:R.pendingAmount)||0)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[U?"-":(R==null?void 0:R.pendingCount)||0," comisioane"]})]})]}),e.jsxs(ue,{children:[e.jsxs(Se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(_e,{className:"text-sm font-medium",children:"Aprobate"}),e.jsx(mn,{variant:"outline",className:"bg-green-500 text-white",children:"Aprobate"})]}),e.jsxs(pe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:U?e.jsx(qn,{className:"h-4 w-4 animate-spin"}):Pr((R==null?void 0:R.approvedAmount)||0)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[U?"-":(R==null?void 0:R.approvedCount)||0," comisioane"]})]})]}),e.jsxs(ue,{children:[e.jsxs(Se,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(_e,{className:"text-sm font-medium",children:"Plătite"}),e.jsx(mn,{variant:"outline",className:"bg-emerald-700 text-white",children:"Plătite"})]}),e.jsxs(pe,{children:[e.jsx("div",{className:"text-2xl font-bold",children:U?e.jsx(qn,{className:"h-4 w-4 animate-spin"}):Pr((R==null?void 0:R.paidAmount)||0)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[U?"-":(R==null?void 0:R.paidCount)||0," comisioane"]})]})]})]}),e.jsxs(ue,{className:"mt-6",children:[e.jsxs(Se,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Lista comisioane"}),e.jsx(Be,{children:"Gestionați și filtrați comisioanele agenților de vânzări"})]}),e.jsxs(F,{variant:"outline",onClick:()=>{},className:"mt-2 sm:mt-0",children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Filtrează"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(Pe,{defaultValue:p,onValueChange:f=>c(f),children:[e.jsx(Re,{children:e.jsx(De,{placeholder:"Status"})}),e.jsx(Le,{children:K.map(f=>e.jsx(w,{value:f.value,children:f.label},f.value))})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(Pe,{defaultValue:i,onValueChange:f=>ne(f),children:[e.jsx(Re,{children:e.jsx(De,{placeholder:"Perioadă"})}),e.jsx(Le,{children:v.map(f=>e.jsx(w,{value:f.value,children:f.label},f.value))})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(te,{placeholder:"Caută după nume, cod sau agent..."})})]})]}),e.jsx(pe,{children:e.jsxs(Ys,{children:[e.jsx(Qs,{children:e.jsxs(Ge,{children:[e.jsx(ye,{children:"ID"}),e.jsx(ye,{children:"Agent"}),e.jsx(ye,{children:"Denumire"}),e.jsx(ye,{children:"Suma vânzare"}),e.jsx(ye,{children:"Comision"}),e.jsx(ye,{children:"Status"}),e.jsx(ye,{children:"Data"})]})}),e.jsx(Js,{children:B?e.jsx(Ge,{children:e.jsxs(oe,{colSpan:7,className:"text-center py-6",children:[e.jsx(qn,{className:"h-6 w-6 animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Se încarcă comisioanele..."})]})}):D?e.jsx(Ge,{children:e.jsx(oe,{colSpan:7,className:"text-center py-6 text-red-500",children:"Eroare la încărcarea datelor. Vă rugăm încercați din nou."})}):((V=J==null?void 0:J.items)==null?void 0:V.length)===0?e.jsx(Ge,{children:e.jsxs(oe,{colSpan:7,className:"text-center py-6",children:[e.jsx("p",{className:"text-muted-foreground",children:"Nu există comisioane de afișat"}),e.jsxs(F,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>window.location.href="/hr/commissions/new",children:[e.jsx(it,{className:"h-4 w-4 mr-2"}),"Adaugă comision nou"]})]})}):(G=J==null?void 0:J.items)==null?void 0:G.map(f=>{var $,le;return e.jsxs(Ge,{children:[e.jsx(oe,{className:"font-medium",children:f.id.slice(0,8)}),e.jsxs(oe,{children:[($=f.employee)==null?void 0:$.firstName," ",(le=f.employee)==null?void 0:le.lastName]}),e.jsx(oe,{children:f.name}),e.jsx(oe,{children:Pr(f.saleAmount)}),e.jsx(oe,{children:Pr(f.commissionAmount)}),e.jsx(oe,{children:e.jsx(mn,{className:`${Og[f.status]||"bg-gray-500"}`,children:kg[f.status]||f.status})}),e.jsx(oe,{children:new Date(f.createdAt).toLocaleDateString("ro-RO")})]},f.id)})})]})})]})]})};var Jo=(p=>(p.FIXED="fixed",p.PERCENTAGE="percentage",p.TIERED_PERCENTAGE="tiered_percentage",p.PROGRESSIVE="progressive",p.TEAM="team",p.MIXED="mixed",p))(Jo||{}),Xo=(p=>(p.CALCULATED="calculated",p.APPROVED="approved",p.PAID="paid",p.CANCELLED="cancelled",p))(Xo||{});const Mg=be.object({name:be.string().min(3,{message:"Numele comisionului trebuie să aibă cel puțin 3 caractere"}),description:be.string().optional(),employeeId:be.string({required_error:"Vă rugăm să selectați un angajat"}),type:be.nativeEnum(Jo,{required_error:"Vă rugăm să selectați un tip de comision"}),saleAmount:be.number({required_error:"Vă rugăm să introduceți suma vânzării"}).min(.01,{message:"Suma vânzării trebuie să fie mai mare de 0"}),commissionAmount:be.number().optional(),commissionRate:be.number().optional(),status:be.nativeEnum(Xo).default("calculated"),referenceNumber:be.string().optional(),referenceDate:be.string().optional(),notes:be.string().optional(),isPaid:be.boolean().default(!1),isRecurring:be.boolean().default(!1),recurringFrequency:be.string().optional(),applyTaxes:be.boolean().default(!0)}),Vg={fixed:"Sumă fixă",percentage:"Procent din vânzare",tiered_percentage:"Procent progresiv pe nivele",progressive:"Rată progresivă în funcție de volum",team:"Comision de echipă",mixed:"Comision mixt"},Bg={calculated:"Calculat",approved:"Aprobat",paid:"Plătit",cancelled:"Anulat"},Ug=({defaultValues:p,commissionId:c,onSuccess:i,rules:ne})=>{const{toast:Z}=Ns(),[ae,O]=M.useState(null),{data:J,isLoading:B}=ln({queryKey:["/api/hr/employees/by-role","sales"],queryFn:async()=>await(await Ie("GET","/api/hr/employees/by-role?role=sales")).json()}),D=Gs({resolver:Hs(Mg),defaultValues:p||{name:"",description:"",employeeId:"",type:"percentage",saleAmount:0,commissionAmount:0,commissionRate:0,status:"calculated",referenceNumber:"",referenceDate:new Date().toISOString().split("T")[0],notes:"",isPaid:!1,isRecurring:!1,recurringFrequency:"monthly",applyTaxes:!0}});M.useEffect(()=>{c&&(async()=>{try{const V=await(await Ie("GET",`/api/hr/commissions/${c}`)).json();V&&(D.reset({...V,referenceDate:V.referenceDate?new Date(V.referenceDate).toISOString().split("T")[0]:void 0}),V.commissionAmount&&O(V.commissionAmount))}catch(K){console.error("Error fetching commission data:",K),Z({title:"Eroare",description:"Nu s-a putut încărca comisionul. Încercați din nou.",variant:"destructive"})}})()},[c,D,Z]);const R=Cn({mutationFn:async v=>c?await(await Ie("PATCH",`/api/hr/commissions/${c}`)).json():await(await Ie("POST","/api/hr/commissions")).json(),onSuccess:v=>{Z({title:c?"Comision actualizat":"Comision creat",description:c?"Comisionul a fost actualizat cu succes.":"Comisionul a fost creat cu succes."}),ta.invalidateQueries({queryKey:["/api/hr/commissions"]}),i&&i(v)},onError:v=>{Z({title:"Eroare",description:`Nu s-a putut ${c?"actualiza":"crea"} comisionul. ${v.message}`,variant:"destructive"})}});M.useEffect(()=>{const v=()=>{const V=D.watch("type"),G=D.watch("saleAmount"),f=D.watch("commissionRate");if(V==="percentage"&&G&&f){const $=G*f/100;O($),D.setValue("commissionAmount",$)}else V==="fixed"&&O(D.watch("commissionAmount")||0)};v();const K=D.watch((V,{name:G})=>{["type","saleAmount","commissionRate"].includes(G)&&v()});return()=>K.unsubscribe()},[D]);const U=v=>{R.mutate(v)};return e.jsx(Ks,{...D,children:e.jsxs("form",{onSubmit:D.handleSubmit(U),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Informații de bază"}),e.jsx(C,{control:D.control,name:"name",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Denumire comision"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Denumire comision",...v})}),e.jsx(k,{})]})}),e.jsx(C,{control:D.control,name:"employeeId",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Agent vânzări"}),e.jsxs(Pe,{onValueChange:v.onChange,defaultValue:v.value,value:v.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați agentul de vânzări"})})}),e.jsx(Le,{children:B?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(qn,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{children:"Se încarcă..."})]}):J&&J.length>0?J.map(K=>e.jsxs(w,{value:K.id,children:[K.firstName," ",K.lastName]},K.id)):e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:"Nu există agenți disponibili"})})]}),e.jsx(k,{})]})}),e.jsx(C,{control:D.control,name:"description",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Descriere (opțional)"}),e.jsx(A,{children:e.jsx(Ls,{placeholder:"Descrierea comisionului",className:"resize-none",...v})}),e.jsx(k,{})]})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Detalii comision"}),e.jsx(C,{control:D.control,name:"type",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Tip comision"}),e.jsxs(Pe,{onValueChange:v.onChange,defaultValue:v.value,value:v.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați tipul de comision"})})}),e.jsx(Le,{children:Object.entries(Vg).map(([K,V])=>e.jsx(w,{value:K,children:V},K))})]}),e.jsx(k,{})]})}),e.jsx(C,{control:D.control,name:"saleAmount",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Valoare vânzare"}),e.jsx(A,{children:e.jsx(Yi,{value:v.value,onValueChange:K=>v.onChange(K),placeholder:"0.00"})}),e.jsx(k,{})]})}),D.watch("type")==="percentage"&&e.jsx(C,{control:D.control,name:"commissionRate",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Procent comision (%)"}),e.jsx(A,{children:e.jsxs("div",{className:"relative",children:[e.jsx(te,{type:"number",step:"0.01",...v,onChange:K=>v.onChange(parseFloat(K.target.value)),className:"pr-8"}),e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center",children:"%"})]})}),e.jsx(k,{})]})}),D.watch("type")==="fixed"&&e.jsx(C,{control:D.control,name:"commissionAmount",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Sumă comision"}),e.jsx(A,{children:e.jsx(Yi,{value:v.value||0,onValueChange:K=>v.onChange(K),placeholder:"0.00"})}),e.jsx(k,{})]})}),ae!==null&&D.watch("type")==="percentage"&&e.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:"Comision calculat:"}),e.jsx("span",{className:"text-lg font-bold ml-2",children:new Intl.NumberFormat("ro-RO",{style:"currency",currency:"RON"}).format(ae)})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Opțiuni și setări"}),e.jsx(C,{control:D.control,name:"status",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Status"}),e.jsxs(Pe,{onValueChange:v.onChange,defaultValue:v.value,value:v.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați statusul"})})}),e.jsx(Le,{children:Object.entries(Bg).map(([K,V])=>e.jsx(w,{value:K,children:V},K))})]}),e.jsx(k,{})]})}),e.jsx(C,{control:D.control,name:"referenceNumber",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Număr de referință (opțional)"}),e.jsx(A,{children:e.jsx(te,{...v,placeholder:"e.g. REF-2025-0001"})}),e.jsx(k,{})]})}),e.jsx(C,{control:D.control,name:"referenceDate",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Data de referință"}),e.jsx(A,{children:e.jsx(te,{type:"date",...v})}),e.jsx(k,{})]})}),e.jsx(C,{control:D.control,name:"applyTaxes",render:({field:v})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:v.value,onCheckedChange:v.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Aplică taxe"}),e.jsx(Q,{children:"Dacă este bifat, se vor aplica taxele standard pe comisioane"})]})]})})]})})]}),e.jsx(gs,{className:"my-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Informații suplimentare"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(C,{control:D.control,name:"notes",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Note (opțional)"}),e.jsx(A,{children:e.jsx(Ls,{placeholder:"Note și observații legate de acest comision",className:"resize-none",rows:4,...v})}),e.jsx(k,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{control:D.control,name:"isRecurring",render:({field:v})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:v.value,onCheckedChange:v.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Comision recurent"}),e.jsx(Q,{children:"Dacă este bifat, comisionul va fi aplicat recurent"})]})]})}),D.watch("isRecurring")&&e.jsx(C,{control:D.control,name:"recurringFrequency",render:({field:v})=>e.jsxs(S,{children:[e.jsx(_,{children:"Frecvență"}),e.jsxs(Pe,{onValueChange:v.onChange,defaultValue:v.value,value:v.value,children:[e.jsx(A,{children:e.jsx(Re,{children:e.jsx(De,{placeholder:"Selectați frecvența"})})}),e.jsxs(Le,{children:[e.jsx(w,{value:"weekly",children:"Săptămânal"}),e.jsx(w,{value:"monthly",children:"Lunar"}),e.jsx(w,{value:"quarterly",children:"Trimestrial"}),e.jsx(w,{value:"yearly",children:"Anual"})]})]}),e.jsx(k,{})]})}),e.jsx(C,{control:D.control,name:"isPaid",render:({field:v})=>e.jsxs(S,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(A,{children:e.jsx(vs,{checked:v.value,onCheckedChange:v.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:"Comision plătit"}),e.jsx(Q,{children:"Bifați dacă comisionul a fost deja plătit"})]})]})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx(F,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Anulează"}),e.jsx(F,{type:"submit",disabled:R.isPending,children:R.isPending?e.jsxs(e.Fragment,{children:[e.jsx(qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Se salvează..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Dr,{className:"mr-2 h-4 w-4"}),c?"Actualizează comision":"Salvează comision"]})})]})]})})},Wg=()=>{const{toast:p}=Ns(),{data:c}=ln({queryKey:["/api/hr/commissions/rules"],queryFn:async()=>await(await Ie("GET","/api/hr/commissions/rules")).json()}),i=ne=>{p({title:"Comision creat cu succes",description:`Comisionul pentru ${ne.employeeName} a fost adăugat.`}),ta.invalidateQueries({queryKey:["/api/hr/commissions"]}),window.location.href="/hr/commissions"};return e.jsx(xn,{title:"Adaugă comision nou",subtitle:"Creează un nou comision pentru agenții de vânzări",activeTab:"commissions",backLink:{label:"Înapoi la lista de comisioane",href:"/hr/commissions"},children:e.jsx(ue,{children:e.jsx(pe,{className:"pt-6",children:e.jsx(Ug,{onSuccess:i,rules:c})})})})},Bi=()=>{var b,W;const[p,c]=Ln(),{toast:i}=Ns(),[ne,Z]=M.useState("operations"),[ae,O]=M.useState(1),[J,B]=M.useState(""),[D,R]=M.useState("all"),[U,v]=M.useState(!1),K=10,{data:V,isLoading:G,isError:f}=ln({queryKey:["/api/hr/revisal/operations",ae,K,J,D],queryFn:async()=>{const u=new URLSearchParams({page:ae.toString(),limit:K.toString()});return J&&u.append("search",J),D!=="all"&&u.append("status",D),await(await Ie("GET",`/api/hr/revisal/operations?${u.toString()}`)).json()}}),{data:$}=ln({queryKey:["/api/hr/revisal/stats"],queryFn:async()=>await(await Ie("GET","/api/hr/revisal/stats")).json()}),le=($==null?void 0:$.data)||{total:0,pending:0,completed:0,lastUpdate:"",nextUpdate:""},Y=((b=V==null?void 0:V.data)==null?void 0:b.items)||[],N=((W=V==null?void 0:V.data)==null?void 0:W.total)||0,me=Math.ceil(N/K),T=u=>{O(u)},H=Cn({mutationFn:async u=>await(await Ie("POST","/api/hr/revisal/upload")).json(),onSuccess:u=>{i({title:"Fișier încărcat cu succes",description:"Fișierul a fost încărcat și va fi procesat în curând."}),v(!1),ta.invalidateQueries({queryKey:["/api/hr/revisal/operations"]}),ta.invalidateQueries({queryKey:["/api/hr/revisal/stats"]})},onError:u=>{i({title:"Eroare",description:`Nu s-a putut încărca fișierul. ${u.message}`,variant:"destructive"})}}),E=()=>{v(!0)},P=u=>{u.preventDefault();const ie=new FormData(u.currentTarget);H.mutate(ie)},we=async()=>{try{i({title:"Descărcare inițiată",description:"Fișierul Revisal va fi descărcat în curând."}),setTimeout(()=>{i({title:"Notă",description:"În implementarea reală, acesta ar descărca un fișier Revisal."})},1500)}catch{i({title:"Eroare",description:"Nu s-a putut descărca fișierul Revisal.",variant:"destructive"})}},j=u=>{switch(u){case"pending":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"completed":return"bg-green-100 text-green-800 hover:bg-green-200";case"processing":return"bg-blue-100 text-blue-800 hover:bg-blue-200";case"failed":return"bg-red-100 text-red-800 hover:bg-red-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},fe=u=>{switch(u){case"pending":return e.jsx(ra,{className:"h-4 w-4"});case"completed":return e.jsx(pr,{className:"h-4 w-4"});case"processing":return e.jsx(Lr,{className:"h-4 w-4"});case"failed":return e.jsx(Ds,{className:"h-4 w-4"});default:return e.jsx(ig,{className:"h-4 w-4"})}},Ue=u=>{switch(u){case"hire":return"Angajare nouă";case"terminate":return"Încetare contract";case"modify":return"Modificare contract";case"suspend":return"Suspendare contract";case"resume":return"Reluare activitate";case"transfer":return"Transfer";default:return"Operație"}};return e.jsxs(xn,{activeTab:"revisal",title:"Registrul Revisal",subtitle:"Gestionarea registrului general de evidență a salariaților",children:[e.jsx(qi,{open:U,onOpenChange:v,children:e.jsxs($i,{children:[e.jsxs(Gi,{children:[e.jsx(Hi,{children:"Încarcă fișier Revisal"}),e.jsx(Po,{children:"Încarcă un fișier Revisal (.rvs) pentru procesare. Acesta va fi validat și procesat."})]}),e.jsxs("form",{onSubmit:P,className:"space-y-6 pt-2",children:[e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx("label",{htmlFor:"revisalFile",className:"text-sm font-medium",children:"Fișier Revisal"}),e.jsx(te,{id:"revisalFile",name:"revisalFile",type:"file",accept:".rvs,.RVS,.xml,.XML",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Formatele acceptate: .rvs, .xml"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Descriere (opțional)"}),e.jsx(Ls,{id:"description",name:"description",placeholder:"Descriere pentru această operație...",className:"resize-none",rows:3})]}),e.jsxs(Ro,{children:[e.jsx(F,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Anulează"}),e.jsx(F,{type:"submit",disabled:H.isPending,children:H.isPending?e.jsxs(e.Fragment,{children:[e.jsx(qn,{className:"h-4 w-4 mr-2 animate-spin"}),"Se încarcă..."]}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Încarcă"]})})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ue,{children:e.jsxs(pe,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total operații"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:le.total})]}),e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx(on,{className:"h-5 w-5 text-primary"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm",children:e.jsx("span",{className:"text-muted-foreground",children:"Toate operațiile din registrul Revisal"})})]})}),e.jsx(ue,{children:e.jsxs(pe,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"În așteptare"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:le.pending})]}),e.jsx("div",{className:"bg-yellow-100 p-2 rounded-full",children:e.jsx(ra,{className:"h-5 w-5 text-yellow-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm",children:e.jsx("span",{className:"text-muted-foreground",children:"Operații în așteptare care necesită procesare"})})]})}),e.jsx(ue,{children:e.jsxs(pe,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Operații finalizate"}),e.jsx("h3",{className:"text-2xl font-bold mt-1",children:le.completed})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:e.jsx(pr,{className:"h-5 w-5 text-green-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm",children:e.jsx("span",{className:"text-muted-foreground",children:"Operații procesate cu succes"})})]})}),e.jsx(ue,{children:e.jsxs(pe,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Următoarea actualizare"}),e.jsx("h3",{className:"text-lg font-bold mt-1",children:le.nextUpdate||"Neplanificată"})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(Sn,{className:"h-5 w-5 text-blue-600"})})]}),e.jsx("div",{className:"mt-4 flex items-center text-sm",children:e.jsxs("span",{className:"text-muted-foreground",children:["Ultima actualizare: ",le.lastUpdate||"Niciodată"]})})]})})]}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Acțiuni rapide"}),e.jsx(Be,{children:"Acțiuni pentru gestionarea registrului Revisal"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ue,{className:"bg-muted/40",children:e.jsxs(pe,{className:"p-4 flex flex-col items-center text-center",children:[e.jsx(tt,{className:"h-8 w-8 mb-2 text-primary"}),e.jsx("h3",{className:"font-medium mb-1",children:"Încarcă registru"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Încarcă un fișier Revisal pentru procesare"}),e.jsx(F,{onClick:E,size:"sm",className:"w-full",children:"Încarcă fișier"})]})}),e.jsx(ue,{className:"bg-muted/40",children:e.jsxs(pe,{className:"p-4 flex flex-col items-center text-center",children:[e.jsx(Fr,{className:"h-8 w-8 mb-2 text-primary"}),e.jsx("h3",{className:"font-medium mb-1",children:"Descarcă registru"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Descarcă registrul Revisal în format .rvs"}),e.jsx(F,{onClick:we,size:"sm",variant:"outline",className:"w-full",children:"Descarcă fișier"})]})}),e.jsx(ue,{className:"bg-muted/40",children:e.jsxs(pe,{className:"p-4 flex flex-col items-center text-center",children:[e.jsx(Ho,{className:"h-8 w-8 mb-2 text-primary"}),e.jsx("h3",{className:"font-medium mb-1",children:"Validare registru"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Verifică și validează registrul în format electronic"}),e.jsx(F,{variant:"outline",size:"sm",className:"w-full",children:"Validează registru"})]})})]})})]}),e.jsxs(ue,{children:[e.jsx(Se,{className:"pb-0",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Operații Revisal"}),e.jsx(Be,{children:"Istoricul operațiilor efectuate în registrul Revisal"})]}),e.jsxs(F,{onClick:()=>c("/hr/revisal/new"),children:[e.jsx(it,{className:"h-4 w-4 mr-2"}),"Operație nouă"]})]})}),e.jsx(pe,{className:"pt-6",children:e.jsxs(Xs,{defaultValue:"operations",value:ne,onValueChange:Z,children:[e.jsxs(er,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(en,{value:"operations",children:[e.jsx(on,{className:"h-4 w-4 mr-2"}),"Operații"]}),e.jsxs(en,{value:"employees",children:[e.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Salariați"]}),e.jsxs(en,{value:"logs",children:[e.jsx(Do,{className:"h-4 w-4 mr-2"}),"Loguri și erori"]})]}),e.jsxs(hn,{value:"operations",className:"mt-0 p-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Zs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(te,{placeholder:"Caută după angajat sau CNP...",className:"pl-10",value:J,onChange:u=>B(u.target.value)})]}),e.jsx("div",{className:"w-full md:w-auto min-w-[200px]",children:e.jsxs(Pe,{value:D,onValueChange:R,children:[e.jsx(Re,{children:e.jsx(De,{placeholder:"Toate statusurile"})}),e.jsxs(Le,{children:[e.jsx(w,{value:"all",children:"Toate statusurile"}),e.jsx(w,{value:"pending",children:"În așteptare"}),e.jsx(w,{value:"processing",children:"În procesare"}),e.jsx(w,{value:"completed",children:"Finalizate"}),e.jsx(w,{value:"failed",children:"Eșuate"})]})]})}),e.jsxs(F,{variant:"outline",className:"flex gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),e.jsx("span",{children:"Filtre"})]})]}),G?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Se încarcă datele..."})}):f?e.jsxs("div",{className:"text-center py-8 text-destructive",children:[e.jsx("p",{children:"A apărut o eroare la încărcarea datelor."}),e.jsx(F,{variant:"outline",onClick:()=>window.location.reload(),className:"mt-4",children:"Reîncarcă"})]}):Y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(on,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-20"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nu există operații"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto mb-6",children:"Nu au fost găsite operații Revisal pentru criteriile selectate."}),e.jsxs(F,{onClick:()=>c("/hr/revisal/new"),children:[e.jsx(it,{className:"h-4 w-4 mr-2"}),"Adaugă operație nouă"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ys,{children:[e.jsx(Qs,{children:e.jsxs(Ge,{children:[e.jsx(ye,{children:"Tip operație"}),e.jsx(ye,{children:"Angajat"}),e.jsx(ye,{children:"CNP"}),e.jsx(ye,{children:"Data operației"}),e.jsx(ye,{children:"Status"}),e.jsx(ye,{className:"text-right",children:"Acțiuni"})]})}),e.jsx(Js,{children:Y.map(u=>e.jsxs(Ge,{children:[e.jsx(oe,{children:Ue(u.type)}),e.jsx(oe,{children:e.jsx("div",{className:"font-medium",children:u.employeeName})}),e.jsx(oe,{children:u.employeeCnp}),e.jsx(oe,{children:lt(u.date)}),e.jsx(oe,{children:e.jsxs(mn,{variant:"outline",className:`flex items-center gap-1 w-fit ${j(u.status)}`,children:[fe(u.status),e.jsxs("span",{children:[u.status==="pending"&&"În așteptare",u.status==="processing"&&"În procesare",u.status==="completed"&&"Finalizat",u.status==="failed"&&"Eșuat"]})]})}),e.jsx(oe,{className:"text-right",children:e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>c(`/hr/revisal/${u.id}`),children:"Detalii"})})]},u.id))})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:Y.length})," din ",e.jsx("strong",{children:N})," operații"]}),e.jsx(Ko,{children:e.jsxs(Zo,{children:[e.jsx(is,{children:e.jsx(Yo,{onClick:()=>T(Math.max(1,ae-1)),disabled:ae===1})}),Array.from({length:Math.min(5,me)},(u,ie)=>{const se=ie+1;return e.jsx(is,{children:e.jsx(na,{onClick:()=>T(se),isActive:ae===se,children:se})},se)}),me>5&&e.jsx(is,{children:e.jsx(Ki,{})}),e.jsx(is,{children:e.jsx(Qo,{onClick:()=>T(Math.min(me,ae+1)),disabled:ae===me||me===0})})]})})]})]})]}),e.jsx(hn,{value:"employees",className:"mt-0 p-0",children:e.jsx("div",{className:"flex justify-center items-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Zi,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-20"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Informații salariați"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto mb-6",children:"Această secțiune va afișa un raport cu toți salariații înregistrați în Revisal."})]})})}),e.jsx(hn,{value:"logs",className:"mt-0 p-0",children:e.jsx("div",{className:"flex justify-center items-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Do,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-20"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Loguri și erori"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto mb-6",children:"Această secțiune va afișa logurile și erorile întâmpinate la procesarea operațiilor Revisal."})]})})})]})})]}),e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Ghid Revisal"}),e.jsx(Be,{children:"Informații despre utilizarea registrului Revisal"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(ue,{children:[e.jsxs(Se,{className:"pb-2",children:[e.jsx(_e,{className:"text-base",children:"HG 905/2017"}),e.jsx(Be,{children:"Hotărârea Guvernului privind registrul general de evidență a salariaților"})]}),e.jsx(pe,{className:"pt-0",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Registrul general de evidență a salariaților este reglementat prin HG 905/2017. Află mai multe despre obligațiile legale."})}),e.jsx(xr,{className:"pt-0",children:e.jsxs(F,{variant:"outline",size:"sm",className:"w-full",children:["Vezi legislația",e.jsx(rt,{className:"ml-2 h-4 w-4"})]})})]}),e.jsxs(ue,{children:[e.jsxs(Se,{className:"pb-2",children:[e.jsx(_e,{className:"text-base",children:"Termene legale"}),e.jsx(Be,{children:"Termene pentru transmiterea datelor în Revisal"})]}),e.jsx(pe,{className:"pt-0",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Orice modificare a datelor de identificare ale angajatorului sau ale salariatului trebuie transmisă în Revisal în termen de 3 zile lucrătoare."})}),e.jsx(xr,{className:"pt-0",children:e.jsxs(F,{variant:"outline",size:"sm",className:"w-full",children:["Vezi toate termenele",e.jsx(rt,{className:"ml-2 h-4 w-4"})]})})]}),e.jsxs(ue,{children:[e.jsxs(Se,{className:"pb-2",children:[e.jsx(_e,{className:"text-base",children:"Proceduri de lucru"}),e.jsx(Be,{children:"Proceduri pentru gestionarea corectă a registrului"})]}),e.jsx(pe,{className:"pt-0",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Consultă procedurile de lucru pentru gestionarea eficientă a registrului Revisal și evitarea erorilor frecvente."})}),e.jsx(xr,{className:"pt-0",children:e.jsxs(F,{variant:"outline",size:"sm",className:"w-full",children:["Vezi procedurile",e.jsx(rt,{className:"ml-2 h-4 w-4"})]})})]})]})})]})]}),e.jsx(qi,{open:U,onOpenChange:v,children:e.jsxs($i,{children:[e.jsxs(Gi,{children:[e.jsx(Hi,{children:"Încarcă fișier Revisal"}),e.jsx(Po,{children:"Încarcă un fișier Revisal în format .rvs pentru procesare"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center",children:[e.jsx(tt,{className:"h-8 w-8 mb-2 text-muted-foreground"}),e.jsx("h3",{className:"font-medium mb-1",children:"Trage fișierul aici"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3 text-center",children:"Sau fă click pentru a selecta fișierul (format .rvs)"}),e.jsx(F,{variant:"outline",size:"sm",children:"Selectează fișier"})]}),e.jsxs("div",{className:"text-sm mt-2",children:[e.jsx("p",{className:"font-medium",children:"Validarea fișierului:"}),e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Verificare format"}),e.jsx(mn,{variant:"outline",className:"bg-green-100 text-green-800",children:"Validat"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Verificare angajați"}),e.jsx(Go,{value:33,className:"h-2 w-20"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Verificare contracte"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"În așteptare"})]})]})]})]}),e.jsxs(Ro,{children:[e.jsx(F,{variant:"outline",onClick:()=>v(!1),children:"Anulează"}),e.jsx(F,{type:"submit",children:"Încarcă și procesează"})]})]})})]})},qg=()=>{const[p,c]=M.useState("general"),{toast:i}=Ns(),{useHrSettings:ne,useUpdateHrSettings:Z}=_n(),{data:ae,isLoading:O,isError:J}=ne(),B=(ae==null?void 0:ae.data)||{},{mutate:D,isLoading:R}=Z(),U=Rr({companyName:xe().min(2,"Numele companiei trebuie să aibă cel puțin 2 caractere"),companyRegistrationNumber:xe(),fiscalCode:xe(),address:xe(),city:xe(),county:xe(),postalCode:xe(),country:xe(),phone:xe(),email:xe().email("Adresa de email trebuie să fie validă"),website:xe().url("Website-ul trebuie să fie o adresă URL validă").optional().or(lg("")),contactPerson:xe(),contactEmail:xe().email("Adresa de email trebuie să fie validă"),contactPhone:xe()}),v=Rr({defaultProbationPeriod:js.number().min(0,"Perioada de probă trebuie să fie un număr pozitiv"),defaultWorkingHours:js.number().min(0,"Orele de lucru trebuie să fie un număr pozitiv"),defaultVacationDays:js.number().min(0,"Zilele de concediu trebuie să fie un număr pozitiv"),defaultSickDays:js.number().min(0,"Zilele medicale trebuie să fie un număr pozitiv"),defaultNoticePeriod:js.number().min(0,"Perioada de preaviz trebuie să fie un număr pozitiv"),enableAutoCalculateVacationDays:Wn(),enableAutoCalculateSeniority:Wn(),enableContractNotifications:Wn(),enableBirthdayNotifications:Wn()}),K=Rr({anafIntegrationEnabled:Wn(),anafApiKey:xe().optional(),anafUsername:xe().optional(),anafPassword:xe().optional(),revisalIntegrationEnabled:Wn(),revisalApiKey:xe().optional(),sendgridEnabled:Wn(),sendgridApiKey:xe().optional(),stripeEnabled:Wn(),stripeApiKey:xe().optional()}),V=Gs({resolver:Hs(U),defaultValues:{companyName:B.companyName||"",companyRegistrationNumber:B.companyRegistrationNumber||"",fiscalCode:B.fiscalCode||"",address:B.address||"",city:B.city||"",county:B.county||"",postalCode:B.postalCode||"",country:B.country||"România",phone:B.phone||"",email:B.email||"",website:B.website||"",contactPerson:B.contactPerson||"",contactEmail:B.contactEmail||"",contactPhone:B.contactPhone||""}}),G=Gs({resolver:Hs(v),defaultValues:{defaultProbationPeriod:B.defaultProbationPeriod||90,defaultWorkingHours:B.defaultWorkingHours||40,defaultVacationDays:B.defaultVacationDays||21,defaultSickDays:B.defaultSickDays||5,defaultNoticePeriod:B.defaultNoticePeriod||30,enableAutoCalculateVacationDays:B.enableAutoCalculateVacationDays||!1,enableAutoCalculateSeniority:B.enableAutoCalculateSeniority||!0,enableContractNotifications:B.enableContractNotifications||!0,enableBirthdayNotifications:B.enableBirthdayNotifications||!0}}),f=Gs({resolver:Hs(K),defaultValues:{anafIntegrationEnabled:B.anafIntegrationEnabled||!1,anafApiKey:B.anafApiKey||"",anafUsername:B.anafUsername||"",anafPassword:B.anafPassword||"",revisalIntegrationEnabled:B.revisalIntegrationEnabled||!1,revisalApiKey:B.revisalApiKey||"",sendgridEnabled:B.sendgridEnabled||!1,sendgridApiKey:B.sendgridApiKey||"",stripeEnabled:B.stripeEnabled||!1,stripeApiKey:B.stripeApiKey||""}}),$=N=>{D({id:"general",data:N},{onSuccess:()=>{i({title:"Setări actualizate",description:"Setările generale au fost actualizate cu succes",variant:"default"})},onError:me=>{i({title:"Eroare",description:"A apărut o eroare la actualizarea setărilor",variant:"destructive"})}})},le=N=>{D({id:"hr",data:N},{onSuccess:()=>{i({title:"Setări actualizate",description:"Setările HR au fost actualizate cu succes",variant:"default"})},onError:me=>{i({title:"Eroare",description:"A apărut o eroare la actualizarea setărilor",variant:"destructive"})}})},Y=N=>{D({id:"integrations",data:N},{onSuccess:()=>{i({title:"Setări actualizate",description:"Setările de integrare au fost actualizate cu succes",variant:"default"})},onError:me=>{i({title:"Eroare",description:"A apărut o eroare la actualizarea setărilor",variant:"destructive"})}})};return O?e.jsx(xn,{activeTab:"settings",title:"Setări HR",subtitle:"Se încarcă...",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(qn,{className:"h-8 w-8 animate-spin text-border"}),e.jsx("p",{className:"text-muted-foreground ml-2",children:"Se încarcă setările..."})]})}):J?e.jsx(xn,{activeTab:"settings",title:"Eroare",subtitle:"Nu s-au putut încărca setările",children:e.jsx(ue,{children:e.jsx(pe,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:"A apărut o eroare la încărcarea setărilor"}),e.jsx(F,{variant:"outline",onClick:()=>window.location.reload(),children:"Reîncarcă"})]})})})}):e.jsx(xn,{activeTab:"settings",title:"Setări HR",subtitle:"Configurare și personalizare modul HR",children:e.jsx("div",{className:"space-y-6",children:e.jsxs(ue,{children:[e.jsxs(Se,{children:[e.jsx(_e,{children:"Personalizare HR"}),e.jsx(Be,{children:"Personalizează setările modulului HR pentru a se potrivi nevoilor companiei tale"})]}),e.jsx(pe,{children:e.jsxs(Xs,{defaultValue:"general",value:p,onValueChange:c,children:[e.jsxs(er,{className:"grid w-full grid-cols-3",children:[e.jsxs(en,{value:"general",children:[e.jsx(cg,{className:"h-4 w-4 mr-2"}),"General"]}),e.jsxs(en,{value:"hr",children:[e.jsx(Xn,{className:"h-4 w-4 mr-2"}),"HR"]}),e.jsxs(en,{value:"integrations",children:[e.jsx(Wo,{className:"h-4 w-4 mr-2"}),"Integrări"]})]}),e.jsx(hn,{value:"general",className:"py-4",children:e.jsx(Ks,{...V,children:e.jsxs("form",{onSubmit:V.handleSubmit($),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Informații companie"}),e.jsx(C,{control:V.control,name:"companyName",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Denumire companie"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Denumirea companiei",...N})}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(C,{control:V.control,name:"companyRegistrationNumber",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Număr de înregistrare"}),e.jsx(A,{children:e.jsx(te,{placeholder:"J40/1234/2020",...N})}),e.jsx(k,{})]})}),e.jsx(C,{control:V.control,name:"fiscalCode",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cod fiscal"}),e.jsx(A,{children:e.jsx(te,{placeholder:"RO12345678",...N})}),e.jsx(k,{})]})})]}),e.jsx(C,{control:V.control,name:"address",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Adresă"}),e.jsx(A,{children:e.jsx(Ls,{placeholder:"Adresa companiei",...N})}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(C,{control:V.control,name:"city",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Oraș"}),e.jsx(A,{children:e.jsx(te,{placeholder:"București",...N})}),e.jsx(k,{})]})}),e.jsx(C,{control:V.control,name:"county",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Județ"}),e.jsx(A,{children:e.jsx(te,{placeholder:"București",...N})}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(C,{control:V.control,name:"postalCode",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cod poștal"}),e.jsx(A,{children:e.jsx(te,{placeholder:"010123",...N})}),e.jsx(k,{})]})}),e.jsx(C,{control:V.control,name:"country",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Țară"}),e.jsx(A,{children:e.jsx(te,{placeholder:"România",...N})}),e.jsx(k,{})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Informații contact"}),e.jsx(C,{control:V.control,name:"phone",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Telefon"}),e.jsx(A,{children:e.jsx(te,{placeholder:"+4021 123 4567",...N})}),e.jsx(k,{})]})}),e.jsx(C,{control:V.control,name:"email",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Email"}),e.jsx(A,{children:e.jsx(te,{placeholder:"office@companie.ro",...N})}),e.jsx(k,{})]})}),e.jsx(C,{control:V.control,name:"website",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Website"}),e.jsx(A,{children:e.jsx(te,{placeholder:"https://www.companie.ro",...N})}),e.jsx(k,{})]})}),e.jsx(gs,{className:"my-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"Persoană de contact"}),e.jsx(C,{control:V.control,name:"contactPerson",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Nume persoană de contact"}),e.jsx(A,{children:e.jsx(te,{placeholder:"Ionescu Ion",...N})}),e.jsx(k,{})]})}),e.jsx(C,{control:V.control,name:"contactEmail",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Email persoană de contact"}),e.jsx(A,{children:e.jsx(te,{placeholder:"ion.ionescu@companie.ro",...N})}),e.jsx(k,{})]})}),e.jsx(C,{control:V.control,name:"contactPhone",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Telefon persoană de contact"}),e.jsx(A,{children:e.jsx(te,{placeholder:"+40722 123 456",...N})}),e.jsx(k,{})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(F,{type:"submit",disabled:R,children:[R&&e.jsx(qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvează setările generale"]})})]})})}),e.jsx(hn,{value:"hr",className:"py-4",children:e.jsx(Ks,{...G,children:e.jsxs("form",{onSubmit:G.handleSubmit(le),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Setări contracte"}),e.jsx(C,{control:G.control,name:"defaultProbationPeriod",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Perioadă de probă implicită (zile)"}),e.jsx(A,{children:e.jsx(te,{type:"number",min:"0",...N})}),e.jsx(Q,{children:"Perioada implicită de probă pentru noii angajați"}),e.jsx(k,{})]})}),e.jsx(C,{control:G.control,name:"defaultWorkingHours",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Ore de lucru implicite (săptămânal)"}),e.jsx(A,{children:e.jsx(te,{type:"number",min:"0",...N})}),e.jsx(Q,{children:"Orele de lucru implicite pe săptămână pentru contractele noi"}),e.jsx(k,{})]})}),e.jsx(C,{control:G.control,name:"defaultVacationDays",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Zile de concediu implicite (anual)"}),e.jsx(A,{children:e.jsx(te,{type:"number",min:"0",...N})}),e.jsx(Q,{children:"Zilele de concediu implicite anuale pentru contractele noi"}),e.jsx(k,{})]})}),e.jsx(C,{control:G.control,name:"defaultSickDays",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Zile medicale implicite (anual)"}),e.jsx(A,{children:e.jsx(te,{type:"number",min:"0",...N})}),e.jsx(Q,{children:"Zilele medicale implicite anuale pentru contractele noi"}),e.jsx(k,{})]})}),e.jsx(C,{control:G.control,name:"defaultNoticePeriod",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Perioadă de preaviz implicită (zile)"}),e.jsx(A,{children:e.jsx(te,{type:"number",min:"0",...N})}),e.jsx(Q,{children:"Perioada de preaviz implicită pentru contractele noi"}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Automatizări"}),e.jsx(C,{control:G.control,name:"enableAutoCalculateVacationDays",render:({field:N})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Calculare automată zile de concediu"}),e.jsx(Q,{children:"Calculează automat zilele de concediu în funcție de vechime"})]}),e.jsx(A,{children:e.jsx(as,{checked:N.value,onCheckedChange:N.onChange})})]})}),e.jsx(C,{control:G.control,name:"enableAutoCalculateSeniority",render:({field:N})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Calculare automată vechime"}),e.jsx(Q,{children:"Calculează automat vechimea în muncă a angajaților"})]}),e.jsx(A,{children:e.jsx(as,{checked:N.value,onCheckedChange:N.onChange})})]})}),e.jsx("h3",{className:"text-lg font-medium mt-6",children:"Notificări"}),e.jsx(C,{control:G.control,name:"enableContractNotifications",render:({field:N})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Notificări contract"}),e.jsx(Q,{children:"Trimite notificări pentru contracte care expiră"})]}),e.jsx(A,{children:e.jsx(as,{checked:N.value,onCheckedChange:N.onChange})})]})}),e.jsx(C,{control:G.control,name:"enableBirthdayNotifications",render:({field:N})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Notificări aniversări"}),e.jsx(Q,{children:"Trimite notificări pentru zilele de naștere ale angajaților"})]}),e.jsx(A,{children:e.jsx(as,{checked:N.value,onCheckedChange:N.onChange})})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(F,{type:"submit",disabled:R,children:[R&&e.jsx(qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvează setările HR"]})})]})})}),e.jsx(hn,{value:"integrations",className:"py-4",children:e.jsx(Ks,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(Y),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"ANAF"}),e.jsx(C,{control:f.control,name:"anafIntegrationEnabled",render:({field:N})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Integrare ANAF"}),e.jsx(Q,{children:"Activează integrarea cu sistemul ANAF"})]}),e.jsx(A,{children:e.jsx(as,{checked:N.value,onCheckedChange:N.onChange})})]})}),f.watch("anafIntegrationEnabled")&&e.jsxs(e.Fragment,{children:[e.jsx(C,{control:f.control,name:"anafApiKey",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cheie API ANAF"}),e.jsx(A,{children:e.jsx(te,{type:"password",...N})}),e.jsx(k,{})]})}),e.jsx(C,{control:f.control,name:"anafUsername",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Utilizator ANAF"}),e.jsx(A,{children:e.jsx(te,{...N})}),e.jsx(k,{})]})}),e.jsx(C,{control:f.control,name:"anafPassword",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Parolă ANAF"}),e.jsx(A,{children:e.jsx(te,{type:"password",...N})}),e.jsx(k,{})]})})]}),e.jsx(gs,{className:"my-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"Revisal"}),e.jsx(C,{control:f.control,name:"revisalIntegrationEnabled",render:({field:N})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Integrare Revisal"}),e.jsx(Q,{children:"Activează integrarea cu sistemul Revisal"})]}),e.jsx(A,{children:e.jsx(as,{checked:N.value,onCheckedChange:N.onChange})})]})}),f.watch("revisalIntegrationEnabled")&&e.jsx(C,{control:f.control,name:"revisalApiKey",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cheie API Revisal"}),e.jsx(A,{children:e.jsx(te,{type:"password",...N})}),e.jsx(k,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"SendGrid"}),e.jsx(C,{control:f.control,name:"sendgridEnabled",render:({field:N})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Integrare SendGrid"}),e.jsx(Q,{children:"Activează integrarea cu SendGrid pentru email"})]}),e.jsx(A,{children:e.jsx(as,{checked:N.value,onCheckedChange:N.onChange})})]})}),f.watch("sendgridEnabled")&&e.jsx(C,{control:f.control,name:"sendgridApiKey",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cheie API SendGrid"}),e.jsx(A,{children:e.jsx(te,{type:"password",...N})}),e.jsx(k,{})]})}),e.jsx(gs,{className:"my-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"Stripe"}),e.jsx(C,{control:f.control,name:"stripeEnabled",render:({field:N})=>e.jsxs(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{className:"text-base",children:"Integrare Stripe"}),e.jsx(Q,{children:"Activează integrarea cu Stripe pentru plăți"})]}),e.jsx(A,{children:e.jsx(as,{checked:N.value,onCheckedChange:N.onChange})})]})}),f.watch("stripeEnabled")&&e.jsx(C,{control:f.control,name:"stripeApiKey",render:({field:N})=>e.jsxs(S,{children:[e.jsx(_,{children:"Cheie API Stripe"}),e.jsx(A,{children:e.jsx(te,{type:"password",...N})}),e.jsx(k,{})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(F,{type:"submit",disabled:R,children:[R&&e.jsx(qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvează setările de integrare"]})})]})})})]})})]})})})},Hg=()=>e.jsx(og,{children:e.jsxs(dg,{children:[e.jsx(qe,{path:"/hr",component:xg}),e.jsx(qe,{path:"/hr/employees/new",component:bg}),e.jsx(qe,{path:"/hr/employees/:id/edit",component:Fo}),e.jsx(qe,{path:"/hr/employees/:id",component:Fo}),e.jsx(qe,{path:"/hr/employees",component:fg}),e.jsx(qe,{path:"/hr/contracts/new",component:ki}),e.jsx(qe,{path:"/hr/contracts/:id/edit",component:ki}),e.jsx(qe,{path:"/hr/contracts/:id",component:ki}),e.jsx(qe,{path:"/hr/contracts",component:yg}),e.jsx(qe,{path:"/hr/departments/new",component:Mi}),e.jsx(qe,{path:"/hr/departments/:id/edit",component:Mi}),e.jsx(qe,{path:"/hr/departments/:id",component:Mi}),e.jsx(qe,{path:"/hr/departments",component:Tg}),e.jsx(qe,{path:"/hr/absences/new",component:Vi}),e.jsx(qe,{path:"/hr/absences/:id/edit",component:Vi}),e.jsx(qe,{path:"/hr/absences/:id",component:Vi}),e.jsx(qe,{path:"/hr/absences",component:Ig}),e.jsx(qe,{path:"/hr/payroll/:id",component:Dg}),e.jsx(qe,{path:"/hr/payroll",component:Rg}),e.jsx(qe,{path:"/hr/reports",component:Lg}),e.jsx(qe,{path:"/hr/cor/:id",component:Vo}),e.jsx(qe,{path:"/hr/cor",component:Vo}),e.jsx(qe,{path:"/hr/commissions/new",component:Wg}),e.jsx(qe,{path:"/hr/commissions/:id",component:Bo}),e.jsx(qe,{path:"/hr/commissions",component:Bo}),e.jsx(qe,{path:"/hr/revisal/:id",component:Bi}),e.jsx(qe,{path:"/hr/revisal/new",component:Bi}),e.jsx(qe,{path:"/hr/revisal",component:Bi}),e.jsx(qe,{path:"/hr/settings",component:qg}),e.jsx(qe,{component:ug})]})});export{Hg as default};
