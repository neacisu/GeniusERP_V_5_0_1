import{a as ie,u as te,r as n,d4 as ne,j as e,B as t,L as x,ao as z,af as ce,ag as re,ah as c,d0 as a,q as de,I as oe,by as he,a3 as I,a4 as L,a5 as E,a6 as F,a7 as i,b6 as xe,bu as ue,a1 as me,g as w,S as o,_ as V,h as W,aB as $,ax as B,$ as _,a0 as R,aS as je,aU as ge,aV as pe,aW as Ne,bC as fe,bD as ve,ai as H,aJ as Se,aK as we,ch as Ce,aM as be,cg as ye,aO as O,aN as h,M as Ae,aE as Te,aD as De,aH as C,ci as Me,aP as ke,cs as Pe,bN as U,d5 as ze,d6 as Ie}from"./index-BzQLEEGE.js";import{S as Le,a as Ee,b as Fe,c as He,d as Oe,e as Ue,f as Ve,g as We}from"./sheet-MC-BHhZs.js";const $e=s=>s?new Date(s).toLocaleDateString("ro-RO"):"-",Be=({type:s})=>{switch(s){case a.EMAIL:return e.jsx(C,{className:"h-4 w-4"});case a.SMS:return e.jsx(U,{className:"h-4 w-4"});case a.SOCIAL:return e.jsx(Ie,{className:"h-4 w-4"});case a.PUSH:return e.jsx(ze,{className:"h-4 w-4"});case a.WHATSAPP:return e.jsx(U,{className:"h-4 w-4"});case a.MULTI_CHANNEL:return e.jsx(Pe,{className:"h-4 w-4"});default:return e.jsx(C,{className:"h-4 w-4"})}},_e=({template:s,onEdit:b,onDelete:u,onToggleStatus:m,onDuplicate:j})=>e.jsxs(w,{className:"overflow-hidden",children:[s.previewImage&&e.jsxs("div",{className:"aspect-video w-full relative overflow-hidden bg-muted",children:[e.jsx("img",{src:s.previewImage,alt:s.name,className:"object-cover w-full h-full"}),e.jsx(H,{className:"absolute top-2 right-2",variant:"outline",children:s.type===a.EMAIL?"Email":s.type===a.SMS?"SMS":s.type===a.SOCIAL?"Social":s.type===a.PUSH?"Push":s.type===a.WHATSAPP?"WhatsApp":"Multi-canal"})]}),e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{type:s.type}),e.jsx(_,{className:"ml-2 text-lg",children:s.name})]}),e.jsx(H,{variant:"outline",className:s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:s.isActive?"Activ":"Inactiv"})]}),e.jsx(R,{className:"line-clamp-2 mt-1",children:s.description||"Fără descriere"})]}),e.jsx(W,{className:"p-4 pt-0",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.category&&e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-medium",children:"Categorie:"})," ",s.category]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Creat:"})," ",$e(s.createdAt)]})]})}),e.jsxs($,{className:"p-4 pt-0 flex justify-between",children:[e.jsx(t,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(x,{href:`/marketing/templates/${s.id}`,children:"Vizualizare"})}),e.jsxs(Se,{children:[e.jsx(we,{asChild:!0,children:e.jsxs(t,{variant:"ghost",size:"icon",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Acțiuni"})]})}),e.jsxs(be,{align:"end",className:"w-[180px]",children:[e.jsx(ye,{children:"Acțiuni șablon"}),e.jsx(O,{}),e.jsx(h,{asChild:!0,children:e.jsxs(x,{href:`/marketing/templates/${s.id}`,children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Vizualizare"]})}),e.jsx(h,{asChild:!0,children:e.jsxs(x,{href:`/marketing/templates/edit/${s.id}`,children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Editare"]})}),e.jsx(h,{onClick:()=>m(s.id,!!s.isActive),children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Dezactivează"]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Activează"]})}),e.jsx(h,{asChild:!0,children:e.jsxs(x,{href:`/marketing/campaigns/new?templateId=${s.id}`,children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Creează campanie"]})}),e.jsxs(h,{onClick:()=>j(s.id),children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Duplică"]}),e.jsx(O,{}),e.jsxs(h,{onClick:()=>u(s.id),className:"text-red-600 focus:text-red-600",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Șterge"]})]})]})]})]}),Qe=()=>{const[s,b]=ie(),{toast:u}=te(),[m,j]=n.useState(""),[y,g]=n.useState(""),[A,T]=n.useState(""),[S,p]=n.useState(void 0),[N,r]=n.useState(1),[q,D]=n.useState(!1),[Q,f]=n.useState(!1),[M,k]=n.useState(null),{templates:P,totalPages:v,isLoading:J,deleteTemplate:K,updateTemplate:X}=ne({type:y,category:A||void 0,isActive:S,search:m,page:N,pageSize:9}),G=()=>{r(1),D(!1)},Y=()=>{j(""),g(""),T(""),p(void 0),r(1)},Z=l=>{k(l),f(!0)},ee=async()=>{M&&(await K.mutateAsync(M),f(!1),k(null))},se=async(l,d)=>{try{await X.mutateAsync({id:l,data:{isActive:!d}}),u({title:"Status actualizat",description:`Șablonul a fost ${d?"dezactivat":"activat"} cu succes.`})}catch(le){console.error("Error toggling template status:",le)}},ae=l=>{u({title:"Acțiune în dezvoltare",description:"Funcționalitatea de duplicare a șablonului va fi disponibilă în curând."})};return e.jsxs("div",{className:"flex-1 space-y-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Șabloane"}),e.jsx(t,{asChild:!0,children:e.jsxs(x,{href:"/marketing/templates/new",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Șablon nou"]})})]}),e.jsx(ce,{defaultValue:"all",className:"w-full",onValueChange:l=>{g(l==="all"?"":l),r(1)},children:e.jsxs(re,{className:"grid grid-cols-3 lg:grid-cols-7 w-full",children:[e.jsx(c,{value:"all",children:"Toate"}),e.jsx(c,{value:a.EMAIL,children:"Email"}),e.jsx(c,{value:a.SMS,children:"SMS"}),e.jsx(c,{value:a.SOCIAL,children:"Social"}),e.jsx(c,{value:a.PUSH,className:"hidden lg:flex",children:"Push"}),e.jsx(c,{value:a.WHATSAPP,className:"hidden lg:flex",children:"WhatsApp"}),e.jsx(c,{value:a.MULTI_CHANNEL,className:"hidden lg:flex",children:"Multi-canal"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center justify-between",children:[e.jsxs("div",{className:"relative w-full sm:w-auto flex-1 max-w-sm",children:[e.jsx(de,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Caută șabloane...",className:"pl-8",value:m,onChange:l=>j(l.target.value)})]}),e.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[e.jsxs(Le,{open:q,onOpenChange:D,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(t,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Filtre"})]})}),e.jsxs(Fe,{side:"right",children:[e.jsxs(He,{children:[e.jsx(Oe,{children:"Filtrare șabloane"}),e.jsx(Ue,{children:"Aplicați filtre pentru a găsi șabloanele dorite."})]}),e.jsxs("div",{className:"py-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Tip"}),e.jsxs(I,{value:y,onValueChange:l=>g(l),children:[e.jsx(L,{children:e.jsx(E,{placeholder:"Selectează tip"})}),e.jsxs(F,{children:[e.jsx(i,{value:"",children:"Toate"}),e.jsx(i,{value:a.EMAIL,children:"Email"}),e.jsx(i,{value:a.SMS,children:"SMS"}),e.jsx(i,{value:a.SOCIAL,children:"Social Media"}),e.jsx(i,{value:a.PUSH,children:"Push Notificare"}),e.jsx(i,{value:a.WHATSAPP,children:"WhatsApp"}),e.jsx(i,{value:a.MULTI_CHANNEL,children:"Multi-canal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Categorie"}),e.jsxs(I,{value:A,onValueChange:T,children:[e.jsx(L,{children:e.jsx(E,{placeholder:"Selectează categorie"})}),e.jsxs(F,{children:[e.jsx(i,{value:"",children:"Toate"}),e.jsx(i,{value:"newsletter",children:"Newsletter"}),e.jsx(i,{value:"promotional",children:"Promoțional"}),e.jsx(i,{value:"transactional",children:"Tranzacțional"}),e.jsx(i,{value:"announcement",children:"Anunț"}),e.jsx(i,{value:"event",children:"Eveniment"})]})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{checked:S===!0,onCheckedChange:l=>{p(l?!0:S===!0?void 0:!1)}}),e.jsx(ue,{children:"Doar șabloane active"})]})})]}),e.jsxs(Ve,{children:[e.jsx(We,{asChild:!0,children:e.jsx(t,{variant:"outline",onClick:Y,children:"Resetează"})}),e.jsx(t,{onClick:G,children:"Aplică filtre"})]})]})]}),e.jsxs(t,{variant:"outline",onClick:()=>r(1),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Actualizează"})]})]})]}),e.jsx("div",{children:J?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array(6).fill(0).map((l,d)=>e.jsxs(w,{children:[e.jsx("div",{className:"aspect-video w-full bg-muted",children:e.jsx(o,{className:"h-full w-full"})}),e.jsxs(V,{className:"p-4",children:[e.jsx(o,{className:"h-6 w-40"}),e.jsx(o,{className:"h-4 w-full mt-2"})]}),e.jsx(W,{className:"p-4 pt-0",children:e.jsx(o,{className:"h-4 w-24"})}),e.jsxs($,{className:"p-4 pt-0 flex justify-between",children:[e.jsx(o,{className:"h-9 w-24"}),e.jsx(o,{className:"h-9 w-9"})]})]},d))}):P.length===0?e.jsx(w,{className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx(B,{className:"h-12 w-12 text-muted-foreground"}),e.jsx(_,{children:"Nu există șabloane"}),e.jsx(R,{children:"Nu există șabloane care să corespundă filtrelor aplicate. Creați un șablon nou sau încercați alte filtre."}),e.jsx(t,{asChild:!0,className:"mt-2",children:e.jsxs(x,{href:"/marketing/templates/new",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Șablon nou"]})})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(l=>e.jsx(_e,{template:l,onEdit:d=>b(`/marketing/templates/edit/${d}`),onDelete:Z,onToggleStatus:se,onDuplicate:ae},l.id))}),v>1&&e.jsxs("div",{className:"flex justify-center mt-6",children:[e.jsx(t,{variant:"outline",size:"sm",disabled:N===1,onClick:()=>r(l=>Math.max(1,l-1)),children:"Anterior"}),e.jsx("div",{className:"flex items-center mx-4",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Pagina ",N," din ",v]})}),e.jsx(t,{variant:"outline",size:"sm",disabled:N===v,onClick:()=>r(l=>Math.min(v,l+1)),children:"Următor"})]})]})}),e.jsx(je,{open:Q,onOpenChange:f,children:e.jsxs(ge,{children:[e.jsxs(pe,{children:[e.jsx(Ne,{children:"Confirmă ștergerea"}),e.jsx(fe,{children:"Sunteți sigur că doriți să ștergeți acest șablon? Această acțiune nu poate fi anulată și poate afecta campaniile care folosesc acest șablon."})]}),e.jsxs(ve,{children:[e.jsx(t,{variant:"outline",onClick:()=>f(!1),children:"Anulează"}),e.jsx(t,{variant:"destructive",onClick:ee,children:"Șterge"})]})]})})]})};export{Qe as default};
