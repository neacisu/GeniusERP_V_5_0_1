import{w as os,a as Ee,j as e,bL as Va,L as Q,bM as Me,bN as xe,b0 as Ks,bO as Gs,ay as de,bA as ws,bP as Ua,bQ as cs,ax as be,ap as we,au as ka,g as M,h as I,ai as E,bR as q,bn as da,bS as K,bT as G,bU as ys,bV as F,bb as Cs,aD as ms,bW as Ba,bX as _a,bY as re,bZ as je,b_ as Qs,bp as se,b$ as $,c0 as Be,c1 as ds,c2 as fe,r as C,c3 as Ha,c4 as Ka,c5 as Ga,c6 as ss,c7 as Ds,c8 as xs,c9 as Qa,ca as oa,cb as Wa,cc as qa,an as Ya,cd as X,z as _,f as Ws,t as qs,F as Ys,i as J,k as Z,l as W,m as ae,I as ee,n as ie,T as Ye,a3 as Ie,a4 as ze,a5 as $e,a6 as Le,a7 as ve,b2 as ma,b3 as xa,B as S,aR as He,Y as Te,b4 as ua,b5 as ha,s as pe,o as Ue,aS as us,aU as hs,aV as js,aW as ps,bC as gs,af as Xe,ag as Je,ah as te,aj as le,O as Xa,P as Ja,Q as Za,R as et,U as st,V as at,W as tt,X as lt,_ as L,$ as U,a0 as We,aC as rs,ce as it,cf as rt,aF as he,y as Es,D as Rs,E as me,G as Ps,H as Ms,J as Ne,aG as Pe,aJ as ye,aK as Ce,aL as nt,aM as Se,cg as qe,aO as Ke,aN as H,ch as Is,M as Xs,ci as ct,aP as fs,b7 as dt,cj as ns,ck as ja,aH as ia,by as Ns,cl as oe,be as zs,aQ as Ge,cm as ra,p as Js,cn as ot,q as Ze,co as mt,aB as _e,aT as pa,bu as ke,bD as ga,S as ce,b6 as xt,u as vs,cp as bs,cq as Zs,K as $s,cr as ut,aY as na,cs as ht,A as jt,bI as pt,bJ as B,bK as gt}from"./index-BzQLEEGE.js";import{S as as}from"./star-B070wT1J.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=os("CircleSlash",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"9",x2:"15",y1:"15",y2:"9",key:"1dfufj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=os("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=os("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=os("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=os("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Y=({children:s,title:N,subtitle:r,activeTab:j})=>{const[h]=Ee(),f=[{id:"overview",label:"Tablou general",path:"/collab",icon:e.jsx(Ua,{size:20})},{id:"tasks",label:"Sarcini",path:"/collab/tasks",icon:e.jsx(cs,{size:20})},{id:"notes",label:"Notițe",path:"/collab/notes",icon:e.jsx(be,{size:20})},{id:"threads",label:"Discuții",path:"/collab/threads",icon:e.jsx(xe,{size:20})},{id:"community",label:"Comunitate",path:"/collab/community",icon:e.jsx(we,{size:20})},{id:"settings",label:"Setări",path:"/collab/settings",icon:e.jsx(ka,{size:20})}],v=[{id:"community-general",label:"General",path:"/collab/community",icon:e.jsx(Me,{size:20})},{id:"community-announcements",label:"Anunțuri",path:"/collab/community/announcements",icon:e.jsx(xe,{size:20})},{id:"community-questions",label:"Întrebări",path:"/collab/community/questions",icon:e.jsx(Ks,{size:20})},{id:"community-ideas",label:"Idei",path:"/collab/community/ideas",icon:e.jsx(Gs,{size:20})},{id:"community-events",label:"Evenimente",path:"/collab/community/events",icon:e.jsx(de,{size:20})},{id:"community-resources",label:"Resurse",path:"/collab/community/resources",icon:e.jsx(ws,{size:20})},{id:"community-tutorials",label:"Tutoriale",path:"/collab/community/tutorials",icon:e.jsx(Nt,{size:20})}],b=h.startsWith("/collab/community")?v:f,c=(()=>{const l=h.split("/").filter(Boolean);if(l.length===1&&l[0]==="collab")return[{label:"Acasă",path:"/"},{label:"Colaborare",path:"/collab"}];const u=[{label:"Acasă",path:"/"},{label:"Colaborare",path:"/collab"}];if(l.length>1&&l[0]==="collab"){if(l[1]==="community"){if(u.push({label:"Comunitate",path:"/collab/community"}),l.length>2){const g=v.find(o=>o.path===`/${l[0]}/${l[1]}/${l[2]}`);g&&u.push({label:g.label,path:g.path})}}else{const g=f.find(o=>o.id===l[1]);g&&u.push({label:g.label,path:g.path})}l.length>2&&l[1]!=="community"&&(l[2]==="new"?u.push({label:"Adăugare nouă",path:`/${l[0]}/${l[1]}/${l[2]}`}):l[2]&&l.length===3?u.push({label:"Detalii",path:`/${l[0]}/${l[1]}/${l[2]}`}):l[3]==="edit"&&(u.push({label:"Detalii",path:`/${l[0]}/${l[1]}/${l[2]}`}),u.push({label:"Editare",path:`/${l[0]}/${l[1]}/${l[2]}/${l[3]}`})))}return u})();return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx("header",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("nav",{className:"flex text-sm text-muted-foreground",children:c.map((l,u)=>e.jsxs("div",{className:"flex items-center",children:[u>0&&e.jsx(Va,{className:"mx-1 h-4 w-4"}),e.jsx(Q,{href:l.path,className:`hover:text-primary ${u===c.length-1?"font-medium text-foreground":""}`,children:l.label})]},u))}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:N}),r&&e.jsx("p",{className:"text-muted-foreground",children:r})]}),e.jsx("div",{className:"flex space-x-1 pt-4 border-b overflow-x-auto pb-1",children:b.map(l=>e.jsxs(Q,{href:l.path,className:`px-3 py-2 rounded-t-md text-sm font-medium flex items-center whitespace-nowrap
                    ${j===l.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-primary hover:bg-muted"}
                  `,children:[l.icon&&e.jsx("span",{className:"mr-2",children:l.icon}),l.label]},l.id))})]})})}),e.jsx("main",{className:"flex-1 bg-background",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:s})})]})},vt=({task:s,onClick:N,className:r=""})=>{var l;const j=()=>{N&&N(s)},h=u=>{switch(u){case F.TO_DO:return"bg-slate-500/20 text-slate-700 border-slate-300";case F.IN_PROGRESS:return"bg-blue-500/20 text-blue-700 border-blue-300";case F.IN_REVIEW:return"bg-purple-500/20 text-purple-700 border-purple-300";case F.COMPLETED:return"bg-emerald-500/20 text-emerald-700 border-emerald-300";case F.BLOCKED:return"bg-red-500/20 text-red-700 border-red-300";default:return"bg-gray-500/20 text-gray-700 border-gray-300"}},f=u=>{switch(u){case q.LOW:return"bg-slate-100 text-slate-700";case q.NORMAL:return"bg-blue-100 text-blue-700";case q.HIGH:return"bg-amber-100 text-amber-700";case q.URGENT:return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},v=u=>{switch(u){case F.TO_DO:return e.jsx(ys,{className:"h-4 w-4"});case F.IN_PROGRESS:return e.jsx(Ba,{className:"h-4 w-4"});case F.IN_REVIEW:return e.jsx(we,{className:"h-4 w-4"});case F.COMPLETED:return e.jsx(ms,{className:"h-4 w-4"});case F.BLOCKED:return e.jsx(Cs,{className:"h-4 w-4"});default:return e.jsx(ys,{className:"h-4 w-4"})}},p=u=>{switch(u){case q.LOW:return null;case q.NORMAL:return null;case q.HIGH:return e.jsx(_a,{className:"h-3 w-3"});case q.URGENT:return e.jsx(Cs,{className:"h-3 w-3"});default:return null}},w=(()=>{if(!s.dueDate)return null;const u=new Date(s.dueDate),g=new Date,o=u.getTime()-g.getTime();return Math.ceil(o/(1e3*60*60*24))})(),c=w!==null&&w<0;return e.jsx(M,{className:`hover:border-primary transition-all cursor-pointer ${r} ${s.priority===q.URGENT?"border-l-4 border-l-red-500":""}`,onClick:j,children:e.jsxs(I,{className:"p-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{href:`/collab/tasks/${s.id}`,className:"text-base font-medium hover:text-primary hover:underline",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:s.description})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsxs(E,{className:h(s.status),children:[v(s.status),e.jsx("span",{className:"ml-1",children:s.status})]}),s.priority!==q.NORMAL&&e.jsxs(E,{variant:"outline",className:f(s.priority),children:[p(s.priority),e.jsx("span",{className:p(s.priority)?"ml-1":"",children:s.priority})]})]}),s.progress!==void 0&&s.progress>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:"Progres"}),e.jsxs("span",{children:[s.progress,"%"]})]}),e.jsx(da,{value:s.progress,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs",children:[e.jsx("div",{className:"flex items-center",children:s.assignedTo?e.jsx(K,{className:"h-6 w-6",children:e.jsx(G,{className:"text-[10px]",children:((l=s.assignedTo)==null?void 0:l.substring(0,2).toUpperCase())||"UN"})}):e.jsx(E,{variant:"outline",className:"h-6 rounded-full text-xs px-2 border-dashed",children:"Neatribuit"})}),s.dueDate&&e.jsxs("div",{className:`flex items-center ${c?"text-red-500":"text-muted-foreground"}`,children:[e.jsx(de,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:c?`Întârziat cu ${Math.abs(w)} zile`:w===0?"Astăzi":w===1?"Mâine":`În ${w} zile`})]}),s.commentCount!==void 0&&s.commentCount>0&&e.jsxs("div",{className:"flex items-center text-muted-foreground ml-2",children:[e.jsx(we,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:s.commentCount})]})]})]})})},bt=({thread:s,onClick:N,className:r="",showCategory:j=!0,showStats:h=!0,showDescription:f=!0,showUser:v=!0,compact:p=!1})=>{const b=()=>{N&&N(s)},w=g=>{switch(g){case $.ANUNTURI:return"bg-amber-500/20 text-amber-700 border-amber-300";case $.INTREBARI:return"bg-blue-500/20 text-blue-700 border-blue-300";case $.IDEI:return"bg-emerald-500/20 text-emerald-700 border-emerald-300";case $.EVENIMENTE:return"bg-purple-500/20 text-purple-700 border-purple-300";case $.RESURSE:return"bg-cyan-500/20 text-cyan-700 border-cyan-300";case $.TUTORIALE:return"bg-orange-500/20 text-orange-700 border-orange-300";default:return"bg-gray-500/20 text-gray-700 border-gray-300"}},c=g=>{switch(g){case $.ANUNTURI:return e.jsx(Be,{className:"h-4 w-4"});case $.INTREBARI:return e.jsx(Ks,{className:"h-4 w-4"});case $.IDEI:return e.jsx(Gs,{className:"h-4 w-4"});case $.EVENIMENTE:return e.jsx(de,{className:"h-4 w-4"});case $.RESURSE:return e.jsx(ws,{className:"h-4 w-4"});case $.TUTORIALE:return e.jsx(ws,{className:"h-4 w-4"});default:return e.jsx(xe,{className:"h-4 w-4"})}},l=g=>{const o=new Date,d=new Date(g),t=Math.floor((o.getTime()-d.getTime())/1e3);return t<60?"acum câteva secunde":t<3600?`acum ${Math.floor(t/60)} minute`:t<86400?`acum ${Math.floor(t/3600)} ore`:t<604800?`acum ${Math.floor(t/86400)} zile`:d.toLocaleDateString("ro-RO")},u=()=>s.category?`/collab/community/${s.category}/${s.id}`:`/collab/threads/${s.id}`;return e.jsx(M,{className:`hover:border-primary transition-all cursor-pointer ${r} ${s.isPinned?"border-l-4 border-l-amber-500":""}`,onClick:b,children:e.jsx(I,{className:p?"p-3":"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[s.category&&e.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${w(s.category).split(" ")[0]}`,children:c(s.category)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(Q,{href:u(),className:`font-medium hover:underline ${p?"text-sm":"text-base"}`,children:s.title}),!p&&e.jsx("div",{className:"text-xs text-muted-foreground",children:l(s.createdAt||new Date)})]}),f&&s.description&&e.jsx("p",{className:`text-muted-foreground line-clamp-2 mt-1 ${p?"text-xs":"text-sm"}`,children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[j&&s.category&&e.jsxs(E,{className:w(s.category),children:[c(s.category),e.jsx("span",{className:"ml-1 text-xs",children:s.category})]}),s.tags&&s.tags.length>0&&s.tags.slice(0,p?1:3).map((g,o)=>e.jsxs(E,{variant:"outline",className:`text-xs ${p?"px-1.5 py-0":""}`,children:[!p&&e.jsx(re,{className:"h-2.5 w-2.5 mr-1"}),g]},o)),h&&e.jsxs("div",{className:"flex items-center gap-2 ml-auto text-xs text-muted-foreground",children:[s.viewCount!==void 0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),s.viewCount]}),s.replyCount!==void 0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"h-3 w-3 mr-1"}),s.replyCount]}),s.likeCount!==void 0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qs,{className:"h-3 w-3 mr-1"}),s.likeCount]})]})]}),v&&p&&e.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),l(s.createdAt||new Date)]}),s.createdBy&&e.jsx(K,{className:"h-5 w-5",children:e.jsx(G,{className:"text-[10px]",children:s.createdBy.substring(0,2).toUpperCase()})})]})]})]})})})},wt=({note:s,onClick:N,className:r="",showCreator:j=!0,showRelated:h=!0,compact:f=!1})=>{const v=()=>{N&&N(s)},p=w=>{const c=new Date,l=new Date(w),u=Math.floor((c.getTime()-l.getTime())/1e3);return u<60?"acum câteva secunde":u<3600?`acum ${Math.floor(u/60)} minute`:u<86400?`acum ${Math.floor(u/3600)} ore`:u<604800?`acum ${Math.floor(u/86400)} zile`:l.toLocaleDateString("ro-RO")},b=()=>{if(!s.content)return"";const w=s.content.replace(/#{1,6}\s+/g,"").replace(/\*\*|__|\*|_|~~|`/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/<[^>]*>/g,"");return w.substring(0,f?80:200)+(w.length>(f?80:200)?"...":"")};return e.jsx(M,{className:`hover:border-primary transition-all cursor-pointer ${r} ${s.isPinned?"border-l-4 border-l-yellow-500":""}`,onClick:v,children:e.jsx(I,{className:f?"p-3":"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 p-2 rounded-full bg-indigo-100",children:e.jsx(be,{className:"h-4 w-4 text-indigo-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(Q,{href:`/collab/notes/${s.id}`,className:`font-medium hover:underline ${f?"text-sm":"text-base"}`,children:s.title}),!f&&e.jsx("div",{className:"text-xs text-muted-foreground",children:p(s.createdAt||new Date)})]}),s.content&&e.jsx("p",{className:`text-muted-foreground mt-1 ${f?"text-xs line-clamp-1":"text-sm line-clamp-3"}`,children:b()}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[s.tags&&s.tags.length>0&&s.tags.slice(0,f?1:3).map((w,c)=>e.jsxs(E,{variant:"outline",className:`text-xs ${f?"px-1.5 py-0":""}`,children:[!f&&e.jsx(re,{className:"h-2.5 w-2.5 mr-1"}),w]},c)),s.attachmentCount!==void 0&&s.attachmentCount>0&&e.jsxs(E,{variant:"outline",className:"text-xs",children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),s.attachmentCount]}),s.isPublic&&e.jsxs(E,{variant:"outline",className:"text-xs bg-green-100",children:[e.jsx(ms,{className:"h-3 w-3 mr-1"}),"Public"]})]}),h&&s.relatedItems&&s.relatedItems.length>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-border text-xs",children:e.jsxs("div",{className:"flex items-center text-muted-foreground",children:[e.jsx(ds,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"Asociat cu:"}),e.jsx("div",{className:"flex flex-wrap gap-1 ml-1",children:s.relatedItems.map((w,c)=>e.jsxs(E,{variant:"outline",className:"text-xs px-1.5 py-0",children:[w.type==="task"&&e.jsx("span",{children:w.title||`Sarcina #${w.id}`}),w.type==="thread"&&e.jsx("span",{children:w.title||`Discuția #${w.id}`})]},c))})]})}),j&&f&&e.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),p(s.createdAt||new Date)]}),s.createdBy&&e.jsx(K,{className:"h-5 w-5",children:e.jsx(G,{className:"text-[10px]",children:s.createdBy.substring(0,2).toUpperCase()})})]})]})]})})})},yt=({announcement:s,onClick:N,className:r="",featured:j=!1,compact:h=!1})=>{const f=()=>{N&&N(s)},v=l=>{const u=new Date,g=new Date(l),o=Math.floor((u.getTime()-g.getTime())/1e3);return o<60?"acum câteva secunde":o<3600?`acum ${Math.floor(o/60)} minute`:o<86400?`acum ${Math.floor(o/3600)} ore`:o<604800?`acum ${Math.floor(o/86400)} zile`:g.toLocaleDateString("ro-RO")},b=(()=>{if(!s.expiryDate)return null;const l=new Date(s.expiryDate),u=new Date,g=Math.ceil((l.getTime()-u.getTime())/(1e3*60*60*24));return g<=0?null:g===1?"Expiră mâine":g<7?`Expiră în ${g} zile`:`Expiră pe ${l.toLocaleDateString("ro-RO")}`})(),w=j?"bg-amber-50":"",c=s.isPinned?"border-l-4 border-l-amber-500":"";return e.jsx(M,{className:`hover:border-primary transition-all cursor-pointer ${r} ${w} ${c}`,onClick:f,children:e.jsx(I,{className:h?"p-3":"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${j?"bg-amber-100":"bg-amber-50"}`,children:e.jsx(Be,{className:`h-4 w-4 ${j?"text-amber-600":"text-amber-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{href:`/collab/community/announcements/${s.id}`,className:`font-medium hover:underline ${h?"text-sm":j?"text-lg":"text-base"}`,children:s.title}),s.isPinned&&!h&&e.jsx(fe,{className:"h-3 w-3 text-amber-500"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:v(s.createdAt||new Date)})]}),s.description&&e.jsx("p",{className:`text-muted-foreground mt-1 ${h?"text-xs line-clamp-1":j?"text-sm line-clamp-4":"text-sm line-clamp-2"}`,children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[s.tags&&s.tags.length>0&&s.tags.slice(0,h?1:3).map((l,u)=>e.jsxs(E,{variant:"outline",className:`text-xs ${h?"px-1.5 py-0":""}`,children:[!h&&e.jsx(re,{className:"h-2.5 w-2.5 mr-1"}),l]},u)),b&&e.jsxs(E,{variant:"outline",className:"text-xs bg-amber-50 text-amber-700",children:[e.jsx(de,{className:"h-3 w-3 mr-1"}),b]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto text-xs text-muted-foreground",children:[s.viewCount!==void 0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),s.viewCount]}),s.replyCount!==void 0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),s.replyCount]})]})]}),!h&&e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-border",children:[e.jsx("div",{className:"flex items-center text-xs text-muted-foreground",children:s.createdBy&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Publicat de "}),e.jsx(K,{className:"h-5 w-5 mx-1",children:e.jsx(G,{className:"text-[10px]",children:s.createdBy.substring(0,2).toUpperCase()})}),e.jsx("span",{className:"font-medium",children:s.createdBy})]})}),j&&e.jsx(Q,{href:`/collab/community/announcements/${s.id}`,className:"text-xs text-primary hover:underline",children:"Citește anunțul"})]})]})]})})})};var fa=["PageUp","PageDown"],Na=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],va={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ls="Slider",[Bs,Ct,St]=Ga(ls),[ba,dl]=Ka(ls,[St]),[Tt,Ls]=ba(ls),wa=C.forwardRef((s,N)=>{const{name:r,min:j=0,max:h=100,step:f=1,orientation:v="horizontal",disabled:p=!1,minStepsBetweenThumbs:b=0,defaultValue:w=[j],value:c,onValueChange:l=()=>{},onValueCommit:u=()=>{},inverted:g=!1,form:o,...d}=s,t=C.useRef(new Set),i=C.useRef(0),n=v==="horizontal"?At:Dt,[x=[],T]=Ha({prop:c,defaultProp:w,onChange:y=>{var z;(z=[...t.current][i.current])==null||z.focus(),l(y)}}),m=C.useRef(x);function A(y){const P=It(x,y);V(y,P)}function R(y){V(y,i.current)}function D(){const y=m.current[i.current];x[i.current]!==y&&u(x)}function V(y,P,{commit:z}={commit:!1}){const k=Ot(f),Ae=Ft(Math.round((y-j)/f)*f+j,k),ue=oa(Ae,[j,h]);T((Fe=[])=>{const ge=Pt(Fe,ue,P);if(Lt(ge,b*f)){i.current=ge.indexOf(ue);const is=String(ge)!==String(Fe);return is&&z&&u(ge),is?ge:Fe}else return Fe})}return e.jsx(Tt,{scope:s.__scopeSlider,name:r,disabled:p,min:j,max:h,valueIndexToChangeRef:i,thumbs:t.current,values:x,orientation:v,form:o,children:e.jsx(Bs.Provider,{scope:s.__scopeSlider,children:e.jsx(Bs.Slot,{scope:s.__scopeSlider,children:e.jsx(n,{"aria-disabled":p,"data-disabled":p?"":void 0,...d,ref:N,onPointerDown:ss(d.onPointerDown,()=>{p||(m.current=x)}),min:j,max:h,inverted:g,onSlideStart:p?void 0:A,onSlideMove:p?void 0:R,onSlideEnd:p?void 0:D,onHomeKeyDown:()=>!p&&V(j,0,{commit:!0}),onEndKeyDown:()=>!p&&V(h,x.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:P})=>{if(!p){const Ae=fa.includes(y.key)||y.shiftKey&&Na.includes(y.key)?10:1,ue=i.current,Fe=x[ue],ge=f*Ae*P;V(Fe+ge,ue,{commit:!0})}}})})})})});wa.displayName=ls;var[ya,Ca]=ba(ls,{startEdge:"left",endEdge:"right",size:"width",direction:1}),At=C.forwardRef((s,N)=>{const{min:r,max:j,dir:h,inverted:f,onSlideStart:v,onSlideMove:p,onSlideEnd:b,onStepKeyDown:w,...c}=s,[l,u]=C.useState(null),g=xs(N,n=>u(n)),o=C.useRef(),d=Qa(h),t=d==="ltr",i=t&&!f||!t&&f;function a(n){const x=o.current||l.getBoundingClientRect(),T=[0,x.width],A=sa(T,i?[r,j]:[j,r]);return o.current=x,A(n-x.left)}return e.jsx(ya,{scope:s.__scopeSlider,startEdge:i?"left":"right",endEdge:i?"right":"left",direction:i?1:-1,size:"width",children:e.jsx(Sa,{dir:d,"data-orientation":"horizontal",...c,ref:g,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:n=>{const x=a(n.clientX);v==null||v(x)},onSlideMove:n=>{const x=a(n.clientX);p==null||p(x)},onSlideEnd:()=>{o.current=void 0,b==null||b()},onStepKeyDown:n=>{const T=va[i?"from-left":"from-right"].includes(n.key);w==null||w({event:n,direction:T?-1:1})}})})}),Dt=C.forwardRef((s,N)=>{const{min:r,max:j,inverted:h,onSlideStart:f,onSlideMove:v,onSlideEnd:p,onStepKeyDown:b,...w}=s,c=C.useRef(null),l=xs(N,c),u=C.useRef(),g=!h;function o(d){const t=u.current||c.current.getBoundingClientRect(),i=[0,t.height],n=sa(i,g?[j,r]:[r,j]);return u.current=t,n(d-t.top)}return e.jsx(ya,{scope:s.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:e.jsx(Sa,{"data-orientation":"vertical",...w,ref:l,style:{...w.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:d=>{const t=o(d.clientY);f==null||f(t)},onSlideMove:d=>{const t=o(d.clientY);v==null||v(t)},onSlideEnd:()=>{u.current=void 0,p==null||p()},onStepKeyDown:d=>{const i=va[g?"from-bottom":"from-top"].includes(d.key);b==null||b({event:d,direction:i?-1:1})}})})}),Sa=C.forwardRef((s,N)=>{const{__scopeSlider:r,onSlideStart:j,onSlideMove:h,onSlideEnd:f,onHomeKeyDown:v,onEndKeyDown:p,onStepKeyDown:b,...w}=s,c=Ls(ls,r);return e.jsx(Ds.span,{...w,ref:N,onKeyDown:ss(s.onKeyDown,l=>{l.key==="Home"?(v(l),l.preventDefault()):l.key==="End"?(p(l),l.preventDefault()):fa.concat(Na).includes(l.key)&&(b(l),l.preventDefault())}),onPointerDown:ss(s.onPointerDown,l=>{const u=l.target;u.setPointerCapture(l.pointerId),l.preventDefault(),c.thumbs.has(u)?u.focus():j(l)}),onPointerMove:ss(s.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&h(l)}),onPointerUp:ss(s.onPointerUp,l=>{const u=l.target;u.hasPointerCapture(l.pointerId)&&(u.releasePointerCapture(l.pointerId),f(l))})})}),Ta="SliderTrack",Aa=C.forwardRef((s,N)=>{const{__scopeSlider:r,...j}=s,h=Ls(Ta,r);return e.jsx(Ds.span,{"data-disabled":h.disabled?"":void 0,"data-orientation":h.orientation,...j,ref:N})});Aa.displayName=Ta;var _s="SliderRange",Da=C.forwardRef((s,N)=>{const{__scopeSlider:r,...j}=s,h=Ls(_s,r),f=Ca(_s,r),v=C.useRef(null),p=xs(N,v),b=h.values.length,w=h.values.map(u=>Ra(u,h.min,h.max)),c=b>1?Math.min(...w):0,l=100-Math.max(...w);return e.jsx(Ds.span,{"data-orientation":h.orientation,"data-disabled":h.disabled?"":void 0,...j,ref:p,style:{...s.style,[f.startEdge]:c+"%",[f.endEdge]:l+"%"}})});Da.displayName=_s;var Hs="SliderThumb",Ea=C.forwardRef((s,N)=>{const r=Ct(s.__scopeSlider),[j,h]=C.useState(null),f=xs(N,p=>h(p)),v=C.useMemo(()=>j?r().findIndex(p=>p.ref.current===j):-1,[r,j]);return e.jsx(Et,{...s,ref:f,index:v})}),Et=C.forwardRef((s,N)=>{const{__scopeSlider:r,index:j,name:h,...f}=s,v=Ls(Hs,r),p=Ca(Hs,r),[b,w]=C.useState(null),c=xs(N,a=>w(a)),l=b?v.form||!!b.closest("form"):!0,u=Wa(b),g=v.values[j],o=g===void 0?0:Ra(g,v.min,v.max),d=Mt(j,v.values.length),t=u==null?void 0:u[p.size],i=t?zt(t,o,p.direction):0;return C.useEffect(()=>{if(b)return v.thumbs.add(b),()=>{v.thumbs.delete(b)}},[b,v.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[p.startEdge]:`calc(${o}% + ${i}px)`},children:[e.jsx(Bs.ItemSlot,{scope:s.__scopeSlider,children:e.jsx(Ds.span,{role:"slider","aria-label":s["aria-label"]||d,"aria-valuemin":v.min,"aria-valuenow":g,"aria-valuemax":v.max,"aria-orientation":v.orientation,"data-orientation":v.orientation,"data-disabled":v.disabled?"":void 0,tabIndex:v.disabled?void 0:0,...f,ref:c,style:g===void 0?{display:"none"}:s.style,onFocus:ss(s.onFocus,()=>{v.valueIndexToChangeRef.current=j})})}),l&&e.jsx(Rt,{name:h??(v.name?v.name+(v.values.length>1?"[]":""):void 0),form:v.form,value:g},j)]})});Ea.displayName=Hs;var Rt=s=>{const{value:N,...r}=s,j=C.useRef(null),h=qa(N);return C.useEffect(()=>{const f=j.current,v=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(v,"value").set;if(h!==N&&b){const w=new Event("input",{bubbles:!0});b.call(f,N),f.dispatchEvent(w)}},[h,N]),e.jsx("input",{style:{display:"none"},...r,ref:j,defaultValue:N})};function Pt(s=[],N,r){const j=[...s];return j[r]=N,j.sort((h,f)=>h-f)}function Ra(s,N,r){const f=100/(r-N)*(s-N);return oa(f,[0,100])}function Mt(s,N){return N>2?`Value ${s+1} of ${N}`:N===2?["Minimum","Maximum"][s]:void 0}function It(s,N){if(s.length===1)return 0;const r=s.map(h=>Math.abs(h-N)),j=Math.min(...r);return r.indexOf(j)}function zt(s,N,r){const j=s/2,f=sa([0,50],[0,j]);return(j-f(N)*r)*r}function $t(s){return s.slice(0,-1).map((N,r)=>s[r+1]-N)}function Lt(s,N){if(N>0){const r=$t(s);return Math.min(...r)>=N}return!0}function sa(s,N){return r=>{if(s[0]===s[1]||N[0]===N[1])return N[0];const j=(N[1]-N[0])/(s[1]-s[0]);return N[0]+j*(r-s[0])}}function Ot(s){return(String(s).split(".")[1]||"").length}function Ft(s,N){const r=Math.pow(10,N);return Math.round(s*r)/r}var Pa=wa,Vt=Aa,Ut=Da,kt=Ea;const Ma=C.forwardRef(({className:s,...N},r)=>e.jsxs(Pa,{ref:r,className:Ya("relative flex w-full touch-none select-none items-center",s),...N,children:[e.jsx(Vt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Ut,{className:"absolute h-full bg-primary"})}),e.jsx(kt,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ma.displayName=Pa.displayName;const Bt=({task:s,onSubmit:N,onCancel:r,isLoading:j=!1})=>{const{useUsers:h,useTaskTags:f}=X(),[v,p]=C.useState(s!=null&&s.assignedTo?[s.assignedTo]:[]),[b,w]=C.useState((s==null?void 0:s.tags)||[]),{data:c,isLoading:l}=h(),{data:u,isLoading:g}=f(),o=_.object({title:_.string().min(3,"Titlul trebuie să conțină cel puțin 3 caractere").max(100),description:_.string().optional(),status:_.nativeEnum(F),priority:_.nativeEnum(q),dueDate:_.date().optional().nullable(),assignedTo:_.string().optional().nullable(),tags:_.array(_.string()).optional(),progress:_.number().min(0).max(100).optional(),estimatedHours:_.number().min(0).max(100).optional().nullable(),isPublic:_.boolean().default(!1),parentTaskId:_.string().optional().nullable()}),d=Ws({resolver:qs(o),defaultValues:{title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",status:(s==null?void 0:s.status)||F.TO_DO,priority:(s==null?void 0:s.priority)||q.NORMAL,dueDate:s!=null&&s.dueDate?new Date(s.dueDate):null,assignedTo:(s==null?void 0:s.assignedTo)||null,tags:(s==null?void 0:s.tags)||[],progress:(s==null?void 0:s.progress)||0,estimatedHours:(s==null?void 0:s.estimatedHours)||null,isPublic:(s==null?void 0:s.isPublic)||!1,parentTaskId:(s==null?void 0:s.parentTaskId)||null}}),t=x=>{N({id:s==null?void 0:s.id,...x,createdAt:(s==null?void 0:s.createdAt)||new Date,updatedAt:new Date})},i=x=>{d.setValue("assignedTo",x),p([x])},a=x=>{const T=d.getValues("tags")||[];if(!T.includes(x)){const m=[...T,x];d.setValue("tags",m),w(m)}},n=x=>{const m=(d.getValues("tags")||[]).filter(A=>A!==x);d.setValue("tags",m),w(m)};return e.jsx(Ys,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(t),className:"space-y-6",children:[e.jsx(J,{control:d.control,name:"title",render:({field:x})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Titlu*"}),e.jsx(ae,{children:e.jsx(ee,{placeholder:"Introduceți titlul sarcinii",...x})}),e.jsx(ie,{})]})}),e.jsx(J,{control:d.control,name:"description",render:({field:x})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Descriere"}),e.jsx(ae,{children:e.jsx(Ye,{placeholder:"Descrierea detaliată a sarcinii...",rows:4,...x})}),e.jsx(ie,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(J,{control:d.control,name:"status",render:({field:x})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Status*"}),e.jsxs(Ie,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(ae,{children:e.jsx(ze,{children:e.jsx($e,{placeholder:"Selectați statusul"})})}),e.jsx(Le,{children:Object.values(F).map(T=>e.jsx(ve,{value:T,children:T},T))})]}),e.jsx(ie,{})]})}),e.jsx(J,{control:d.control,name:"priority",render:({field:x})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Prioritate*"}),e.jsxs(Ie,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(ae,{children:e.jsx(ze,{children:e.jsx($e,{placeholder:"Selectați prioritatea"})})}),e.jsx(Le,{children:Object.values(q).map(T=>e.jsx(ve,{value:T,children:T},T))})]}),e.jsx(ie,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(J,{control:d.control,name:"dueDate",render:({field:x})=>e.jsxs(Z,{className:"flex flex-col",children:[e.jsx(W,{children:"Termen limită"}),e.jsxs(ma,{children:[e.jsx(xa,{asChild:!0,children:e.jsx(ae,{children:e.jsxs(S,{variant:"outline",className:`w-full justify-start text-left font-normal ${x.value?"":"text-muted-foreground"}`,children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),x.value?He(x.value,"PPP",{locale:Te}):e.jsx("span",{children:"Selectați data"})]})})}),e.jsx(ua,{className:"w-auto p-0",children:e.jsx(ha,{mode:"single",selected:x.value||void 0,onSelect:x.onChange,initialFocus:!0})})]}),e.jsx(ie,{})]})}),e.jsx(J,{control:d.control,name:"estimatedHours",render:({field:x})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Timp estimat (ore)"}),e.jsx(ae,{children:e.jsx(ee,{type:"number",placeholder:"Număr de ore",min:0,max:100,onChange:T=>x.onChange(T.target.value?parseInt(T.target.value):null),value:x.value||""})}),e.jsx(ie,{})]})})]}),e.jsx(J,{control:d.control,name:"assignedTo",render:({field:x})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Atribuire"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:v.map(T=>{var A;const m=c==null?void 0:c.find(R=>R.id===T);return e.jsxs(E,{variant:"secondary",className:"gap-1 pl-1",children:[e.jsx(K,{className:"h-4 w-4",children:e.jsx(G,{className:"text-[10px]",children:((A=m==null?void 0:m.name)==null?void 0:A.substring(0,2).toUpperCase())||"UN"})}),e.jsx("span",{children:(m==null?void 0:m.name)||T}),e.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-muted p-0.5",onClick:()=>{p([]),x.onChange(null)},children:"×"})]},T)})}),v.length===0&&e.jsxs(Ie,{onValueChange:i,value:x.value||"",children:[e.jsx(ae,{children:e.jsx(ze,{children:e.jsx($e,{placeholder:"Atribuiți utilizatorului"})})}),e.jsx(Le,{children:(c||[]).map(T=>{var m;return e.jsx(ve,{value:T.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-6 w-6",children:e.jsx(G,{children:((m=T.name)==null?void 0:m.substring(0,2).toUpperCase())||"UN"})}),e.jsx("span",{children:T.name})]})},T.id)})})]}),e.jsx(ie,{})]})]})}),e.jsx(J,{control:d.control,name:"tags",render:({field:x})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Etichete"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:b.map(T=>e.jsxs(E,{variant:"outline",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),T,e.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-muted p-0.5",onClick:()=>n(T),children:"×"})]},T))}),e.jsx("div",{children:e.jsx(ee,{placeholder:"Adăugați o etichetă și apăsați Enter",onKeyDown:T=>{if(T.key==="Enter"){T.preventDefault();const m=T.target;m.value.trim()&&(a(m.value.trim()),m.value="")}}})}),((u==null?void 0:u.length)||0)>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx(W,{className:"text-xs",children:"Etichete populare"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(u||[]).map(T=>e.jsx(E,{variant:"outline",className:"cursor-pointer hover:bg-secondary",onClick:()=>a(T),children:T},T))})]}),e.jsx(ie,{})]})]})}),e.jsx(J,{control:d.control,name:"progress",render:({field:x})=>e.jsxs(Z,{children:[e.jsxs(W,{children:["Progres: ",x.value,"%"]}),e.jsx(ae,{children:e.jsx(Ma,{defaultValue:[x.value||0],max:100,step:5,onValueChange:T=>x.onChange(T[0])})}),e.jsx(ie,{})]})}),e.jsx(J,{control:d.control,name:"isPublic",render:({field:x})=>e.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(ae,{children:e.jsx(pe,{checked:x.value,onCheckedChange:x.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(W,{children:"Sarcină publică"}),e.jsx(Ue,{children:"Această sarcină va fi vizibilă pentru toți utilizatorii."})]}),e.jsx(ie,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[r&&e.jsx(S,{type:"button",variant:"outline",onClick:r,children:"Anulează"}),e.jsx(S,{type:"submit",disabled:j,children:j?"Se salvează...":s!=null&&s.id?"Actualizează sarcina":"Creează sarcina"})]})]})})},_t=({thread:s,onSubmit:N,onCancel:r,isLoading:j=!1,isCommunityThread:h=!1})=>{const{useUsers:f,useThreadTags:v}=X(),[p,b]=C.useState((s==null?void 0:s.tags)||[]),[w,c]=C.useState((s==null?void 0:s.participants)||[]),{data:l,isLoading:u}=f(),{data:g,isLoading:o}=v(),d=_.object({title:_.string().min(3,"Titlul trebuie să conțină cel puțin 3 caractere").max(200),description:_.string().optional(),participants:_.array(_.string()).optional(),tags:_.array(_.string()).optional(),isPublic:_.boolean().default(!1),isPinned:_.boolean().default(!1),category:h?_.nativeEnum($).optional():_.string().optional(),expiryDate:_.date().optional().nullable()}),t=Ws({resolver:qs(d),defaultValues:{title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",participants:(s==null?void 0:s.participants)||[],tags:(s==null?void 0:s.tags)||[],isPublic:(s==null?void 0:s.isPublic)??!0,isPinned:(s==null?void 0:s.isPinned)||!1,category:(s==null?void 0:s.category)||(h?$.GENERAL:void 0),expiryDate:s!=null&&s.expiryDate?new Date(s.expiryDate):null}}),i=m=>{N({id:s==null?void 0:s.id,...m,createdAt:(s==null?void 0:s.createdAt)||new Date,updatedAt:new Date})},a=m=>{const A=t.getValues("tags")||[];if(!A.includes(m)){const R=[...A,m];t.setValue("tags",R),b(R)}},n=m=>{const R=(t.getValues("tags")||[]).filter(D=>D!==m);t.setValue("tags",R),b(R)},x=m=>{const A=t.getValues("participants")||[];if(!A.includes(m)){const R=[...A,m];t.setValue("participants",R),c(R)}},T=m=>{const R=(t.getValues("participants")||[]).filter(D=>D!==m);t.setValue("participants",R),c(R)};return e.jsx(Ys,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(i),className:"space-y-6",children:[e.jsx(J,{control:t.control,name:"title",render:({field:m})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Titlu*"}),e.jsx(ae,{children:e.jsx(ee,{placeholder:`Introduceți titlul ${h?"postării":"discuției"}`,...m})}),e.jsx(ie,{})]})}),e.jsx(J,{control:t.control,name:"description",render:({field:m})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Descriere"}),e.jsx(ae,{children:e.jsx(Ye,{placeholder:`Descrierea ${h?"postării":"discuției"}...`,rows:4,...m})}),e.jsx(ie,{})]})}),h&&e.jsx(J,{control:t.control,name:"category",render:({field:m})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Categorie*"}),e.jsxs(Ie,{onValueChange:m.onChange,defaultValue:m.value,children:[e.jsx(ae,{children:e.jsx(ze,{children:e.jsx($e,{placeholder:"Selectați categoria"})})}),e.jsx(Le,{children:Object.values($).map(A=>e.jsx(ve,{value:A,children:A.charAt(0).toUpperCase()+A.slice(1)},A))})]}),e.jsx(ie,{})]})}),e.jsx(J,{control:t.control,name:"tags",render:({field:m})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Etichete"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:p.map(A=>e.jsxs(E,{variant:"outline",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),A,e.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-muted p-0.5",onClick:()=>n(A),children:"×"})]},A))}),e.jsx("div",{children:e.jsx(ee,{placeholder:"Adăugați o etichetă și apăsați Enter",onKeyDown:A=>{if(A.key==="Enter"){A.preventDefault();const R=A.target;R.value.trim()&&(a(R.value.trim()),R.value="")}}})}),((g==null?void 0:g.length)||0)>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx(W,{className:"text-xs",children:"Etichete populare"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(g||[]).map(A=>e.jsx(E,{variant:"outline",className:"cursor-pointer hover:bg-secondary",onClick:()=>a(A),children:A},A))})]}),e.jsx(ie,{})]})]})}),!h&&e.jsx(J,{control:t.control,name:"participants",render:({field:m})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Participanți"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(A=>{var D;const R=l==null?void 0:l.find(V=>V.id===A);return e.jsxs(E,{variant:"secondary",className:"gap-1 pl-1",children:[e.jsx(K,{className:"h-4 w-4",children:e.jsx(G,{className:"text-[10px]",children:((D=R==null?void 0:R.name)==null?void 0:D.substring(0,2).toUpperCase())||"UN"})}),e.jsx("span",{children:(R==null?void 0:R.name)||A}),e.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-muted p-0.5",onClick:()=>T(A),children:"×"})]},A)})}),e.jsxs(Ie,{onValueChange:x,children:[e.jsx(ae,{children:e.jsx(ze,{children:e.jsx($e,{placeholder:"Adăugați participanți"})})}),e.jsx(Le,{children:(l||[]).filter(A=>!w.includes(A.id)).map(A=>{var R;return e.jsx(ve,{value:A.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-6 w-6",children:e.jsx(G,{children:((R=A.name)==null?void 0:R.substring(0,2).toUpperCase())||"UN"})}),e.jsx("span",{children:A.name})]})},A.id)})})]}),e.jsx(ie,{})]})]})}),h&&e.jsx(J,{control:t.control,name:"expiryDate",render:({field:m})=>e.jsxs(Z,{className:"flex flex-col",children:[e.jsx(W,{children:"Dată expirare (opțional)"}),e.jsxs(ma,{children:[e.jsx(xa,{asChild:!0,children:e.jsx(ae,{children:e.jsxs(S,{variant:"outline",className:`w-full justify-start text-left font-normal ${m.value?"":"text-muted-foreground"}`,children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),m.value?He(m.value,"PPP",{locale:Te}):e.jsx("span",{children:"Setați data de expirare"})]})})}),e.jsx(ua,{className:"w-auto p-0",children:e.jsx(ha,{mode:"single",selected:m.value||void 0,onSelect:m.onChange,initialFocus:!0,disabled:A=>A<new Date})})]}),e.jsx(Ue,{children:m.value?"Postarea va expira și va fi arhivată la această dată.":"Opțional, setați o dată când anunțul/postarea nu va mai fi relevantă."}),e.jsx(ie,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(J,{control:t.control,name:"isPublic",render:({field:m})=>e.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(ae,{children:e.jsx(pe,{checked:m.value,onCheckedChange:m.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(W,{children:"Public"}),e.jsx(Ue,{children:h?"Postarea va fi vizibilă pentru toți utilizatorii.":"Discuția va fi vizibilă pentru toți utilizatorii, nu doar pentru participanți."})]})]})}),e.jsx(J,{control:t.control,name:"isPinned",render:({field:m})=>e.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(ae,{children:e.jsx(pe,{checked:m.value,onCheckedChange:m.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(W,{children:"Fixat"}),e.jsx(Ue,{children:h?"Postarea va fi afișată în partea de sus a listei.":"Discuția va fi fixată în partea de sus a listei."})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[r&&e.jsx(S,{type:"button",variant:"outline",onClick:r,children:"Anulează"}),e.jsx(S,{type:"submit",disabled:j,children:j?"Se salvează...":s!=null&&s.id?"Actualizează":"Creează"})]})]})})},Ht=({note:s,onSubmit:N,onCancel:r,isLoading:j=!1,relatedTaskId:h,relatedThreadId:f})=>{const{useNoteTags:v,useTasks:p,useThreads:b}=X(),[w,c]=C.useState((s==null?void 0:s.tags)||[]),[l,u]=C.useState((s==null?void 0:s.relatedItems)||[]),{data:g,isLoading:o}=v(),{data:d,isLoading:t}=p(),{data:i,isLoading:a}=b(),n=_.object({title:_.string().min(3,"Titlul trebuie să conțină cel puțin 3 caractere").max(200),content:_.string().optional(),tags:_.array(_.string()).optional(),isPublic:_.boolean().default(!1),isPinned:_.boolean().default(!1)}),x=Ws({resolver:qs(n),defaultValues:{title:(s==null?void 0:s.title)||"",content:(s==null?void 0:s.content)||"",tags:(s==null?void 0:s.tags)||[],isPublic:(s==null?void 0:s.isPublic)??!1,isPinned:(s==null?void 0:s.isPinned)||!1}}),T=y=>{const P=[...l];if(h&&!P.some(z=>z.id===h&&z.type==="task")){const z=d==null?void 0:d.find(k=>k.id===h);z&&P.push({id:h,type:"task",title:z.title})}if(f&&!P.some(z=>z.id===f&&z.type==="thread")){const z=i==null?void 0:i.find(k=>k.id===f);z&&P.push({id:f,type:"thread",title:z.title})}N({id:s==null?void 0:s.id,...y,relatedItems:P,createdAt:(s==null?void 0:s.createdAt)||new Date,updatedAt:new Date})},m=y=>{const P=x.getValues("tags")||[];if(!P.includes(y)){const z=[...P,y];x.setValue("tags",z),c(z)}},A=y=>{const z=(x.getValues("tags")||[]).filter(k=>k!==y);x.setValue("tags",z),c(z)},R=y=>{if(y&&!l.some(P=>P.id===y&&P.type==="task")){const P=d==null?void 0:d.find(z=>z.id===y);if(P){const z=[...l,{id:y,type:"task",title:P.title}];u(z)}}},D=y=>{if(y&&!l.some(P=>P.id===y&&P.type==="thread")){const P=i==null?void 0:i.find(z=>z.id===y);if(P){const z=[...l,{id:y,type:"thread",title:P.title}];u(z)}}},V=(y,P)=>{const z=l.filter(k=>!(k.id===y&&k.type===P));u(z)};return e.jsx(Ys,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(T),className:"space-y-6",children:[e.jsx(J,{control:x.control,name:"title",render:({field:y})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Titlu*"}),e.jsx(ae,{children:e.jsx(ee,{placeholder:"Introduceți titlul notiței",...y})}),e.jsx(ie,{})]})}),e.jsx(J,{control:x.control,name:"content",render:({field:y})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Conținut"}),e.jsx(ae,{children:e.jsx(Ye,{placeholder:"Conținutul notiței... (suportă markdown)",rows:6,...y})}),e.jsx(Ue,{children:"Puteți utiliza formatarea Markdown pentru a stiliza conținutul."}),e.jsx(ie,{})]})}),e.jsx(J,{control:x.control,name:"tags",render:({field:y})=>e.jsxs(Z,{children:[e.jsx(W,{children:"Etichete"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(P=>e.jsxs(E,{variant:"outline",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),P,e.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-muted p-0.5",onClick:()=>A(P),children:"×"})]},P))}),e.jsx("div",{children:e.jsx(ee,{placeholder:"Adăugați o etichetă și apăsați Enter",onKeyDown:P=>{if(P.key==="Enter"){P.preventDefault();const z=P.target;z.value.trim()&&(m(z.value.trim()),z.value="")}}})}),((g==null?void 0:g.length)||0)>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx(W,{className:"text-xs",children:"Etichete populare"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(g||[]).map(P=>e.jsx(E,{variant:"outline",className:"cursor-pointer hover:bg-secondary",onClick:()=>m(P),children:P},P))})]}),e.jsx(ie,{})]})]})}),e.jsxs("div",{children:[e.jsx(W,{children:"Asociat cu"}),e.jsx(Ue,{children:"Puteți asocia această notiță cu sarcini sau discuții existente."}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-3",children:l.map(y=>e.jsxs(E,{variant:"secondary",className:"pl-2",children:[y.type==="task"?e.jsx(be,{className:"h-3 w-3 mr-1 text-blue-500"}):e.jsx(ds,{className:"h-3 w-3 mr-1 text-indigo-500"}),e.jsx("span",{children:y.title||`${y.type} #${y.id}`}),e.jsx("button",{type:"button",className:"ml-1 rounded-full hover:bg-muted p-0.5",onClick:()=>V(y.id,y.type),children:"×"})]},`${y.type}-${y.id}`))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs(Ie,{onValueChange:R,children:[e.jsx(ze,{children:e.jsx($e,{placeholder:"Asociați cu o sarcină"})}),e.jsx(Le,{children:(d||[]).filter(y=>!l.some(P=>P.id===y.id&&P.type==="task")).map(y=>e.jsx(ve,{value:y.id,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{className:"truncate",children:y.title})]})},`task-${y.id}`))})]})}),e.jsx("div",{children:e.jsxs(Ie,{onValueChange:D,children:[e.jsx(ze,{children:e.jsx($e,{placeholder:"Asociați cu o discuție"})}),e.jsx(Le,{children:(i||[]).filter(y=>!l.some(P=>P.id===y.id&&P.type==="thread")).map(y=>e.jsx(ve,{value:y.id,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ds,{className:"h-4 w-4 mr-2 text-indigo-500"}),e.jsx("span",{className:"truncate",children:y.title})]})},`thread-${y.id}`))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(J,{control:x.control,name:"isPublic",render:({field:y})=>e.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(ae,{children:e.jsx(pe,{checked:y.value,onCheckedChange:y.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(W,{children:"Notiță publică"}),e.jsx(Ue,{children:"Această notiță va fi vizibilă pentru toți utilizatorii."})]})]})}),e.jsx(J,{control:x.control,name:"isPinned",render:({field:y})=>e.jsxs(Z,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(ae,{children:e.jsx(pe,{checked:y.value,onCheckedChange:y.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(W,{children:"Fixată"}),e.jsx(Ue,{children:"Această notiță va fi afișată în partea de sus a listei."})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[r&&e.jsx(S,{type:"button",variant:"outline",onClick:r,children:"Anulează"}),e.jsx(S,{type:"submit",disabled:j,children:j?"Se salvează...":s!=null&&s.id?"Actualizează notița":"Creează notița"})]})]})})},Ts=({isOpen:s,onClose:N,task:r,onSuccess:j,defaultTab:h="details"})=>{const{useCreateTask:f,useUpdateTask:v}=X(),[p,b]=C.useState(h),w=f(),c=v(),l=async g=>{try{r!=null&&r.id?await c.mutateAsync(g):await w.mutateAsync(g),j&&j(),N()}catch(o){console.error("Eroare la salvarea sarcinii:",o)}},u=w.isPending||c.isPending;return e.jsx(us,{open:s,onOpenChange:N,children:e.jsxs(hs,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(js,{children:[e.jsx(ps,{children:r!=null&&r.id?"Editare sarcină":"Sarcină nouă"}),e.jsx(gs,{children:r!=null&&r.id?"Modificați detaliile sarcinii existente.":"Creați o sarcină nouă și atribuiți-o membrilor echipei."})]}),e.jsxs(Xe,{defaultValue:p,onValueChange:b,className:"mt-4",children:[e.jsxs(Je,{className:"grid grid-cols-3",children:[e.jsx(te,{value:"details",children:"Detalii"}),e.jsx(te,{value:"comments",disabled:!(r!=null&&r.id),children:"Comentarii"}),e.jsx(te,{value:"activity",disabled:!(r!=null&&r.id),children:"Activitate"})]}),e.jsx(le,{value:"details",className:"pt-4",children:e.jsx(Bt,{task:r,onSubmit:l,onCancel:N,isLoading:u})}),e.jsx(le,{value:"comments",className:"pt-4",children:r!=null&&r.id?e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Funcționalitatea de comentarii va fi implementată în versiunile următoare."})}):e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Salvați sarcina pentru a putea adăuga comentarii."})})}),e.jsx(le,{value:"activity",className:"pt-4",children:r!=null&&r.id?e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Istoricul activităților va fi implementat în versiunile următoare."})}):e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Salvați sarcina pentru a vedea istoricul activităților."})})})]})]})})},Oe=({isOpen:s,onClose:N,thread:r,onSuccess:j,defaultTab:h="details",isCommunityThread:f=!1})=>{const{useCreateThread:v,useUpdateThread:p}=X(),[b,w]=C.useState(h),c=v(),l=p(),u=async o=>{try{r!=null&&r.id?await l.mutateAsync(o):await c.mutateAsync(o),j&&j(),N()}catch(d){console.error("Eroare la salvarea discuției:",d)}},g=c.isPending||l.isPending;return e.jsx(us,{open:s,onOpenChange:N,children:e.jsxs(hs,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(js,{children:[e.jsx(ps,{children:r!=null&&r.id?`Editare ${f?"postare":"discuție"}`:`${f?"Postare":"Discuție"} nouă`}),e.jsx(gs,{children:r!=null&&r.id?`Modificați detaliile ${f?"postării":"discuției"} existente.`:`Creați o ${f?"postare":"discuție"} nouă și invitați participanți.`})]}),e.jsxs(Xe,{defaultValue:b,onValueChange:w,className:"mt-4",children:[e.jsxs(Je,{className:"grid grid-cols-3",children:[e.jsx(te,{value:"details",children:"Detalii"}),e.jsx(te,{value:"messages",disabled:!(r!=null&&r.id),children:"Mesaje"}),e.jsx(te,{value:"participants",disabled:!(r!=null&&r.id)||f,children:"Participanți"})]}),e.jsx(le,{value:"details",className:"pt-4",children:e.jsx(_t,{thread:r,onSubmit:u,onCancel:N,isLoading:g,isCommunityThread:f})}),e.jsx(le,{value:"messages",className:"pt-4",children:r!=null&&r.id?e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Funcționalitatea de mesaje va fi implementată în versiunile următoare."})}):e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Salvați discuția pentru a putea adăuga mesaje."})})}),e.jsx(le,{value:"participants",className:"pt-4",children:r!=null&&r.id&&!f?e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Managementul participanților va fi implementat în versiunile următoare."})}):e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Salvați discuția pentru a gestiona participanții."})})})]})]})})},As=({isOpen:s,onClose:N,note:r,onSuccess:j,defaultTab:h="details",relatedTaskId:f,relatedThreadId:v})=>{const{useCreateNote:p,useUpdateNote:b}=X(),[w,c]=C.useState(h),l=p(),u=b(),g=async d=>{try{r!=null&&r.id?await u.mutateAsync(d):await l.mutateAsync(d),j&&j(),N()}catch(t){console.error("Eroare la salvarea notiței:",t)}},o=l.isPending||u.isPending;return e.jsx(us,{open:s,onOpenChange:N,children:e.jsxs(hs,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(js,{children:[e.jsx(ps,{children:r!=null&&r.id?"Editare notiță":"Notiță nouă"}),e.jsx(gs,{children:r!=null&&r.id?"Modificați conținutul notiței existente.":"Creați o notiță nouă pentru a documenta informații importante."})]}),e.jsxs(Xe,{defaultValue:w,onValueChange:c,className:"mt-4",children:[e.jsxs(Je,{className:"grid grid-cols-3",children:[e.jsx(te,{value:"details",children:"Conținut"}),e.jsx(te,{value:"preview",disabled:!(r!=null&&r.content),children:"Previzualizare"}),e.jsx(te,{value:"relations",disabled:!(r!=null&&r.id),children:"Relații"})]}),e.jsx(le,{value:"details",className:"pt-4",children:e.jsx(Ht,{note:r,onSubmit:g,onCancel:N,isLoading:o,relatedTaskId:f,relatedThreadId:v})}),e.jsx(le,{value:"preview",className:"pt-4",children:r!=null&&r.content?e.jsx("div",{className:"prose max-w-none",children:e.jsxs("div",{className:"text-muted-foreground text-center py-8",children:[e.jsx("p",{children:"Renderul conținutului markdown va fi implementat în versiunile următoare."}),e.jsx("pre",{className:"mt-4 bg-muted p-4 rounded-md overflow-auto",children:r.content})]})}):e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Adăugați conținut pentru a putea previzualiza."})})}),e.jsx(le,{value:"relations",className:"pt-4",children:r!=null&&r.id?e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Managementul relațiilor va fi implementat în versiunile următoare."})}):e.jsx("div",{className:"text-muted-foreground text-center py-8",children:e.jsx("p",{children:"Salvați notița pentru a gestiona relațiile cu alte elemente."})})})]})]})})},Ia=({isOpen:s,onClose:N,onConfirm:r,title:j,description:h,confirmLabel:f="Continuă",cancelLabel:v="Anulează",variant:p="default",isLoading:b=!1})=>e.jsx(Xa,{open:s,onOpenChange:N,children:e.jsxs(Ja,{children:[e.jsxs(Za,{children:[e.jsx(et,{children:j}),e.jsx(st,{children:h})]}),e.jsxs(at,{children:[e.jsx(tt,{disabled:b,children:v}),e.jsx(lt,{onClick:w=>{w.preventDefault(),r()},className:p==="destructive"?"bg-destructive hover:bg-destructive/90":"",disabled:b,children:b?"Se procesează...":f})]})]})}),Kt=()=>{var R,D,V;const{useRecentTasks:s,useRecentThreads:N,useRecentNotes:r,useCommunityThreads:j}=X(),[h,f]=C.useState("grid"),[v,p]=C.useState(!1),[b,w]=C.useState(!1),[c,l]=C.useState(!1),{data:u,isLoading:g}=s(),{data:o,isLoading:d}=N(),{data:t,isLoading:i}=r(),{data:a,isLoading:n}=j({category:"ANUNTURI",limit:5}),x=y=>(u==null?void 0:u.tasks.filter(P=>P.status===y).length)||0,T=y=>(u==null?void 0:u.tasks.filter(P=>P.priority===y).length)||0,m=y=>{switch(y){case F.PENDING:return"bg-slate-500/20 text-slate-700";case F.IN_PROGRESS:return"bg-blue-500/20 text-blue-700";case F.REVIEW:return"bg-purple-500/20 text-purple-700";case F.COMPLETED:return"bg-emerald-500/20 text-emerald-700";case F.BLOCKED:return"bg-red-500/20 text-red-700";default:return"bg-gray-500/20 text-gray-700"}},A=y=>{switch(y){case q.LOW:return"bg-slate-500/20 text-slate-700";case q.NORMAL:return"bg-blue-500/20 text-blue-700";case q.HIGH:return"bg-amber-500/20 text-amber-700";case q.URGENT:return"bg-red-500/20 text-red-700";default:return"bg-gray-500/20 text-gray-700"}};return e.jsxs(Y,{title:"Colaborare",subtitle:"Gestionează sarcini, notițe și colaborează cu echipa",activeTab:"overview",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 space-y-6",children:[e.jsxs(M,{children:[e.jsxs(L,{className:"pb-2",children:[e.jsx(U,{className:"text-base",children:"Activitate"}),e.jsx(We,{children:"Activitatea ta recentă"})]}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Sarcini atribuite"}),e.jsx("span",{className:"font-medium",children:((R=u==null?void 0:u.stats)==null?void 0:R.assigned)||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Sarcini în desfășurare"}),e.jsx("span",{className:"font-medium",children:x(F.IN_PROGRESS)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Discuții active"}),e.jsx("span",{className:"font-medium",children:((D=o==null?void 0:o.stats)==null?void 0:D.active)||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Notițe create"}),e.jsx("span",{className:"font-medium",children:((V=t==null?void 0:t.stats)==null?void 0:V.created)||0})]})]})})]}),e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(U,{className:"text-base",children:"Sarcini după status"})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-2",children:Object.values(F).map(y=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx(E,{className:m(y),children:y}),e.jsx("span",{className:"font-medium",children:x(y)})]},y))})})]}),e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(U,{className:"text-base",children:"Sarcini după prioritate"})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-2",children:Object.values(q).map(y=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx(E,{className:A(y),children:y}),e.jsx("span",{className:"font-medium",children:T(y)})]},y))})})]}),e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(U,{className:"text-base",children:"Acțiuni rapide"})}),e.jsxs(I,{className:"space-y-2",children:[e.jsxs(S,{variant:"outline",className:"w-full justify-start",onClick:()=>p(!0),children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Creează sarcină"]}),e.jsxs(S,{variant:"outline",className:"w-full justify-start",onClick:()=>w(!0),children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Inițiază o discuție"]}),e.jsxs(S,{variant:"outline",className:"w-full justify-start",onClick:()=>l(!0),children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Adaugă notiță"]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3 space-y-6",children:[((a==null?void 0:a.threads.length)||0)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Anunțuri importante"}),e.jsxs(Q,{href:"/collab/community/announcements",className:"text-sm text-primary flex items-center hover:underline",children:[e.jsx("span",{children:"Vezi toate"}),e.jsx(rs,{className:"h-4 w-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-4",children:n?e.jsx(M,{className:"p-6 animate-pulse",children:e.jsx("div",{className:"h-24 bg-muted rounded-md"})}):a==null?void 0:a.threads.filter(y=>y.isPinned).slice(0,1).map(y=>e.jsx(yt,{announcement:y,featured:!0},y.id))})]}),e.jsxs(Xe,{defaultValue:"tasks",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs(Je,{children:[e.jsxs(te,{value:"tasks",className:"flex items-center",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Sarcini"]}),e.jsxs(te,{value:"threads",className:"flex items-center",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Discuții"]}),e.jsxs(te,{value:"notes",className:"flex items-center",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Notițe"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{variant:h==="grid"?"default":"outline",size:"icon",className:"h-8 w-8",onClick:()=>f("grid"),children:e.jsx(it,{className:"h-4 w-4"})}),e.jsx(S,{variant:h==="list"?"default":"outline",size:"icon",className:"h-8 w-8",onClick:()=>f("list"),children:e.jsx(rt,{className:"h-4 w-4"})})]})]}),e.jsx(le,{value:"tasks",className:"m-0",children:e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{children:"Sarcinile mele recente"}),e.jsxs(Q,{href:"/collab/tasks",className:"text-sm text-primary flex items-center hover:underline",children:[e.jsx("span",{children:"Vezi toate"}),e.jsx(rs,{className:"h-4 w-4 ml-1"})]})]})}),e.jsx(I,{children:g?e.jsx("div",{className:`grid ${h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"} gap-4`,children:Array(6).fill(0).map((y,P)=>e.jsx(M,{className:"p-6 animate-pulse",children:e.jsx("div",{className:"h-24 bg-muted rounded-md"})},P))}):u!=null&&u.tasks&&u.tasks.length>0?e.jsx("div",{className:`grid ${h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"} gap-4`,children:u.tasks.map(y=>e.jsx(vt,{task:y},y.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nicio sarcină"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nu ai nicio sarcină asignată momentan."}),e.jsxs(S,{onClick:()=>p(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Creează o sarcină"]})]})})]})}),e.jsx(le,{value:"threads",className:"m-0",children:e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{children:"Discuții recente"}),e.jsxs(Q,{href:"/collab/threads",className:"text-sm text-primary flex items-center hover:underline",children:[e.jsx("span",{children:"Vezi toate"}),e.jsx(rs,{className:"h-4 w-4 ml-1"})]})]})}),e.jsx(I,{children:d?e.jsx("div",{className:`grid ${h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"} gap-4`,children:Array(6).fill(0).map((y,P)=>e.jsx(M,{className:"p-6 animate-pulse",children:e.jsx("div",{className:"h-24 bg-muted rounded-md"})},P))}):o!=null&&o.threads&&o.threads.length>0?e.jsx("div",{className:`grid ${h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"} gap-4`,children:o.threads.map(y=>e.jsx(bt,{thread:y},y.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nicio discuție"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nu ai nicio discuție activă momentan."}),e.jsxs(S,{onClick:()=>w(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Creează o discuție"]})]})})]})}),e.jsx(le,{value:"notes",className:"m-0",children:e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{children:"Notițe recente"}),e.jsxs(Q,{href:"/collab/notes",className:"text-sm text-primary flex items-center hover:underline",children:[e.jsx("span",{children:"Vezi toate"}),e.jsx(rs,{className:"h-4 w-4 ml-1"})]})]})}),e.jsx(I,{children:i?e.jsx("div",{className:`grid ${h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"} gap-4`,children:Array(6).fill(0).map((y,P)=>e.jsx(M,{className:"p-6 animate-pulse",children:e.jsx("div",{className:"h-24 bg-muted rounded-md"})},P))}):t!=null&&t.notes&&t.notes.length>0?e.jsx("div",{className:`grid ${h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"} gap-4`,children:t.notes.map(y=>e.jsx(wt,{note:y},y.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nicio notiță"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nu ai creat nicio notiță momentan."}),e.jsxs(S,{onClick:()=>l(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Creează o notiță"]})]})})]})})]}),e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{children:"Evenimente și întâlniri viitoare"}),e.jsxs(Q,{href:"/collab/community/events",className:"text-sm text-primary flex items-center hover:underline",children:[e.jsx("span",{children:"Toate evenimentele"}),e.jsx(rs,{className:"h-4 w-4 ml-1"})]})]})}),e.jsx(I,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(M,{className:"bg-blue-50 border-blue-200",children:e.jsxs(I,{className:"p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsxs(E,{className:"bg-blue-500/20 text-blue-700 border-blue-300",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Training"]})}),e.jsx("h3",{className:"font-medium",children:"Sesiune Q&A Raportare ANAF"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"14 Apr, 14:00"}),e.jsx("p",{className:"text-sm mt-2",children:"Sesiune de întrebări și răspunsuri pentru raportările ANAF."}),e.jsx(S,{className:"w-full mt-4",variant:"outline",size:"sm",children:"Vezi detalii"})]})}),e.jsx(M,{className:"bg-emerald-50 border-emerald-200",children:e.jsxs(I,{className:"p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsxs(E,{className:"bg-emerald-500/20 text-emerald-700 border-emerald-300",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Workshop"]})}),e.jsx("h3",{className:"font-medium",children:"Workshop Contabilitate Avansată"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"17 Apr, 10:00"}),e.jsx("p",{className:"text-sm mt-2",children:"Workshop pentru operațiuni contabile avansate."}),e.jsx(S,{className:"w-full mt-4",variant:"outline",size:"sm",children:"Vezi detalii"})]})})]})})]})]})]}),e.jsx(Ts,{isOpen:v,onClose:()=>p(!1),onSuccess:()=>{}}),e.jsx(Oe,{isOpen:b,onClose:()=>w(!1),onSuccess:()=>{}}),e.jsx(As,{isOpen:c,onClose:()=>l(!1),onSuccess:()=>{}})]})},Os=s=>({getHeaderGroups:()=>[],getRowModel:()=>({rows:[]}),getFilteredRowModel:()=>({rows:[]}),getFilteredSelectedRowModel:()=>({rows:[]}),getColumn:()=>({getFilterValue:()=>"",setFilterValue:()=>{}}),previousPage:()=>{},nextPage:()=>{},getCanPreviousPage:()=>!1,getCanNextPage:()=>!1,getIsAllPageRowsSelected:()=>!1,getIsSomePageRowsSelected:()=>!1,toggleAllPageRowsSelected:()=>{}}),Qe=s=>s,Gt=({tasks:s,isLoading:N=!1,onEdit:r,onDelete:j,onDuplicate:h,onStatusChange:f})=>{var i;const[v,p]=C.useState([]),[b,w]=C.useState([]),[c,l]=C.useState({}),u=a=>{switch(a){case F.PENDING:return e.jsx(ys,{className:"h-4 w-4 text-slate-500"});case F.IN_PROGRESS:return e.jsx(se,{className:"h-4 w-4 text-blue-500"});case F.REVIEW:return e.jsx(cs,{className:"h-4 w-4 text-purple-500"});case F.COMPLETED:return e.jsx(ms,{className:"h-4 w-4 text-emerald-500"});case F.BLOCKED:return e.jsx(Cs,{className:"h-4 w-4 text-red-500"});default:return e.jsx(ys,{className:"h-4 w-4"})}},g=a=>{switch(a){case F.PENDING:return"bg-slate-100 text-slate-700 border-slate-200";case F.IN_PROGRESS:return"bg-blue-100 text-blue-700 border-blue-200";case F.REVIEW:return"bg-purple-100 text-purple-700 border-purple-200";case F.COMPLETED:return"bg-emerald-100 text-emerald-700 border-emerald-200";case F.BLOCKED:return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},o=a=>{switch(a){case q.LOW:return"bg-slate-100 text-slate-700 border-slate-200";case q.NORMAL:return"bg-blue-100 text-blue-700 border-blue-200";case q.HIGH:return"bg-amber-100 text-amber-700 border-amber-200";case q.URGENT:return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},d=[{id:"select",header:({table:a})=>e.jsx(pe,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:n=>a.toggleAllPageRowsSelected(!!n),"aria-label":"Select all"}),cell:({row:a})=>e.jsx(pe,{checked:a.getIsSelected(),onCheckedChange:n=>a.toggleSelected(!!n),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"title",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Titlu",e.jsx(Pe,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{const n=a.original;return e.jsx("div",{className:"flex items-center",children:e.jsx(Q,{href:`/collab/tasks/${n.id}`,className:"font-medium hover:underline truncate max-w-xs",children:n.title})})}},{accessorKey:"status",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Status",e.jsx(Pe,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{const n=a.getValue("status"),x=g(n);return f?e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"ghost",className:"h-8 p-0 flex items-center",children:[e.jsxs(E,{className:x,children:[u(n),e.jsx("span",{className:"ml-1",children:n})]}),e.jsx(nt,{className:"ml-1 h-4 w-4"})]})}),e.jsxs(Se,{align:"start",children:[e.jsx(qe,{children:"Schimbă status"}),e.jsx(Ke,{}),Object.values(F).map(T=>e.jsxs(H,{onClick:()=>f(a.original.id,T),className:"flex items-center",children:[u(T),e.jsx("span",{className:"ml-2",children:T})]},T))]})]}):e.jsxs(E,{className:x,children:[u(n),e.jsx("span",{className:"ml-1",children:n})]})},filterFn:(a,n,x)=>x.includes(a.getValue(n))},{accessorKey:"priority",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Prioritate",e.jsx(Pe,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{const n=a.getValue("priority");return e.jsx(E,{className:o(n),children:n})},filterFn:(a,n,x)=>x.includes(a.getValue(n))},{accessorKey:"assignedTo",header:"Atribuit",cell:({row:a})=>{const n=a.getValue("assignedTo");return n?e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:n.substring(0,2).toUpperCase()})}),e.jsx("span",{className:"ml-2 text-sm",children:n})]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Neatribuit"})}},{accessorKey:"progress",header:"Progres",cell:({row:a})=>{const n=a.getValue("progress");return e.jsxs("div",{className:"w-24",children:[e.jsx("div",{className:"flex justify-between text-xs mb-1",children:e.jsxs("span",{children:[n||0,"%"]})}),e.jsx(da,{value:n||0,className:"h-2"})]})}},{accessorKey:"dueDate",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Termen",e.jsx(Pe,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{const n=a.getValue("dueDate");if(!n)return e.jsx("span",{className:"text-muted-foreground text-sm",children:"Nespecificat"});const x=new Date(n),m=x<new Date&&a.original.status!==F.COMPLETED;return e.jsxs("div",{className:`flex items-center gap-1 ${m?"text-red-500":""}`,children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:He(x,"dd MMM yyyy",{locale:Te})})]})}},{id:"actions",cell:({row:a})=>e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Meniu"}),e.jsx(Is,{className:"h-4 w-4"})]})}),e.jsxs(Se,{align:"end",children:[e.jsx(qe,{children:"Acțiuni"}),e.jsx(H,{asChild:!0,children:e.jsxs(Q,{href:`/collab/tasks/${a.original.id}`,children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Vezi detalii"})]})}),r&&e.jsxs(H,{onClick:()=>r(a.original),children:[e.jsx(Xs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Editează"})]}),h&&e.jsxs(H,{onClick:()=>h(a.original),children:[e.jsx(ct,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Duplică"})]}),e.jsx(Ke,{}),j&&e.jsxs(H,{onClick:()=>j(a.original),className:"text-red-600",children:[e.jsx(fs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șterge"})]})]})]})}],t=Os();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{placeholder:"Filtrează după titlu...",value:(i=t.getColumn("title"))==null?void 0:i.getFilterValue(),onChange:a=>{var n;return(n=t.getColumn("title"))==null?void 0:n.setFilterValue(a.target.value)},className:"max-w-sm"}),t.getFilteredSelectedRowModel().rows.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.getFilteredSelectedRowModel().rows.length," selectate"]}),e.jsx(S,{variant:"outline",size:"sm",children:"Acțiune bulk"})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Es,{children:[e.jsx(Rs,{children:t.getHeaderGroups().map(a=>e.jsx(me,{children:a.headers.map(n=>e.jsx(Ps,{children:n.isPlaceholder?null:Qe(n.column.columnDef.header,n.getContext())},n.id))},a.id))}),e.jsx(Ms,{children:N?Array.from({length:5}).map((a,n)=>e.jsx(me,{children:Array.from({length:d.length}).map((x,T)=>e.jsx(Ne,{children:e.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"})},`loading-cell-${T}`))},`loading-${n}`)):t.getRowModel().rows.length>0?t.getRowModel().rows.map(a=>e.jsx(me,{"data-state":a.getIsSelected()?"selected":void 0,children:a.getVisibleCells().map(n=>e.jsx(Ne,{children:Qe(n.column.columnDef.cell,n.getContext())},n.id))},a.id)):e.jsx(me,{children:e.jsx(Ne,{colSpan:d.length,className:"h-24 text-center",children:"Nu au fost găsite sarcini."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:t.getFilteredRowModel().rows.length})," din"," ",e.jsx("strong",{children:s.length})," sarcini."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>t.previousPage(),disabled:!0,children:"Anterior"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>t.nextPage(),disabled:!0,children:"Următor"})]})]})]})},Qt=({threads:s,isLoading:N=!1,onEdit:r,onDelete:j,onTogglePin:h,showCategory:f=!1,isCommunityTable:v=!1})=>{var i;const[p,b]=C.useState([]),[w,c]=C.useState([]),[l,u]=C.useState({}),g=a=>{switch(a){case $.ANUNTURI:return"bg-amber-100 text-amber-700 border-amber-200";case $.INTREBARI:return"bg-blue-100 text-blue-700 border-blue-200";case $.IDEI:return"bg-emerald-100 text-emerald-700 border-emerald-200";case $.EVENIMENTE:return"bg-purple-100 text-purple-700 border-purple-200";case $.RESURSE:return"bg-cyan-100 text-cyan-700 border-cyan-200";case $.TUTORIALE:return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},o=a=>{const n=new Date,x=new Date(a),T=Math.floor((n.getTime()-x.getTime())/1e3);return T<60?"acum câteva secunde":T<3600?`acum ${Math.floor(T/60)} minute`:T<86400?`acum ${Math.floor(T/3600)} ore`:T<604800?`acum ${Math.floor(T/86400)} zile`:He(x,"dd MMM yyyy",{locale:Te})};let d=[{id:"select",header:({table:a})=>e.jsx(pe,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:n=>a.toggleAllPageRowsSelected(!!n),"aria-label":"Select all"}),cell:({row:a})=>e.jsx(pe,{checked:a.getIsSelected(),onCheckedChange:n=>a.toggleSelected(!!n),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"title",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Titlu",e.jsx(Pe,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{const n=a.original;return e.jsxs("div",{className:"flex items-center",children:[n.isPinned&&e.jsx(fe,{className:"h-3 w-3 mr-2 text-amber-500"}),e.jsx(Q,{href:v?`/collab/community/${n.category||"general"}/${n.id}`:`/collab/threads/${n.id}`,className:"font-medium hover:underline truncate max-w-xs",children:n.title})]})}}];f&&d.push({accessorKey:"category",header:"Categorie",cell:({row:a})=>{const n=a.getValue("category");return n?e.jsx(E,{className:g(n),children:n}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Generală"})},filterFn:(a,n,x)=>x.includes(a.getValue(n)||"")}),d=[...d,{accessorKey:"createdBy",header:"Creat de",cell:({row:a})=>{const n=a.getValue("createdBy");return n?e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:n.substring(0,2).toUpperCase()})}),e.jsx("span",{className:"ml-2 text-sm",children:n})]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Sistem"})}},{accessorKey:"createdAt",header:({column:a})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),children:["Data",e.jsx(Pe,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>{const n=a.getValue("createdAt");return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:o(n)})]})}},{id:"stats",header:"Statistici",cell:({row:a})=>{const n=a.original;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:n.viewCount||0})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:n.replyCount||0})]}),v&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Qs,{className:"h-4 w-4"}),e.jsx("span",{children:n.likeCount||0})]})]})}},{id:"actions",cell:({row:a})=>{const n=a.original;return e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Meniu"}),e.jsx(Is,{className:"h-4 w-4"})]})}),e.jsxs(Se,{align:"end",children:[e.jsx(qe,{children:"Acțiuni"}),e.jsx(H,{asChild:!0,children:e.jsxs(Q,{href:v?`/collab/community/${n.category||"general"}/${n.id}`:`/collab/threads/${n.id}`,children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Vezi detalii"})]})}),r&&e.jsxs(H,{onClick:()=>r(n),children:[e.jsx(Xs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Editează"})]}),h&&e.jsxs(H,{onClick:()=>h(n.id,!n.isPinned),children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:n.isPinned?"Anulează fixare":"Fixează"})]}),e.jsx(Ke,{}),j&&e.jsxs(H,{onClick:()=>j(n),className:"text-red-600",children:[e.jsx(fs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șterge"})]})]})]})}}];const t=Os();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{placeholder:"Filtrează după titlu...",value:(i=t.getColumn("title"))==null?void 0:i.getFilterValue(),onChange:a=>{var n;return(n=t.getColumn("title"))==null?void 0:n.setFilterValue(a.target.value)},className:"max-w-sm"}),t.getFilteredSelectedRowModel().rows.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.getFilteredSelectedRowModel().rows.length," selectate"]}),e.jsx(S,{variant:"outline",size:"sm",children:"Acțiune bulk"})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Es,{children:[e.jsx(Rs,{children:t.getHeaderGroups().map(a=>e.jsx(me,{children:a.headers.map(n=>e.jsx(Ps,{children:n.isPlaceholder?null:Qe(n.column.columnDef.header,n.getContext())},n.id))},a.id))}),e.jsx(Ms,{children:N?Array.from({length:5}).map((a,n)=>e.jsx(me,{children:Array.from({length:d.length}).map((x,T)=>e.jsx(Ne,{children:e.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"})},`loading-cell-${T}`))},`loading-${n}`)):t.getRowModel().rows.length>0?t.getRowModel().rows.map(a=>e.jsx(me,{"data-state":a.getIsSelected()?"selected":void 0,children:a.getVisibleCells().map(n=>e.jsx(Ne,{children:Qe(n.column.columnDef.cell,n.getContext())},n.id))},a.id)):e.jsx(me,{children:e.jsx(Ne,{colSpan:d.length,className:"h-24 text-center",children:v?"Nu au fost găsite postări în comunitate.":"Nu au fost găsite discuții."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:t.getFilteredRowModel().rows.length})," din"," ",e.jsx("strong",{children:s.length})," ",v?"postări":"discuții","."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>t.previousPage(),disabled:!0,children:"Anterior"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>t.nextPage(),disabled:!0,children:"Următor"})]})]})]})},Wt=({notes:s,isLoading:N=!1,onEdit:r,onDelete:j,onTogglePin:h})=>{var d;const[f,v]=C.useState([]),[p,b]=C.useState([]),[w,c]=C.useState({}),l=t=>{const i=new Date,a=new Date(t),n=Math.floor((i.getTime()-a.getTime())/1e3);return n<60?"acum câteva secunde":n<3600?`acum ${Math.floor(n/60)} minute`:n<86400?`acum ${Math.floor(n/3600)} ore`:n<604800?`acum ${Math.floor(n/86400)} zile`:He(a,"dd MMM yyyy",{locale:Te})},u=t=>{if(!t)return"";const i=t.replace(/#{1,6}\s+/g,"").replace(/\*\*|__|\*|_|~~|`/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/<[^>]*>/g,"");return i.substring(0,100)+(i.length>100?"...":"")},g=[{id:"select",header:({table:t})=>e.jsx(pe,{checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:i=>t.toggleAllPageRowsSelected(!!i),"aria-label":"Select all"}),cell:({row:t})=>e.jsx(pe,{checked:t.getIsSelected(),onCheckedChange:i=>t.toggleSelected(!!i),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"title",header:({column:t})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Titlu",e.jsx(Pe,{className:"ml-2 h-4 w-4"})]})}),cell:({row:t})=>{const i=t.original;return e.jsxs("div",{className:"flex items-center",children:[i.isPinned&&e.jsx(fe,{className:"h-3 w-3 mr-2 text-amber-500"}),e.jsx(Q,{href:`/collab/notes/${i.id}`,className:"font-medium hover:underline truncate max-w-xs",children:i.title})]})}},{accessorKey:"content",header:"Conținut",cell:({row:t})=>{const i=t.getValue("content");return e.jsx("div",{className:"max-w-xs truncate text-muted-foreground text-sm",children:u(i)})}},{id:"tags",header:"Etichete",cell:({row:t})=>{const a=t.original.tags||[];return a.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.slice(0,3).map((n,x)=>e.jsxs(E,{variant:"outline",className:"text-xs px-1.5 py-0",children:[e.jsx(re,{className:"h-2.5 w-2.5 mr-1"}),n]},x)),a.length>3&&e.jsxs(E,{variant:"outline",className:"text-xs px-1.5 py-0",children:["+",a.length-3]})]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Fără etichete"})}},{id:"relations",header:"Relații",cell:({row:t})=>{const i=t.original,a=i.relatedItems||[];return a.length>0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(E,{variant:"secondary",className:"text-xs",children:[e.jsx(ds,{className:"h-3 w-3 mr-1"}),a.length]}),i.attachmentCount&&i.attachmentCount>0&&e.jsxs(E,{variant:"secondary",className:"text-xs",children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),i.attachmentCount]})]}):i.attachmentCount&&i.attachmentCount>0?e.jsxs(E,{variant:"secondary",className:"text-xs",children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),i.attachmentCount]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}},{accessorKey:"createdBy",header:"Creat de",cell:({row:t})=>{const i=t.getValue("createdBy");return i?e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:i.substring(0,2).toUpperCase()})}),e.jsx("span",{className:"ml-2 text-sm",children:i})]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Sistem"})}},{accessorKey:"createdAt",header:({column:t})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:["Data",e.jsx(Pe,{className:"ml-2 h-4 w-4"})]})}),cell:({row:t})=>{const i=t.getValue("createdAt");return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:l(i)})]})}},{id:"actions",cell:({row:t})=>{const i=t.original;return e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Meniu"}),e.jsx(Is,{className:"h-4 w-4"})]})}),e.jsxs(Se,{align:"end",children:[e.jsx(qe,{children:"Acțiuni"}),e.jsx(H,{asChild:!0,children:e.jsxs(Q,{href:`/collab/notes/${i.id}`,children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Vezi detalii"})]})}),r&&e.jsxs(H,{onClick:()=>r(i),children:[e.jsx(Xs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Editează"})]}),h&&e.jsxs(H,{onClick:()=>h(i.id,!i.isPinned),children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:i.isPinned?"Anulează fixare":"Fixează"})]}),e.jsx(Ke,{}),j&&e.jsxs(H,{onClick:()=>j(i),className:"text-red-600",children:[e.jsx(fs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șterge"})]})]})]})}}],o=Os();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{placeholder:"Filtrează după titlu...",value:(d=o.getColumn("title"))==null?void 0:d.getFilterValue(),onChange:t=>{var i;return(i=o.getColumn("title"))==null?void 0:i.setFilterValue(t.target.value)},className:"max-w-sm"}),o.getFilteredSelectedRowModel().rows.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[o.getFilteredSelectedRowModel().rows.length," selectate"]}),e.jsx(S,{variant:"outline",size:"sm",children:"Acțiune bulk"})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Es,{children:[e.jsx(Rs,{children:o.getHeaderGroups().map(t=>e.jsx(me,{children:t.headers.map(i=>e.jsx(Ps,{children:i.isPlaceholder?null:Qe(i.column.columnDef.header,i.getContext())},i.id))},t.id))}),e.jsx(Ms,{children:N?Array.from({length:5}).map((t,i)=>e.jsx(me,{children:Array.from({length:g.length}).map((a,n)=>e.jsx(Ne,{children:e.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"})},`loading-cell-${n}`))},`loading-${i}`)):o.getRowModel().rows.length>0?o.getRowModel().rows.map(t=>e.jsx(me,{"data-state":t.getIsSelected()?"selected":void 0,children:t.getVisibleCells().map(i=>e.jsx(Ne,{children:Qe(i.column.columnDef.cell,i.getContext())},i.id))},t.id)):e.jsx(me,{children:e.jsx(Ne,{colSpan:g.length,className:"h-24 text-center",children:"Nu au fost găsite notițe."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:o.getFilteredRowModel().rows.length})," din"," ",e.jsx("strong",{children:s.length})," notițe."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>o.previousPage(),disabled:!0,children:"Anterior"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>o.nextPage(),disabled:!0,children:"Următor"})]})]})]})},Vs=({messages:s,isLoading:N=!1,onMarkRead:r,onStar:j,onDelete:h,onArchive:f})=>{var t;const[v,p]=C.useState([]),[b,w]=C.useState([]),[c,l]=C.useState({}),u=i=>{switch(i){case ns.DIRECT:return e.jsx(ia,{className:"h-4 w-4 text-blue-600"});case ns.THREAD:return e.jsx(Me,{className:"h-4 w-4 text-emerald-600"});case ns.SYSTEM:return e.jsx(Cs,{className:"h-4 w-4 text-amber-600"});case ns.NOTIFICATION:return e.jsx(Be,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(ia,{className:"h-4 w-4"})}},g=i=>{const a=new Date,n=new Date(i),x=Math.floor((a.getTime()-n.getTime())/1e3);return x<60?"acum câteva secunde":x<3600?`acum ${Math.floor(x/60)} minute`:x<86400?`acum ${Math.floor(x/3600)} ore`:x<604800?`acum ${Math.floor(x/86400)} zile`:He(n,"dd MMM yyyy",{locale:Te})},o=[{id:"select",header:({table:i})=>e.jsx(pe,{checked:i.getIsAllPageRowsSelected()||i.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>i.toggleAllPageRowsSelected(!!a),"aria-label":"Select all"}),cell:({row:i})=>e.jsx(pe,{checked:i.getIsSelected(),onCheckedChange:a=>i.toggleSelected(!!a),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"isStarred",header:"",cell:({row:i})=>{const a=i.original;return j?e.jsxs(S,{variant:"ghost",className:"h-8 w-8 p-0",onClick:()=>j(a.id,!a.isStarred),children:[e.jsx(as,{className:`h-4 w-4 ${a.isStarred?"text-amber-500 fill-amber-500":"text-muted-foreground"}`}),e.jsx("span",{className:"sr-only",children:"Star"})]}):a.isStarred&&e.jsx(as,{className:"h-4 w-4 text-amber-500 fill-amber-500"})},enableSorting:!1},{accessorKey:"type",header:"",cell:({row:i})=>{const a=i.getValue("type");return u(a)},enableSorting:!1},{accessorKey:"sender",header:"Expeditor",cell:({row:i})=>{const a=i.getValue("sender");return e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"h-8 w-8 mr-2",children:e.jsx(G,{children:a.substring(0,2).toUpperCase()})}),e.jsx("div",{children:e.jsx("div",{className:"font-medium",children:a})})]})}},{accessorKey:"subject",header:({column:i})=>e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{variant:"ghost",onClick:()=>i.toggleSorting(i.getIsSorted()==="asc"),children:["Subiect",e.jsx(Pe,{className:"ml-2 h-4 w-4"})]})}),cell:({row:i})=>{const a=i.original;return e.jsxs(Q,{href:`/collab/messages/${a.id}`,className:`font-medium truncate max-w-xs flex gap-1 items-center hover:underline ${a.isRead?"":"font-semibold"}`,children:[e.jsx("span",{className:"truncate",children:a.subject}),a.attachmentCount&&a.attachmentCount>0&&e.jsx("span",{className:"text-slate-400 shrink-0",children:e.jsx(ts,{className:"h-4 w-4"})})]})}},{accessorKey:"content",header:"Preview",cell:({row:i})=>{const a=i.getValue("content"),n=a.slice(0,60)+(a.length>60?"...":"");return e.jsx("span",{className:"text-muted-foreground text-sm truncate max-w-xs block",children:n})}},{accessorKey:"createdAt",header:"Data",cell:({row:i})=>{const a=i.getValue("createdAt");return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:g(a)})]})}},{id:"actions",cell:({row:i})=>{const a=i.original;return e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Meniu"}),e.jsx(Is,{className:"h-4 w-4"})]})}),e.jsxs(Se,{align:"end",children:[e.jsx(qe,{children:"Acțiuni"}),e.jsx(H,{asChild:!0,children:e.jsxs(Q,{href:`/collab/messages/${a.id}`,children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Vezi detalii"})]})}),r&&e.jsx(H,{onClick:()=>r(a.id,!a.isRead),children:a.isRead?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Marchează ca necitit"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ms,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Marchează ca citit"})]})}),j&&e.jsxs(H,{onClick:()=>j(a.id,!a.isStarred),children:[e.jsx(as,{className:`mr-2 h-4 w-4 ${a.isStarred?"fill-amber-500":""}`}),e.jsx("span",{children:a.isStarred?"Elimină stea":"Marchează cu stea"})]}),a.type===ns.DIRECT&&e.jsx(H,{asChild:!0,children:e.jsxs(Q,{href:`/collab/messages/new?reply=${a.id}`,children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Răspunde"})]})}),e.jsx(Ke,{}),f&&e.jsxs(H,{onClick:()=>f(a),children:[e.jsx(ja,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Arhivează"})]}),h&&e.jsxs(H,{onClick:()=>h(a),className:"text-red-600",children:[e.jsx(fs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șterge"})]})]})]})}}],d=Os();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{placeholder:"Filtrează după subiect...",value:(t=d.getColumn("subject"))==null?void 0:t.getFilterValue(),onChange:i=>{var a;return(a=d.getColumn("subject"))==null?void 0:a.setFilterValue(i.target.value)},className:"max-w-sm"}),d.getFilteredSelectedRowModel().rows.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.getFilteredSelectedRowModel().rows.length," selectate"]}),e.jsx(S,{variant:"outline",size:"sm",children:"Acțiune bulk"})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Es,{children:[e.jsx(Rs,{children:d.getHeaderGroups().map(i=>e.jsx(me,{children:i.headers.map(a=>e.jsx(Ps,{children:a.isPlaceholder?null:Qe(a.column.columnDef.header,a.getContext())},a.id))},i.id))}),e.jsx(Ms,{children:N?Array.from({length:5}).map((i,a)=>e.jsx(me,{children:Array.from({length:o.length}).map((n,x)=>e.jsx(Ne,{children:e.jsx("div",{className:"h-4 bg-gray-200 animate-pulse rounded"})},`loading-cell-${x}`))},`loading-${a}`)):d.getRowModel().rows.length>0?d.getRowModel().rows.map(i=>e.jsx(me,{"data-state":i.getIsSelected()?"selected":void 0,className:i.original.isRead?"":"bg-slate-50",children:i.getVisibleCells().map(a=>e.jsx(Ne,{children:Qe(a.column.columnDef.cell,a.getContext())},a.id))},i.id)):e.jsx(me,{children:e.jsx(Ne,{colSpan:o.length,className:"h-24 text-center",children:"Nu au fost găsite mesaje."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:["Afișare ",e.jsx("strong",{children:d.getFilteredRowModel().rows.length})," din"," ",e.jsx("strong",{children:s.length})," mesaje."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>d.previousPage(),disabled:!0,children:"Anterior"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>d.nextPage(),disabled:!0,children:"Următor"})]})]})]})},qt=()=>{const{useTasks:s,useDeleteTask:N,useUpdateTaskStatus:r}=X(),[j,h]=C.useState(!1),[f,v]=C.useState(),[p,b]=C.useState(null),[w,c]=C.useState(0),{data:l,isLoading:u,isError:g}=s({status:p||void 0,refresh:w}),o=N(),d=r(),t=m=>{v(m),h(!0)},i=async m=>{if(window.confirm(`Sigur doriți să ștergeți sarcina "${m.title}"?`))try{await o.mutateAsync(m.id),c(A=>A+1)}catch(A){console.error("Eroare la ștergerea sarcinii:",A)}},a=async(m,A)=>{try{await d.mutateAsync({id:m,status:A}),c(R=>R+1)}catch(R){console.error("Eroare la actualizarea statusului sarcinii:",R)}},n=()=>{h(!1),v(void 0)},x=()=>{c(m=>m+1)},T=[{label:"Toate sarcinile",value:null},...Object.values(F).map(m=>({label:m,value:m}))];return e.jsx(Y,{title:"Sarcini",subtitle:"Gestionează și urmărește sarcinile echipei",activeTab:"tasks",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Sarcinile mele"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Filtre"]})}),e.jsxs(Se,{align:"end",children:[e.jsx(qe,{children:"Filtrează după status"}),e.jsx(Ke,{}),T.map(m=>e.jsx(H,{onClick:()=>b(m.value),className:p===m.value?"bg-muted":"",children:m.label},m.value||"all"))]})]}),e.jsxs(S,{onClick:()=>h(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Sarcină nouă"]})]})]}),e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsx(Gt,{tasks:(l==null?void 0:l.tasks)||[],isLoading:u,onEdit:t,onDelete:i,onStatusChange:a})}),e.jsx(Ts,{isOpen:j,onClose:n,task:f,onSuccess:x})]})})},Us=()=>{const[,s]=Ee(),[N,r]=oe("/collab/tasks/:id"),{useTask:j,useTaskComments:h,useTaskHistory:f}=X(),[v,p]=C.useState(!1),[b,w]=C.useState(!1),c=r==null?void 0:r.id;C.useEffect(()=>{c==="new"&&(w(!0),p(!0))},[c]);const{data:l,isLoading:u,isError:g}=j(c!=="new"?c:void 0),{data:o,isLoading:d}=h(c!=="new"?c:void 0),{data:t,isLoading:i}=f(c!=="new"?c:void 0),a=()=>{b?s("/collab/tasks"):p(!1)},n=m=>{b?s(`/collab/tasks/${m.id}`):p(!1)},x=m=>{switch(m){case F.TO_DO:return"bg-slate-500/20 text-slate-700";case F.IN_PROGRESS:return"bg-blue-500/20 text-blue-700";case F.IN_REVIEW:return"bg-purple-500/20 text-purple-700";case F.COMPLETED:return"bg-emerald-500/20 text-emerald-700";case F.BLOCKED:return"bg-red-500/20 text-red-700";default:return"bg-gray-500/20 text-gray-700"}},T=m=>{switch(m){case q.LOW:return"bg-slate-500/20 text-slate-700";case q.NORMAL:return"bg-blue-500/20 text-blue-700";case q.HIGH:return"bg-amber-500/20 text-amber-700";case q.URGENT:return"bg-red-500/20 text-red-700";default:return"bg-gray-500/20 text-gray-700"}};return u&&!b?e.jsx(Y,{title:"Detalii sarcină",subtitle:"Se încarcă...",activeTab:"tasks",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),e.jsx("div",{className:"h-64 bg-muted rounded"})]})}):g&&!b?e.jsx(Y,{title:"Eroare",subtitle:"Sarcina nu a putut fi încărcată",activeTab:"tasks",children:e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Sarcina nu a putut fi găsită"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Sarcina cu ID-ul ",c," nu există sau nu aveți permisiunile necesare."]}),e.jsxs(S,{onClick:()=>s("/collab/tasks"),children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Înapoi la lista de sarcini"]})]})})})}):b?e.jsx(Y,{title:"Sarcină nouă",subtitle:"Creați o sarcină nouă",activeTab:"tasks",children:e.jsx(Ts,{isOpen:v,onClose:a,onSuccess:n})}):e.jsxs(Y,{title:(l==null?void 0:l.title)||"Detalii sarcină",subtitle:"Informații și acțiuni pentru sarcină",activeTab:"tasks",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(S,{variant:"outline",onClick:()=>s("/collab/tasks"),children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Înapoi la lista de sarcini"]}),e.jsxs(S,{onClick:()=>p(!0),children:[e.jsx(ea,{className:"h-4 w-4 mr-2"}),"Editează sarcina"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(M,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-xl",children:l==null?void 0:l.title}),e.jsxs(We,{children:["ID: ",l==null?void 0:l.id]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(E,{className:x((l==null?void 0:l.status)||F.TO_DO),children:l==null?void 0:l.status}),e.jsx(E,{className:T((l==null?void 0:l.priority)||q.NORMAL),children:l==null?void 0:l.priority})]})]})}),e.jsxs(I,{children:[e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:(l==null?void 0:l.description)||"Fără descriere"})}),(l==null?void 0:l.tags)&&l.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:l.tags.map((m,A)=>e.jsxs(E,{variant:"outline",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),m]},A))})]})]}),e.jsxs(Xe,{defaultValue:"comments",children:[e.jsxs(Je,{children:[e.jsxs(te,{value:"comments",className:"flex items-center",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Comentarii"]}),e.jsxs(te,{value:"activity",className:"flex items-center",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Activitate"]})]}),e.jsx(le,{value:"comments",className:"mt-4",children:e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:d?e.jsx("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map(m=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-muted"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"})]})]},m))}):o!=null&&o.items&&o.items.length>0?e.jsx("div",{className:"space-y-4",children:o.items.map(m=>{var A;return e.jsxs("div",{className:"flex gap-4",children:[e.jsx(K,{children:e.jsx(G,{children:((A=m.user)==null?void 0:A.substring(0,2).toUpperCase())||"UN"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:m.user}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(m.createdAt).toLocaleString()})]}),e.jsx("p",{className:"mt-1",children:m.content})]})]},m.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Niciun comentariu"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nu există comentarii pentru această sarcină."}),e.jsx(S,{children:"Adaugă primul comentariu"})]})})})}),e.jsx(le,{value:"activity",className:"mt-4",children:e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:i?e.jsx("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map(m=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-muted"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/4"})]})]},m))}):t!=null&&t.items&&t.items.length>0?e.jsx("div",{className:"space-y-4",children:t.items.map(m=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-8 w-8 flex items-center justify-center rounded-full bg-muted",children:e.jsx(se,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{children:m.description}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(m.timestamp).toLocaleString()})]})]},m.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(se,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nicio activitate"}),e.jsx("p",{className:"text-muted-foreground",children:"Nu există înregistrări de activitate pentru această sarcină."})]})})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-lg",children:"Detalii sarcină"})}),e.jsxs(I,{className:"space-y-4",children:[(l==null?void 0:l.progress)!==void 0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progres"}),e.jsxs("span",{className:"font-medium",children:[l.progress,"%"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary",style:{width:`${l.progress}%`}})})]}),(l==null?void 0:l.dueDate)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Termen limită"}),e.jsx("p",{className:"font-medium",children:new Date(l.dueDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Atribuit"}),l!=null&&l.assignedTo?e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(K,{className:"h-6 w-6",children:e.jsx(G,{children:l.assignedTo.substring(0,2).toUpperCase()})}),e.jsx("span",{children:l.assignedTo})]}):e.jsx("p",{className:"font-medium",children:"Neatribuit"})]})]}),(l==null?void 0:l.estimatedHours)!==void 0&&l.estimatedHours>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Timp estimat"}),e.jsxs("p",{className:"font-medium",children:[l.estimatedHours," ore"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Creat de"}),e.jsx("p",{className:"font-medium",children:(l==null?void 0:l.createdBy)||"Sistem"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Creat la"}),e.jsx("p",{className:"font-medium",children:l!=null&&l.createdAt?new Date(l.createdAt).toLocaleString():"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Actualizat la"}),e.jsx("p",{className:"font-medium",children:l!=null&&l.updatedAt?new Date(l.updatedAt).toLocaleString():"-"})]})]})]})]}),e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-lg",children:"Acțiuni rapide"})}),e.jsxs(I,{className:"space-y-2",children:[e.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Adaugă comentariu"]}),e.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Marchează ca finalizată"]}),e.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Reatribuie"]})]})]})]})]})]}),e.jsx(Ts,{isOpen:v,onClose:a,task:l,onSuccess:n})]})},Yt=()=>{const{useNotes:s,useDeleteNote:N,useToggleNotePin:r,useNoteTags:j}=X(),[h,f]=C.useState(!1),[v,p]=C.useState(),[b,w]=C.useState(!1),[c,l]=C.useState(),[u,g]=C.useState(null),[o,d]=C.useState(0),{data:t,isLoading:i,isError:a}=s({tag:u||void 0,refresh:o}),{data:n}=j(),x=(n==null?void 0:n.tags)||[],T=N(),m=r(),A=k=>{p(k),f(!0)},R=k=>{l(k),w(!0)},D=async()=>{if(c!=null&&c.id){try{await T.mutateAsync(c.id),d(k=>k+1)}catch(k){console.error("Eroare la ștergerea notiței:",k)}w(!1),l(void 0)}},V=async(k,Ae)=>{try{await m.mutateAsync({id:k,isPinned:Ae}),d(ue=>ue+1)}catch(ue){console.error("Eroare la modificarea stării de fixare:",ue)}},y=()=>{f(!1),p(void 0)},P=()=>{d(k=>k+1)},z=k=>{g(k)};return e.jsx(Y,{title:"Notițe",subtitle:"Gestionați notițele și documentația internă",activeTab:"notes",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Notițele mele"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ee,{placeholder:"Caută notițe...",className:"max-w-sm"}),e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Filtrează după tag"]})}),e.jsxs(Se,{align:"end",children:[e.jsx(qe,{children:"Filtrează după tag"}),e.jsx(Ke,{}),e.jsx(H,{onClick:()=>z(null),className:u===null?"bg-muted":"",children:"Toate notițele"}),e.jsx(Ke,{}),(x||[]).map(k=>e.jsxs(H,{onClick:()=>z(k),className:u===k?"bg-muted":"",children:[e.jsx(re,{className:"h-3 w-3 mr-2"}),k]},k))]})]}),e.jsxs(S,{onClick:()=>f(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Notiță nouă"]})]})]}),u&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtrat după:"}),e.jsxs(E,{variant:"outline",className:"flex items-center gap-1",onClick:()=>z(null),children:[e.jsx(re,{className:"h-3 w-3"}),u,e.jsx("span",{className:"ml-1 cursor-pointer",children:"×"})]})]}),e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsx(Wt,{notes:(t==null?void 0:t.notes)||[],isLoading:i,onEdit:A,onDelete:R,onTogglePin:V})}),e.jsx(As,{isOpen:h,onClose:y,note:v,onSuccess:P}),e.jsx(Ia,{isOpen:b,onClose:()=>w(!1),onConfirm:D,title:"Șterge notița",description:`Sigur doriți să ștergeți notița "${c==null?void 0:c.title}"? Această acțiune nu poate fi anulată.`,confirmLabel:"Șterge",cancelLabel:"Anulează",variant:"destructive",isLoading:T.isPending})]})})},ks=()=>{const[,s]=Ee(),[N,r]=oe("/collab/notes/:id"),{useNote:j,useNoteHistory:h}=X(),[f,v]=C.useState(!1),[p,b]=C.useState(!1),w=r==null?void 0:r.id;C.useEffect(()=>{w==="new"&&(b(!0),v(!0))},[w]);const{data:c,isLoading:l,isError:u}=j(w!=="new"?w:void 0),{data:g,isLoading:o}=h(w!=="new"?w:void 0),d=()=>{p?s("/collab/notes"):v(!1)},t=a=>{p?s(`/collab/notes/${a.id}`):v(!1)},i=a=>a?e.jsx("pre",{className:"whitespace-pre-wrap",children:a}):e.jsx("p",{className:"text-muted-foreground",children:"Fără conținut"});return l&&!p?e.jsx(Y,{title:"Detalii notiță",subtitle:"Se încarcă...",activeTab:"notes",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),e.jsx("div",{className:"h-64 bg-muted rounded"})]})}):u&&!p?e.jsx(Y,{title:"Eroare",subtitle:"Notița nu a putut fi încărcată",activeTab:"notes",children:e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Notița nu a putut fi găsită"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Notița cu ID-ul ",w," nu există sau nu aveți permisiunile necesare."]}),e.jsxs(S,{onClick:()=>s("/collab/notes"),children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Înapoi la lista de notițe"]})]})})})}):p?e.jsx(Y,{title:"Notiță nouă",subtitle:"Creați o notiță nouă",activeTab:"notes",children:e.jsx(As,{isOpen:f,onClose:d,onSuccess:t})}):e.jsxs(Y,{title:(c==null?void 0:c.title)||"Detalii notiță",subtitle:"Vizualizați și gestionați notița",activeTab:"notes",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(S,{variant:"outline",onClick:()=>s("/collab/notes"),children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Înapoi la lista de notițe"]}),e.jsxs("div",{className:"flex gap-2",children:[(c==null?void 0:c.isPinned)&&e.jsxs(E,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(fe,{className:"h-3 w-3"}),"Fixat"]}),(c==null?void 0:c.isPublic)&&e.jsxs(E,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(je,{className:"h-3 w-3"}),"Public"]}),e.jsxs(S,{onClick:()=>v(!0),children:[e.jsx(ea,{className:"h-4 w-4 mr-2"}),"Editează notița"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"md:col-span-3 space-y-6",children:[e.jsxs(Xe,{defaultValue:"content",children:[e.jsxs(Je,{children:[e.jsxs(te,{value:"content",className:"flex items-center",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Conținut"]}),e.jsxs(te,{value:"preview",className:"flex items-center",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Previzualizare"]}),e.jsxs(te,{value:"activity",className:"flex items-center",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Activitate"]})]}),e.jsx(le,{value:"content",className:"mt-4",children:e.jsxs(M,{children:[e.jsx(L,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx(U,{className:"text-xl",children:c==null?void 0:c.title}),e.jsxs(We,{children:["Creat de ",(c==null?void 0:c.createdBy)||"Sistem"]})]})})}),e.jsx(I,{children:e.jsxs(ra,{className:"h-[500px]",children:[e.jsx("div",{className:"prose max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap p-4 bg-muted rounded-lg border",children:(c==null?void 0:c.content)||"Fără conținut"})}),(c==null?void 0:c.tags)&&c.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:c.tags.map((a,n)=>e.jsxs(E,{variant:"outline",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),a]},n))})]})})]})}),e.jsx(le,{value:"preview",className:"mt-4",children:e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-xl",children:c==null?void 0:c.title})}),e.jsx(I,{children:e.jsx(ra,{className:"h-[500px]",children:e.jsx("div",{className:"prose max-w-none",children:i(c==null?void 0:c.content)})})})]})}),e.jsx(le,{value:"activity",className:"mt-4",children:e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{children:"Istoricul modificărilor"})}),e.jsx(I,{children:o?e.jsx("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map(a=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-muted"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/4"})]})]},a))}):g!=null&&g.items&&g.items.length>0?e.jsx("div",{className:"space-y-4",children:g.items.map(a=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-8 w-8 flex items-center justify-center rounded-full bg-muted",children:e.jsx(se,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{children:a.description}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(a.timestamp).toLocaleString()})]})]},a.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(se,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nicio activitate"}),e.jsx("p",{className:"text-muted-foreground",children:"Nu există înregistrări de activitate pentru această notiță."})]})})]})})]}),(c==null?void 0:c.relatedItems)&&c.relatedItems.length>0&&e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-lg",children:"Elemente asociate"})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-4",children:c.relatedItems.map((a,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[a.type==="task"?e.jsx(be,{className:"h-4 w-4 text-blue-500"}):e.jsx(MessageSquare,{className:"h-4 w-4 text-indigo-500"}),e.jsx(Link,{href:a.type==="task"?`/collab/tasks/${a.id}`:`/collab/threads/${a.id}`,className:"text-primary hover:underline",children:a.title||`${a.type==="task"?"Sarcina":"Discuția"} #${a.id}`})]},n))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-lg",children:"Detalii notiță"})}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vizibilitate"}),e.jsx("p",{className:"font-medium",children:c!=null&&c.isPublic?"Publică":"Privată"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx("p",{className:"font-medium",children:c!=null&&c.isPinned?"Fixat":"Normal"})]})]}),(c==null?void 0:c.attachmentCount)!==void 0&&c.attachmentCount>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Atașamente"}),e.jsx("p",{className:"font-medium",children:c.attachmentCount})]})]}),e.jsx(Js,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Creat de"}),e.jsx("p",{className:"font-medium",children:(c==null?void 0:c.createdBy)||"Sistem"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Creat la"}),e.jsx("p",{className:"font-medium",children:c!=null&&c.createdAt?new Date(c.createdAt).toLocaleString():"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Actualizat la"}),e.jsx("p",{className:"font-medium",children:c!=null&&c.updatedAt?new Date(c.updatedAt).toLocaleString():"-"})]})]})]})]}),e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-lg",children:"Acțiuni rapide"})}),e.jsxs(I,{className:"space-y-2",children:[e.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Adaugă atașament"]}),e.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"Asociază cu alte elemente"]}),e.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),c!=null&&c.isPinned?"Anulează fixare":"Fixează notița"]})]})]})]})]})]}),e.jsx(As,{isOpen:f,onClose:d,note:c,onSuccess:t})]})},Xt=()=>{const{useThreads:s,useDeleteThread:N,useToggleThreadPin:r}=X(),[j,h]=C.useState(!1),[f,v]=C.useState(),[p,b]=C.useState(!1),[w,c]=C.useState(),[l,u]=C.useState(0),{data:g,isLoading:o,isError:d}=s({refresh:l}),t=N(),i=r(),a=R=>{v(R),h(!0)},n=R=>{c(R),b(!0)},x=async()=>{if(w!=null&&w.id){try{await t.mutateAsync(w.id),u(R=>R+1)}catch(R){console.error("Eroare la ștergerea discuției:",R)}b(!1),c(void 0)}},T=async(R,D)=>{try{await i.mutateAsync({id:R,isPinned:D}),u(V=>V+1)}catch(V){console.error("Eroare la modificarea stării de fixare:",V)}},m=()=>{h(!1),v(void 0)},A=()=>{u(R=>R+1)};return e.jsx(Y,{title:"Discuții",subtitle:"Conversații și schimb de informații cu echipa",activeTab:"threads",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Discuțiile mele"}),e.jsxs(S,{onClick:()=>h(!0),children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Discuție nouă"]})]}),e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsx(Qt,{threads:(g==null?void 0:g.threads)||[],isLoading:o,onEdit:a,onDelete:n,onTogglePin:T})}),e.jsx(Oe,{isOpen:j,onClose:m,thread:f,onSuccess:A}),e.jsx(Ia,{isOpen:p,onClose:()=>b(!1),onConfirm:x,title:"Șterge discuția",description:`Sigur doriți să ștergeți discuția "${w==null?void 0:w.title}"? Această acțiune nu poate fi anulată.`,confirmLabel:"Șterge",cancelLabel:"Anulează",variant:"destructive",isLoading:t.isPending})]})})},De=()=>{var la;const[,s]=Ee(),[N,r]=oe("/collab/threads/:id"),[j,h]=oe("/collab/community/announcements/:id"),[f,v]=oe("/collab/community/ANUNTURI/:id"),[p,b]=oe("/collab/community/questions/:id"),[w,c]=oe("/collab/community/INTREBARI/:id"),[l,u]=oe("/collab/community/ideas/:id"),[g,o]=oe("/collab/community/IDEI/:id"),[d,t]=oe("/collab/community/events/:id"),[i,a]=oe("/collab/community/EVENIMENTE/:id"),[n,x]=oe("/collab/community/resources/:id"),[T,m]=oe("/collab/community/RESURSE/:id"),[A,R]=oe("/collab/community/tutorials/:id"),[D,V]=oe("/collab/community/TUTORIALE/:id"),{useThread:y,useThreadMessages:P,useSendMessage:z}=X(),[k,Ae]=C.useState(!1),[ue,Fe]=C.useState(!1),[ge,is]=C.useState(""),Re=(r==null?void 0:r.id)||(h==null?void 0:h.id)||(v==null?void 0:v.id)||(b==null?void 0:b.id)||(c==null?void 0:c.id)||(u==null?void 0:u.id)||(o==null?void 0:o.id)||(t==null?void 0:t.id)||(a==null?void 0:a.id)||(x==null?void 0:x.id)||(m==null?void 0:m.id)||(R==null?void 0:R.id)||(V==null?void 0:V.id);C.useEffect(()=>{Re==="new"&&(Fe(!0),Ae(!0))},[Re]);const{data:O,isLoading:$a,isError:La}=y(Re!=="new"?Re:void 0),{data:Ve,isLoading:Oa}=P(Re!=="new"?Re:void 0),Fs=z(),aa=()=>{ue?s("/collab/threads"):Ae(!1)},ta=ne=>{ue?s(`/collab/threads/${ne.id}`):Ae(!1)},Fa=async()=>{if(ge.trim()&&Re!=="new")try{await Fs.mutateAsync({threadId:Re,content:ge}),is("")}catch(ne){console.error("Eroare la trimiterea mesajului:",ne)}};return $a&&!ue?e.jsx(Y,{title:"Detalii discuție",subtitle:"Se încarcă...",activeTab:"threads",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),e.jsx("div",{className:"h-64 bg-muted rounded"})]})}):La&&!ue?e.jsx(Y,{title:"Eroare",subtitle:"Discuția nu a putut fi încărcată",activeTab:"threads",children:e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Discuția nu a putut fi găsită"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Discuția cu ID-ul ",Re," nu există sau nu aveți permisiunile necesare."]}),e.jsxs(S,{onClick:()=>{s(N?"/collab/threads":j||f?"/collab/community/announcements":p||w?"/collab/community/questions":l||g?"/collab/community/ideas":d||i?"/collab/community/events":n||T?"/collab/community/resources":A||D?"/collab/community/tutorials":"/collab/community")},children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Înapoi la lista de discuții"]})]})})})}):ue?e.jsx(Y,{title:"Discuție nouă",subtitle:"Creați o discuție nouă",activeTab:"threads",children:e.jsx(Oe,{isOpen:k,onClose:aa,onSuccess:ta})}):e.jsxs(Y,{title:(O==null?void 0:O.title)||"Detalii discuție",subtitle:"Conversație și schimb de mesaje",activeTab:"threads",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(S,{variant:"outline",onClick:()=>{s(N?"/collab/threads":j||f?"/collab/community/announcements":p||w?"/collab/community/questions":l||g?"/collab/community/ideas":d||i?"/collab/community/events":n||T?"/collab/community/resources":A||D?"/collab/community/tutorials":"/collab/community")},children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Înapoi la lista de discuții"]}),e.jsxs("div",{className:"flex gap-2",children:[(O==null?void 0:O.isPinned)&&e.jsxs(E,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(fe,{className:"h-3 w-3"}),"Fixat"]}),e.jsxs(S,{onClick:()=>Ae(!0),children:[e.jsx(ea,{className:"h-4 w-4 mr-2"}),"Editează discuția"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"md:col-span-3 space-y-6",children:[e.jsxs(M,{children:[e.jsx(L,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx(U,{className:"text-xl",children:O==null?void 0:O.title}),e.jsxs(We,{children:["Creat de ",(O==null?void 0:O.createdBy)||"Sistem"]})]})})}),e.jsxs(I,{children:[O!=null&&O.description?e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:O.description})}):e.jsx("p",{className:"text-muted-foreground",children:"Fără descriere"}),(O==null?void 0:O.tags)&&O.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:O.tags.map((ne,es)=>e.jsxs(E,{variant:"outline",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),ne]},es))})]})]}),e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-lg",children:"Conversație"})}),e.jsxs(I,{children:[e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto mb-4",children:Oa?e.jsx("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map(ne=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-muted"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"})]})]},ne))}):Ve!=null&&Ve.items&&Ve.items.length>0?e.jsx("div",{className:"space-y-4",children:Ve.items.map(ne=>{var es;return e.jsxs("div",{className:"flex gap-4",children:[e.jsx(K,{children:e.jsx(G,{children:((es=ne.sender)==null?void 0:es.substring(0,2).toUpperCase())||"UN"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:ne.sender}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(ne.createdAt).toLocaleString()})]}),e.jsx("div",{className:"mt-1 p-3 bg-muted rounded-lg",children:e.jsx("p",{children:ne.content})})]})]},ne.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xe,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Niciun mesaj"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Începeți conversația trimițând primul mesaj."})]})}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ye,{placeholder:"Scrieți un mesaj...",value:ge,onChange:ne=>is(ne.target.value),rows:3})}),e.jsx(S,{onClick:Fa,disabled:!ge.trim()||Fs.isPending,children:Fs.isPending?e.jsx("span",{children:"Se trimite..."}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Trimite"})]})})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-lg",children:"Detalii discuție"})}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Participanți"}),O!=null&&O.participants&&O.participants.length>0?e.jsx("div",{className:"space-y-2",children:O.participants.map((ne,es)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:ne.substring(0,2).toUpperCase()})}),e.jsx("span",{children:ne})]},es))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fără participanți"})]}),e.jsx(Js,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Creat de"}),e.jsx("p",{className:"font-medium",children:(O==null?void 0:O.createdBy)||"Sistem"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Creat la"}),e.jsx("p",{className:"font-medium",children:O!=null&&O.createdAt?new Date(O.createdAt).toLocaleString():"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Actualizat la"}),e.jsx("p",{className:"font-medium",children:O!=null&&O.updatedAt?new Date(O.updatedAt).toLocaleString():"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mesaje"}),e.jsx("p",{className:"font-medium",children:((la=Ve==null?void 0:Ve.items)==null?void 0:la.length)||0})]})]})]})]}),e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-lg",children:"Acțiuni rapide"})}),e.jsxs(I,{className:"space-y-2",children:[e.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Adaugă participanți"]}),e.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),O!=null&&O.isPinned?"Anulează fixare":"Fixează discuția"]})]})]})]})]})]}),e.jsx(Oe,{isOpen:k,onClose:aa,thread:O,onSuccess:ta})]})},Jt=()=>{const{useMessages:s,useStarMessage:N}=X(),[r,j]=C.useState("all"),[h,f]=C.useState(""),[v,p]=C.useState(0),{data:b,isLoading:w,isError:c}=s({filter:r,search:h||void 0,refresh:v}),l=N(),u=async(o,d)=>{try{await l.mutateAsync({id:o,isStarred:d}),p(t=>t+1)}catch(t){console.error("Eroare la marcarea mesajului ca favorit:",t)}},g=o=>{o.preventDefault(),p(d=>d+1)};return e.jsx(Y,{title:"Mesaje",subtitle:"Comunicare și notificări",activeTab:"messages",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Centru de mesaje"}),e.jsxs("form",{onSubmit:g,className:"w-full md:w-auto flex items-center gap-2",children:[e.jsx(ee,{placeholder:"Caută mesaje...",value:h,onChange:o=>f(o.target.value),className:"min-w-[250px]"}),e.jsx(S,{type:"submit",variant:"outline",children:e.jsx(Ze,{className:"h-4 w-4"})})]})]}),e.jsxs(Xe,{defaultValue:"all",onValueChange:o=>j(o),children:[e.jsxs(Je,{children:[e.jsx(te,{value:"all",children:"Toate mesajele"}),e.jsx(te,{value:"unread",children:"Necitite"}),e.jsx(te,{value:"starred",children:"Favorite"})]}),e.jsx(le,{value:"all",className:"mt-4",children:e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsx(Vs,{messages:(b==null?void 0:b.messages)||[],isLoading:w,onToggleStar:u})})})})}),e.jsx(le,{value:"unread",className:"mt-4",children:e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsx(Vs,{messages:((b==null?void 0:b.messages)||[]).filter(o=>!o.isRead),isLoading:w,onToggleStar:u})})})})}),e.jsx(le,{value:"starred",className:"mt-4",children:e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:e.jsx("div",{className:"border rounded-lg bg-white",children:e.jsx(Vs,{messages:((b==null?void 0:b.messages)||[]).filter(o=>o.isStarred),isLoading:w,onToggleStar:u})})})})})]})]})})},Zt=()=>{var a,n;const[,s]=Ee(),[N,r]=oe("/collab/messages/:id"),{useMessage:j,useReplyToMessage:h,useToggleMessageStar:f,useMarkMessageRead:v}=X(),[p,b]=C.useState(""),w=r==null?void 0:r.id,{data:c,isLoading:l,isError:u}=j(w),g=h(),o=f(),d=v();C.useEffect(()=>{w&&c&&!c.isRead&&d.mutate(w)},[w,c]);const t=async()=>{if(c)try{await o.mutateAsync({id:w,isStarred:!c.isStarred})}catch(x){console.error("Eroare la marcarea mesajului ca favorit:",x)}},i=async()=>{if(p.trim()&&w)try{await g.mutateAsync({messageId:w,content:p}),b("")}catch(x){console.error("Eroare la trimiterea răspunsului:",x)}};return l?e.jsx(Y,{title:"Detalii mesaj",subtitle:"Se încarcă...",activeTab:"messages",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),e.jsx("div",{className:"h-64 bg-muted rounded"})]})}):u||!c?e.jsx(Y,{title:"Eroare",subtitle:"Mesajul nu a putut fi încărcat",activeTab:"messages",children:e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(zs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Mesajul nu a putut fi găsit"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Mesajul cu ID-ul ",w," nu există sau nu aveți permisiunile necesare."]}),e.jsxs(S,{onClick:()=>s("/collab/messages"),children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Înapoi la lista de mesaje"]})]})})})}):e.jsx(Y,{title:c.subject||"Mesaj fără subiect",subtitle:"Detalii și conversație",activeTab:"messages",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(S,{variant:"outline",onClick:()=>s("/collab/messages"),children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Înapoi la mesaje"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{variant:"outline",onClick:t,children:[e.jsx(as,{className:`h-4 w-4 mr-2 ${c.isStarred?"text-yellow-500 fill-yellow-500":""}`}),c.isStarred?"Elimină favorit":"Marchează favorit"]}),e.jsxs(S,{variant:"outline",children:[e.jsx(ja,{className:"h-4 w-4 mr-2"}),"Arhivează"]}),e.jsxs(S,{variant:"destructive",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Șterge"]})]})]}),e.jsxs(M,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-start gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-xl",children:c.subject||"Fără subiect"}),e.jsxs(We,{children:["De la: ",c.sender,c.threadId&&e.jsxs("span",{className:"ml-2",children:["în ",e.jsx(Q,{href:`/collab/threads/${c.threadId}`,className:"text-primary hover:underline",children:c.threadTitle||`Discuția #${c.threadId}`})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[c.isStarred&&e.jsxs(E,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(as,{className:"h-3 w-3 fill-yellow-500 text-yellow-500"}),"Favorit"]}),e.jsx(E,{variant:c.isRead?"outline":"secondary",children:c.isRead?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Citit"]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Necitit"]})})]})]})}),e.jsx(I,{children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(K,{children:e.jsx(G,{children:((a=c.sender)==null?void 0:a.substring(0,2).toUpperCase())||"UN"})}),e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.sender}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Către: ",((n=c.recipients)==null?void 0:n.join(", "))||"Tine"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(c.createdAt).toLocaleString()})]}),e.jsx(Js,{}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:c.content})}),c.attachments&&c.attachments.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Atașamente"}),e.jsx("div",{className:"space-y-2",children:c.attachments.map((x,T)=>e.jsxs("div",{className:"flex items-center p-2 rounded-md border",children:[e.jsx("span",{className:"flex-1",children:x.name}),e.jsx(S,{size:"sm",variant:"ghost",children:"Descarcă"})]},T))})]})]})]})})]}),c.replies&&c.replies.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Răspunsuri"}),c.replies.map((x,T)=>{var m;return e.jsx(M,{children:e.jsx(I,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(K,{children:e.jsx(G,{children:((m=x.sender)==null?void 0:m.substring(0,2).toUpperCase())||"UN"})}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"font-medium",children:x.sender})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(x.createdAt).toLocaleString()})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:x.content})})]})]})})},T)})]}),e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-lg",children:"Răspunde"})}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ye,{placeholder:"Scrieți răspunsul dvs. aici...",value:p,onChange:x=>b(x.target.value),rows:5}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:i,disabled:!p.trim()||g.isPending,children:g.isPending?e.jsx("span",{children:"Se trimite..."}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Trimite răspuns"})]})})})]})})]})]})})};function el(){var R;const{useCommunityThreads:s,useCreateCommunityThread:N}=X(),[r,j]=C.useState(""),[h,f]=C.useState(null),[v,p]=C.useState(!1),[b,w]=C.useState(""),[c,l]=C.useState(""),[u,g]=C.useState($.GENERAL),[o,d]=C.useState(""),{data:t,isLoading:i}=s(),{mutate:a,isLoading:n}=N(),x=(t==null?void 0:t.threads.filter(D=>{const V=!r||D.title.toLowerCase().includes(r.toLowerCase())||D.description&&D.description.toLowerCase().includes(r.toLowerCase()),y=!h||D.category===h;return V&&y}))||[],T=()=>{if(!b.trim())return;const D=o.split(",").map(V=>V.trim()).filter(V=>V.length>0);a({title:b,description:c,category:u,tags:D,isPublic:!0,companyId:"7196288d-7314-4512-8b67-2c82449b5465"}),w(""),l(""),g($.GENERAL),d(""),p(!1)},m=[{id:$.GENERAL,name:"General",icon:e.jsx(Me,{className:"h-4 w-4"})},{id:$.ANUNTURI,name:"Anunțuri",icon:e.jsx(Be,{className:"h-4 w-4"})},{id:$.INTREBARI,name:"Întrebări",icon:e.jsx(Ks,{className:"h-4 w-4"})},{id:$.IDEI,name:"Idei",icon:e.jsx(Gs,{className:"h-4 w-4"})},{id:$.EVENIMENTE,name:"Evenimente",icon:e.jsx(de,{className:"h-4 w-4"})},{id:$.RESURSE,name:"Resurse",icon:e.jsx(ws,{className:"h-4 w-4"})}],A=(t==null?void 0:t.threads.filter(D=>D.isPinned))||[];return e.jsx(Y,{title:"Comunitate",subtitle:"Întrebări, idei și discuții cu echipa",activeTab:"community-general",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs(M,{children:[e.jsx(L,{children:e.jsx(U,{className:"text-base",children:"Categorii"})}),e.jsx(I,{className:"py-0",children:e.jsxs("nav",{className:"space-y-1",children:[e.jsxs(S,{variant:"ghost",className:`w-full justify-start ${h===null?"bg-muted":""}`,onClick:()=>f(null),children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Toate"]}),m.map(D=>e.jsxs(S,{variant:"ghost",className:`w-full justify-start ${h===D.id?"bg-muted":""}`,onClick:()=>f(D.id),children:[D.icon,e.jsx("span",{className:"ml-2",children:D.name})]},D.id))]})}),e.jsx(_e,{className:"pt-0",children:e.jsx(Q,{href:"/collab/community/resources",className:"text-sm text-primary hover:underline",children:"Vezi toate resursele"})})]})}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ze,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{placeholder:"Caută în Comunitate...",className:"pl-8",value:r,onChange:D=>j(D.target.value)})]}),e.jsxs(us,{open:v,onOpenChange:p,children:[e.jsx(pa,{asChild:!0,children:e.jsxs(S,{children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Subiect nou"]})}),e.jsxs(hs,{children:[e.jsxs(js,{children:[e.jsx(ps,{children:"Creare subiect nou"}),e.jsx(gs,{children:"Împarte întrebările, ideile și anunțurile tale cu comunitatea."})]}),e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ke,{htmlFor:"title",children:"Titlu"}),e.jsx(ee,{id:"title",placeholder:"Adaugă un titlu clar și descriptiv",value:b,onChange:D=>w(D.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ke,{htmlFor:"category",children:"Categorie"}),e.jsxs(Ie,{value:u,onValueChange:D=>g(D),children:[e.jsx(ze,{children:e.jsx($e,{placeholder:"Selectează o categorie"})}),e.jsx(Le,{children:Object.values($).map(D=>e.jsx(ve,{value:D,children:D.charAt(0).toUpperCase()+D.slice(1)},D))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ke,{htmlFor:"description",children:"Descriere"}),e.jsx(Ye,{id:"description",placeholder:"Oferă detalii despre întrebarea sau subiectul tău",rows:4,value:c,onChange:D=>l(D.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ke,{htmlFor:"tags",children:"Tag-uri (separate prin virgulă)"}),e.jsx(ee,{id:"tags",placeholder:"Ex: important, întrebare, ajutor",value:o,onChange:D=>d(D.target.value)})]})]}),e.jsxs(ga,{children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Anulează"}),e.jsx(S,{type:"button",onClick:T,disabled:!b.trim()||n,children:n?"Se creează...":"Publică"})]})]})]})]}),A.length>0&&e.jsxs(M,{className:"border-amber-300",children:[e.jsx(L,{className:"pb-2",children:e.jsxs(U,{className:"text-base flex items-center",children:[e.jsx(fe,{className:"h-4 w-4 mr-2 text-amber-500"}),"Subiecte importante"]})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-3",children:A.map(D=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-amber-500/10 p-2 rounded-full",children:D.category===$.ANUNTURI?e.jsx(Be,{className:"h-4 w-4 text-amber-600"}):e.jsx(Me,{className:"h-4 w-4 text-amber-600"})}),e.jsxs("div",{children:[e.jsx(Q,{href:`/collab/community/${D.category}/${D.id}`,className:"font-medium hover:underline",children:D.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:D.description})]})]},D.id))})})]}),e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{children:"Toate discuțiile"}),e.jsxs(Ie,{defaultValue:"latest",children:[e.jsx(ze,{className:"w-[150px] h-8 text-xs",children:e.jsx($e,{placeholder:"Sortează după"})}),e.jsxs(Le,{children:[e.jsx(ve,{value:"latest",children:"Cele mai recente"}),e.jsx(ve,{value:"popular",children:"Cele mai populare"}),e.jsx(ve,{value:"active",children:"Cele mai active"})]})]})]})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-4",children:i?Array(5).fill(0).map((D,V)=>e.jsxs("div",{className:"flex gap-4 pb-4 border-b",children:[e.jsx(ce,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"w-full space-y-2",children:[e.jsx(ce,{className:"h-5 w-4/5"}),e.jsx(ce,{className:"h-4 w-full"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{className:"h-4 w-14"}),e.jsx(ce,{className:"h-4 w-14"})]})]})]},V)):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nicio discuție găsită"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:r?"Nu am găsit discuții care să corespundă căutării tale.":"Nu există încă discuții în această categorie."}),e.jsx(S,{onClick:()=>p(!0),children:"Creează primul subiect"})]}):x.map(D=>{var V,y;return e.jsxs("div",{className:"flex gap-4 pb-4 border-b",children:[e.jsx(K,{children:e.jsx(G,{children:((V=D.createdBy)==null?void 0:V.substring(0,2).toUpperCase())||"U"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(Q,{href:`/collab/community/${D.category}/${D.id}`,className:"font-medium hover:underline",children:D.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(D.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:D.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(E,{className:"bg-blue-500/20 border-blue-500 text-blue-700",children:D.category}),(y=D.tags)==null?void 0:y.map((P,z)=>e.jsx(E,{variant:"outline",className:"text-xs",children:P},z)),e.jsxs("div",{className:"flex items-center gap-3 ml-auto text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),D.viewCount||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),D.replyCount||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qs,{className:"h-3 w-3 mr-1"}),D.likeCount||0]})]})]})]})]},D.id)})})}),e.jsx(_e,{children:x.length>0&&e.jsx(S,{variant:"outline",className:"w-full",children:"Încarcă mai multe"})})]})]}),e.jsx("div",{className:"hidden lg:block lg:col-span-1",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(U,{className:"text-base",children:"Statistici comunitate"})}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subiecte"}),e.jsx("span",{className:"font-medium",children:((R=t==null?void 0:t.pagination)==null?void 0:R.total)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Membri activi"}),e.jsx("span",{className:"font-medium",children:"32"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Răspunsuri"}),e.jsx("span",{className:"font-medium",children:"128"})]})]})})]}),e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(U,{className:"text-base",children:"Tag-uri populare"})}),e.jsx(I,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(E,{variant:"outline",className:"cursor-pointer hover:bg-muted",children:[e.jsx(re,{className:"mr-1 h-3 w-3"})," contabilitate"]}),e.jsxs(E,{variant:"outline",className:"cursor-pointer hover:bg-muted",children:[e.jsx(re,{className:"mr-1 h-3 w-3"})," ajutor"]}),e.jsxs(E,{variant:"outline",className:"cursor-pointer hover:bg-muted",children:[e.jsx(re,{className:"mr-1 h-3 w-3"})," raportare"]}),e.jsxs(E,{variant:"outline",className:"cursor-pointer hover:bg-muted",children:[e.jsx(re,{className:"mr-1 h-3 w-3"})," proiecte"]}),e.jsxs(E,{variant:"outline",className:"cursor-pointer hover:bg-muted",children:[e.jsx(re,{className:"mr-1 h-3 w-3"})," tutorial"]}),e.jsxs(E,{variant:"outline",className:"cursor-pointer hover:bg-muted",children:[e.jsx(re,{className:"mr-1 h-3 w-3"})," anaf"]})]})})]}),e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(U,{className:"text-base",children:"Membri activi"})}),e.jsx(I,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:"AB"})}),e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:"CD"})}),e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:"EF"})}),e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:"GH"})}),e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:"IJ"})}),e.jsx(K,{className:"h-8 w-8",children:e.jsx(G,{children:"+27"})})]})})]}),e.jsxs(M,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(U,{className:"text-base",children:"Evenimente"})}),e.jsx(I,{className:"pb-2",children:e.jsx("div",{className:"space-y-2",children:e.jsx(Q,{href:"/collab/community/events/1",className:"block",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-2 rounded-md",children:[e.jsx("p",{className:"font-medium text-sm",children:"Sesiune Q&A Raportare ANAF"}),e.jsxs("p",{className:"text-xs flex items-center text-muted-foreground mt-1",children:[e.jsx(de,{className:"h-3 w-3 mr-1"}),"14 Apr, 14:00"]})]})})})}),e.jsx(_e,{className:"pt-0",children:e.jsx(Q,{href:"/collab/community/events",className:"text-sm text-primary hover:underline",children:"Vezi toate evenimentele"})})]})]})})]})})}function sl(){const{useCommunityThreads:s,useCreateCommunityThread:N}=X(),[r,j]=C.useState(""),[h,f]=C.useState(!1),[v,p]=C.useState(""),[b,w]=C.useState(""),[c,l]=C.useState(!1),[u,g]=C.useState(""),{data:o,isLoading:d}=s({category:$.ANUNTURI}),{mutate:t,isLoading:i}=N(),a=(o==null?void 0:o.threads.filter(m=>!r||m.title.toLowerCase().includes(r.toLowerCase())||m.description&&m.description.toLowerCase().includes(r.toLowerCase())))||[],n=a.filter(m=>m.isPinned),x=a.filter(m=>!m.isPinned),T=()=>{if(!v.trim())return;const m=u.split(",").map(A=>A.trim()).filter(A=>A.length>0);t({title:v,description:b,category:$.ANUNTURI,tags:m,isPublic:!0,isPinned:c,companyId:"7196288d-7314-4512-8b67-2c82449b5465"}),p(""),w(""),l(!1),g(""),f(!1)};return e.jsx(Y,{title:"Anunțuri",subtitle:"Anunțuri importante și știri pentru echipă",activeTab:"community-announcements",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ze,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{placeholder:"Caută anunțuri...",className:"pl-8",value:r,onChange:m=>j(m.target.value)})]}),e.jsxs(us,{open:h,onOpenChange:f,children:[e.jsx(pa,{asChild:!0,children:e.jsxs(S,{children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Anunț nou"]})}),e.jsxs(hs,{children:[e.jsxs(js,{children:[e.jsx(ps,{children:"Publicare anunț nou"}),e.jsx(gs,{children:"Creează un anunț pentru a informa echipa despre actualizări importante."})]}),e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ke,{htmlFor:"title",children:"Titlu anunț"}),e.jsx(ee,{id:"title",placeholder:"Adaugă un titlu concis și clar",value:v,onChange:m=>p(m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ke,{htmlFor:"description",children:"Conținut anunț"}),e.jsx(Ye,{id:"description",placeholder:"Detalii despre anunț...",rows:4,value:b,onChange:m=>w(m.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ke,{htmlFor:"important",children:"Marcați ca important"}),e.jsx(xt,{id:"important",checked:c,onCheckedChange:l})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Anunțurile importante apar la început și sunt evidențiate."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ke,{htmlFor:"tags",children:"Tag-uri (separate prin virgulă)"}),e.jsx(ee,{id:"tags",placeholder:"Ex: important, update, sistem",value:u,onChange:m=>g(m.target.value)})]})]}),e.jsxs(ga,{children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Anulează"}),e.jsx(S,{type:"button",onClick:T,disabled:!v.trim()||i,children:i?"Se publică...":"Publică anunț"})]})]})]})]}),n.length>0&&e.jsxs(M,{className:"border-amber-300",children:[e.jsx(L,{className:"pb-2",children:e.jsxs(U,{className:"flex items-center text-lg",children:[e.jsx(fe,{className:"h-5 w-5 mr-2 text-amber-500"}),"Anunțuri importante"]})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-4",children:n.map(m=>{var A,R;return e.jsxs("div",{className:"flex items-start gap-4 pb-4 border-b",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center bg-amber-100 rounded-full",children:e.jsx(Be,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{href:`/collab/community/announcements/${m.id}`,children:e.jsx("h3",{className:"font-medium hover:underline",children:m.title})}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:m.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(A=m.tags)==null?void 0:A.map((D,V)=>e.jsx(E,{variant:"outline",className:"text-xs",children:D},V))}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),new Date(m.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),m.viewCount||0]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(K,{className:"h-6 w-6",children:e.jsx(G,{children:((R=m.createdBy)==null?void 0:R.substring(0,2).toUpperCase())||"U"})})})]})]})]},m.id)})})})]}),e.jsxs(M,{children:[e.jsxs(L,{children:[e.jsx(U,{children:"Toate anunțurile"}),e.jsx(We,{children:"Anunțuri și actualizări pentru echipă"})]}),e.jsx(I,{children:d?e.jsx("div",{className:"space-y-4",children:Array(3).fill(0).map((m,A)=>e.jsxs("div",{className:"flex items-start gap-4 pb-4 border-b",children:[e.jsx(ce,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"w-full space-y-2",children:[e.jsx(ce,{className:"h-5 w-4/5"}),e.jsx(ce,{className:"h-4 w-full"}),e.jsx(ce,{className:"h-4 w-2/3"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{className:"h-6 w-14"}),e.jsx(ce,{className:"h-6 w-14"})]})]})]},A))}):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Niciun anunț găsit"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:r?"Nu am găsit anunțuri care să corespundă căutării tale.":"Nu există încă anunțuri în această categorie."}),e.jsx(S,{onClick:()=>f(!0),children:"Creează primul anunț"})]}):e.jsx("div",{className:"space-y-4",children:x.map(m=>{var A,R;return e.jsxs("div",{className:"flex items-start gap-4 pb-4 border-b",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center bg-blue-100 rounded-full",children:e.jsx(Be,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{href:`/collab/community/announcements/${m.id}`,children:e.jsx("h3",{className:"font-medium hover:underline",children:m.title})}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:m.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(A=m.tags)==null?void 0:A.map((D,V)=>e.jsx(E,{variant:"outline",className:"text-xs",children:D},V))}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),new Date(m.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),m.viewCount||0]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(K,{className:"h-6 w-6",children:e.jsx(G,{children:((R=m.createdBy)==null?void 0:R.substring(0,2).toUpperCase())||"U"})})})]})]})]},m.id)})})}),x.length>0&&e.jsx(_e,{children:e.jsx(S,{variant:"outline",className:"w-full",children:"Încarcă mai multe"})})]})]})})}const za=({title:s,description:N,icon:r=e.jsx(ft,{className:"h-12 w-12 text-muted-foreground"}),action:j})=>e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-4 text-center bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[r,e.jsx("h3",{className:"text-lg font-medium",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:N})]}),j&&e.jsx("div",{className:"mt-4",children:j})]}),al=()=>{const[,s]=Ee(),{toast:N}=vs(),[r,j]=C.useState(!1),[h,f]=C.useState(""),[v,p]=C.useState("all"),{data:b,isLoading:w}=X().useCommunityThreads({category:$.INTREBARI,search:h||void 0}),{mutate:c}=X().useCreateCommunityThread(),l=bs.useMemo(()=>{if(!(b!=null&&b.threads))return[];let g=[...b.threads];return v==="popular"?g.sort((o,d)=>(d.replyCount||0)-(o.replyCount||0)):v==="recent"&&g.sort((o,d)=>new Date(d.createdAt).getTime()-new Date(o.createdAt).getTime()),g},[b==null?void 0:b.threads,v]),u=async g=>{try{await c({...g,category:$.INTREBARI,companyId:"current",userId:"current"}),j(!1),N({title:"Întrebare creată",description:"Întrebarea ta a fost adăugată cu succes în comunitate."})}catch(o){console.error("Error creating thread:",o),N({title:"Eroare",description:"Nu am putut crea întrebarea. Te rugăm să încerci din nou.",variant:"destructive"})}};return e.jsx(Y,{title:"Întrebări și Răspunsuri",subtitle:"Întreabă comunitatea și descoperă răspunsuri la întrebările tale",activeTab:"community-questions",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ze,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{type:"search",placeholder:"Caută întrebări...",className:"w-full pl-8",value:h,onChange:g=>f(g.target.value)})]}),e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Filtrează"]})}),e.jsxs(Se,{align:"end",children:[e.jsx(H,{onClick:()=>p("all"),children:"Toate întrebările"}),e.jsx(H,{onClick:()=>p("popular"),children:"Cele mai populare"}),e.jsx(H,{onClick:()=>p("recent"),children:"Cele mai recente"})]})]}),e.jsxs(S,{onClick:()=>j(!0),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Adaugă o întrebare"]})]}),w?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>e.jsxs(M,{children:[e.jsxs(L,{children:[e.jsx(ce,{className:"h-5 w-2/3"}),e.jsx(ce,{className:"h-4 w-1/3"})]}),e.jsx(I,{children:e.jsx(ce,{className:"h-20 w-full"})})]},g))}):l.length===0?e.jsx(za,{title:"Nu există întrebări",description:"Nu am găsit nicio întrebare care să corespundă criteriilor tale de căutare.",action:e.jsxs(S,{onClick:()=>j(!0),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Adaugă prima întrebare"]})}):e.jsx("div",{className:"space-y-4",children:l.map(g=>{var o,d,t;return e.jsxs(M,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s(`/collab/community/questions/${g.id}`),children:[e.jsxs(L,{children:[e.jsx(U,{className:"text-xl",children:g.title}),e.jsxs(We,{className:"flex items-center space-x-2",children:[e.jsxs(K,{className:"h-6 w-6",children:[e.jsx(Zs,{src:`https://avatar.vercel.sh/${g.createdBy||"user"}.png`}),e.jsx(G,{children:(g.createdBy||"U").substring(0,1).toUpperCase()})]}),e.jsx("span",{children:g.createdBy||"Utilizator"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground ml-2"}),e.jsx("span",{className:"text-muted-foreground",children:$s(new Date(g.createdAt),{locale:Te,addSuffix:!0})})]})]}),e.jsxs(I,{children:[e.jsx("div",{className:"line-clamp-3",children:g.description||"Fără descriere"}),e.jsx("div",{className:"mt-4 flex gap-2",children:((o=g.metadata)==null?void 0:o.tags)&&Array.isArray(g.metadata.tags)&&g.metadata.tags.map((i,a)=>e.jsx(E,{variant:"secondary",children:i},a))})]}),e.jsxs(_e,{className:"flex justify-between pt-2",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[g.replyCount||0," răspunsuri"]})]}),((d=g.metadata)==null?void 0:d.likes)&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ss,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[g.metadata.likes," aprecieri"]})]})]}),e.jsx("div",{children:((t=g.metadata)==null?void 0:t.solved)&&e.jsx(E,{variant:"secondary",children:"Rezolvat"})})]})]},g.id)})}),e.jsx(Oe,{isOpen:r,onClose:()=>j(!1),onSubmit:u,category:$.INTREBARI})]})})};function tl(){const[,s]=Ee(),{toast:N}=vs(),[r,j]=C.useState(!1),[h,f]=C.useState(""),[v,p]=C.useState("all"),{data:b,isLoading:w}=X().useCommunityThreads({category:$.IDEI,search:h||void 0}),{mutate:c}=X().useCreateCommunityThread(),l=bs.useMemo(()=>{if(!(b!=null&&b.threads))return[];let o=[...b.threads];return v==="implemented"?o=o.filter(d=>{var t;return((t=d.metadata)==null?void 0:t.status)==="implemented"}):v==="pending"&&(o=o.filter(d=>{var t,i;return((t=d.metadata)==null?void 0:t.status)==="pending"||((i=d.metadata)==null?void 0:i.status)==="review"})),v==="popular"?o.sort((d,t)=>{var i,a;return(((i=t.metadata)==null?void 0:i.votes)||0)-(((a=d.metadata)==null?void 0:a.votes)||0)}):v==="recent"&&o.sort((d,t)=>new Date(t.createdAt).getTime()-new Date(d.createdAt).getTime()),o},[b==null?void 0:b.threads,v]),u=async o=>{try{await c({...o,category:$.IDEI,companyId:"current",userId:"current",metadata:{...o.metadata||{},votes:0,status:"pending"}}),j(!1),N({title:"Idee creată",description:"Ideea ta a fost adăugată cu succes în comunitate."})}catch(d){console.error("Error creating idea:",d),N({title:"Eroare",description:"Nu am putut crea ideea. Te rugăm să încerci din nou.",variant:"destructive"})}},g=o=>{switch(o==null?void 0:o.toLowerCase()){case"implemented":return e.jsx(E,{className:"bg-green-500 hover:bg-green-600",children:"Implementată"});case"in_progress":return e.jsx(E,{className:"bg-blue-500 hover:bg-blue-600",children:"În lucru"});case"review":return e.jsx(E,{className:"bg-yellow-500 hover:bg-yellow-600",children:"În analiză"});case"rejected":return e.jsx(E,{className:"bg-red-500 hover:bg-red-600",children:"Respinsă"});default:return e.jsx(E,{className:"bg-gray-500 hover:bg-gray-600",children:"În așteptare"})}};return e.jsx(Y,{title:"Idei și Sugestii",subtitle:"Propune idei și sugestii pentru îmbunătățirea produselor și serviciilor",activeTab:"community-ideas",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ze,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{type:"search",placeholder:"Caută idei...",className:"w-full pl-8",value:h,onChange:o=>f(o.target.value)})]}),e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Filtrează"]})}),e.jsxs(Se,{align:"end",children:[e.jsx(H,{onClick:()=>p("all"),children:"Toate ideile"}),e.jsx(H,{onClick:()=>p("popular"),children:"Cele mai votate"}),e.jsx(H,{onClick:()=>p("recent"),children:"Cele mai recente"}),e.jsx(H,{onClick:()=>p("implemented"),children:"Implementate"}),e.jsx(H,{onClick:()=>p("pending"),children:"În așteptare"})]})]}),e.jsxs(S,{onClick:()=>j(!0),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Propune o idee"]})]}),w?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(o=>e.jsxs(M,{children:[e.jsxs(L,{children:[e.jsx(ce,{className:"h-5 w-2/3"}),e.jsx(ce,{className:"h-4 w-1/3"})]}),e.jsx(I,{children:e.jsx(ce,{className:"h-20 w-full"})})]},o))}):l.length===0?e.jsx(za,{title:"Nu există idei",description:"Nu am găsit nicio idee care să corespundă criteriilor tale de căutare.",action:e.jsxs(S,{onClick:()=>j(!0),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Propune prima idee"]})}):e.jsx("div",{className:"space-y-4",children:l.map(o=>{var d,t,i,a;return e.jsxs(M,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s(`/collab/community/ideas/${o.id}`),children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(U,{className:"text-xl",children:o.title}),g((d=o.metadata)==null?void 0:d.status)]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsxs(K,{className:"h-6 w-6",children:[e.jsx(Zs,{src:`https://avatar.vercel.sh/${o.createdBy||"user"}.png`}),e.jsx(G,{children:(o.createdBy||"U").substring(0,1).toUpperCase()})]}),e.jsx("span",{children:o.createdBy||"Utilizator"}),e.jsx(se,{className:"h-4 w-4 ml-2"}),e.jsx("span",{children:$s(new Date(o.createdAt),{locale:Te,addSuffix:!0})})]})]}),e.jsxs(I,{children:[e.jsx("div",{className:"line-clamp-3",children:o.description||"Fără descriere"}),e.jsx("div",{className:"mt-4 flex gap-2",children:((t=o.metadata)==null?void 0:t.tags)&&Array.isArray(o.metadata.tags)&&o.metadata.tags.map((n,x)=>e.jsx(E,{variant:"secondary",children:n},x))})]}),e.jsxs(_e,{className:"flex justify-between pt-2",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ss,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[((i=o.metadata)==null?void 0:i.votes)||0," voturi"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[o.replyCount||0," comentarii"]})]})]}),e.jsx("div",{className:"flex items-center text-sm text-muted-foreground",children:((a=o.metadata)==null?void 0:a.estimatedDelivery)&&e.jsxs("span",{children:["Estimat: ",o.metadata.estimatedDelivery]})})]})]},o.id)})}),e.jsx(Oe,{isOpen:r,onClose:()=>j(!1),onSubmit:u,category:$.IDEI,extraFields:[{id:"tags",label:"Etichete (separate prin virgulă)",type:"text",placeholder:"ex: UI, performanță, factură"}]})]})})}const ll=({thread:s,basePath:N,statusBadge:r,extraContent:j,extraFooter:h})=>{var v,p,b;const[,f]=Ee();return e.jsxs(M,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>f(`${N}/${s.id}`),children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-xl",children:s.title}),e.jsxs(We,{className:"flex items-center space-x-2",children:[e.jsxs(K,{className:"h-6 w-6",children:[e.jsx(Zs,{src:`https://avatar.vercel.sh/${s.createdBy||"user"}.png`}),e.jsx(G,{children:(s.createdBy||"U").substring(0,1).toUpperCase()})]}),e.jsx("span",{children:s.createdBy||"Utilizator"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground ml-2"}),e.jsx("span",{className:"text-muted-foreground",children:$s(new Date(s.createdAt),{locale:Te,addSuffix:!0})})]})]}),r]})}),e.jsxs(I,{children:[e.jsx("div",{className:"line-clamp-3 mb-4",children:s.description||"Fără descriere"}),j,e.jsx("div",{className:"mt-4 flex gap-2",children:((v=s.metadata)==null?void 0:v.tags)&&Array.isArray(s.metadata.tags)&&s.metadata.tags.map((w,c)=>e.jsx(E,{variant:"secondary",children:w},c))})]}),e.jsxs(_e,{className:"flex justify-between pt-2",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.replyCount||0," comentarii"]})]}),((p=s.metadata)==null?void 0:p.likes)&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ss,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.metadata.likes," aprecieri"]})]}),((b=s.metadata)==null?void 0:b.votes)&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ss,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.metadata.votes," voturi"]})]})]}),h]})]})};function il(){Ee();const{toast:s}=vs(),[N,r]=C.useState(!1),[j,h]=C.useState(""),[f,v]=C.useState("all"),{data:p,isLoading:b}=X().useCommunityThreads({category:$.EVENIMENTE,search:j||void 0}),{mutate:w}=X().useCreateCommunityThread(),c=bs.useMemo(()=>{if(!(p!=null&&p.threads))return[];let o=[...p.threads];const d=new Date;return d.setHours(0,0,0,0),f==="upcoming"?o=o.filter(t=>{var a;const i=(a=t.metadata)!=null&&a.eventDate?new Date(t.metadata.eventDate):null;return i&&i>=d}):f==="past"?o=o.filter(t=>{var a;const i=(a=t.metadata)!=null&&a.eventDate?new Date(t.metadata.eventDate):null;return i&&i<d}):f==="today"&&(o=o.filter(t=>{var a;const i=(a=t.metadata)!=null&&a.eventDate?new Date(t.metadata.eventDate):null;return i?i.getDate()===d.getDate()&&i.getMonth()===d.getMonth()&&i.getFullYear()===d.getFullYear():!1})),o.sort((t,i)=>{var x,T;const a=(x=t.metadata)!=null&&x.eventDate?new Date(t.metadata.eventDate):new Date(t.createdAt),n=(T=i.metadata)!=null&&T.eventDate?new Date(i.metadata.eventDate):new Date(i.createdAt);return a.getTime()-n.getTime()}),o},[p==null?void 0:p.threads,f]),l=async o=>{var d,t,i;try{let a=((d=o.metadata)==null?void 0:d.eventDate)||null,n=((t=o.metadata)==null?void 0:t.eventTime)||null,x=null;if(a)if(n){const[T,m]=n.split(":").map(Number),A=new Date(a);A.setHours(T,m,0,0),x=A.toISOString()}else x=new Date(a).toISOString();await w({...o,category:$.EVENIMENTE,companyId:"current",userId:"current",metadata:{...o.metadata||{},eventDate:x,participants:[],location:((i=o.metadata)==null?void 0:i.location)||null}}),r(!1),s({title:"Eveniment creat",description:"Evenimentul tău a fost adăugat cu succes în comunitate."})}catch(a){console.error("Error creating event:",a),s({title:"Eroare",description:"Nu am putut crea evenimentul. Te rugăm să încerci din nou.",variant:"destructive"})}},u=[{value:"all",label:"Toate evenimentele"},{value:"upcoming",label:"Următoarele evenimente"},{value:"today",label:"Astăzi"},{value:"past",label:"Evenimente trecute"}],g=o=>{var T,m,A,R;const d=(T=o.metadata)!=null&&T.eventDate?new Date(o.metadata.eventDate):null,t=(m=o.metadata)==null?void 0:m.location,i=Array.isArray((A=o.metadata)==null?void 0:A.participants)?(R=o.metadata)==null?void 0:R.participants.length:0,a=new Date;a.setHours(0,0,0,0);let n="upcoming";if(d){const D=new Date(d);D.setHours(0,0,0,0),D.getTime()===a.getTime()?n="today":d<a&&(n="past")}const x=()=>{switch(n){case"upcoming":return e.jsx(E,{className:"bg-blue-500 hover:bg-blue-600",children:"Urmează"});case"today":return e.jsx(E,{className:"bg-green-500 hover:bg-green-600",children:"Astăzi"});case"past":return e.jsx(E,{variant:"outline",children:"Finalizat"})}};return e.jsx(ll,{thread:o,basePath:"/collab/community/events",statusBadge:x(),extraContent:e.jsxs("div",{className:"space-y-2 mt-3 text-sm text-muted-foreground",children:[d&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsxs("span",{children:[He(d,"EEEE, d MMMM yyyy",{locale:Te}),d.getHours()>0||d.getMinutes()>0?` • ${He(d,"HH:mm")}`:""]})]}),t&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),e.jsx("span",{children:t})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsxs("span",{children:[i," participanți"]})]})]}),extraFooter:e.jsx(S,{variant:"outline",size:"sm",disabled:n==="past",onClick:D=>{D.stopPropagation(),s({title:n==="past"?"Eveniment încheiat":"Participare înregistrată",description:n==="past"?"Acest eveniment s-a încheiat deja.":"Te-ai înscris cu succes la acest eveniment."})},children:n==="past"?"Eveniment încheiat":"Participă"})})};return e.jsx(Y,{title:"Evenimente",subtitle:"Descoperă și participă la evenimente organizate în cadrul companiei",activeTab:"community-events",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ze,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{type:"search",placeholder:"Caută evenimente...",className:"w-full pl-8",value:j,onChange:o=>h(o.target.value)})]}),e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Filtrează"]})}),e.jsx(Se,{align:"end",children:u.map(o=>e.jsx(H,{onClick:()=>v(o.value),children:o.label},o.value))})]}),e.jsxs(S,{onClick:()=>r(!0),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Adaugă eveniment"]})]}),b?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(o=>e.jsxs(M,{children:[e.jsxs(L,{children:[e.jsx("div",{className:"h-5 w-2/3 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-1/3 bg-gray-200 rounded animate-pulse"})]}),e.jsx(I,{children:e.jsx("div",{className:"h-20 w-full bg-gray-200 rounded animate-pulse"})})]},o))}):c.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nu există evenimente"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Nu am găsit niciun eveniment care să corespundă criteriilor tale de căutare."}),e.jsx(S,{onClick:()=>r(!0),className:"mt-4",children:"Adaugă primul eveniment"})]})}):e.jsx("div",{className:"space-y-4",children:c.map(o=>g(o))}),e.jsx(Oe,{isOpen:N,onClose:()=>r(!1),onSubmit:l,category:$.EVENIMENTE,extraFields:[{id:"eventDate",label:"Data evenimentului",type:"date",required:!0},{id:"eventTime",label:"Ora evenimentului",type:"time"},{id:"location",label:"Locația",type:"text",placeholder:"Online sau o locație fizică"}]})]})})}function rl(){const{toast:s}=vs(),[N,r]=C.useState(!1),[j,h]=C.useState(""),[f,v]=C.useState("all"),{data:p,isLoading:b}=X().useCommunityThreads({category:"RESURSE",search:j||void 0}),{mutate:w,isLoading:c}=X().useCreateCommunityThread(),l=bs.useMemo(()=>{if(!(p!=null&&p.threads))return[];let d=[...p.threads];return f==="documents"?d=d.filter(t=>{var i,a;return((i=t.metadata)==null?void 0:i.type)==="document"||((a=t.metadata)==null?void 0:a.type)==="file"}):f==="links"&&(d=d.filter(t=>{var i,a;return((i=t.metadata)==null?void 0:i.type)==="link"||((a=t.metadata)==null?void 0:a.type)==="url"})),f==="popular"?d.sort((t,i)=>{var a,n;return(((a=i.metadata)==null?void 0:a.downloads)||0)-(((n=t.metadata)==null?void 0:n.downloads)||0)}):f==="recent"&&d.sort((t,i)=>new Date(i.createdAt).getTime()-new Date(t.createdAt).getTime()),d},[p==null?void 0:p.threads,f]),u=async d=>{try{const t=d.url?"link":"document";await w({...d,category:"RESURSE",companyId:"current",userId:"current",metadata:{...d.metadata||{},type:t,downloads:0,fileSize:d.fileSize||null,fileType:d.fileType||null}}),r(!1),s({title:"Resursă adăugată",description:"Resursa ta a fost adăugată cu succes în comunitate."})}catch(t){console.error("Error creating resource:",t),s({title:"Eroare",description:"Nu am putut crea resursa. Te rugăm să încerci din nou.",variant:"destructive"})}},g=d=>{var a,n,x,T,m;const t=((a=d.metadata)==null?void 0:a.type)==="link"||((n=d.metadata)==null?void 0:n.url),i=(x=d.metadata)!=null&&x.fileType?`${d.metadata.fileType.toUpperCase()}${d.metadata.fileSize?` · ${d.metadata.fileSize}`:""}`:null;return e.jsxs(M,{children:[e.jsx(L,{children:e.jsxs(U,{className:"flex items-start justify-between",children:[e.jsx("span",{children:d.title}),e.jsx(E,{variant:t?"outline":"secondary",children:t?"Link extern":"Document"})]})}),e.jsxs(I,{children:[e.jsx("div",{className:"line-clamp-2 mb-4",children:d.description||"Fără descriere"}),i&&e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:i}),e.jsxs("div",{className:"flex space-x-2 text-sm text-muted-foreground mb-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),$s(new Date(d.createdAt),{locale:Te,addSuffix:!0})]}),((T=d.metadata)==null?void 0:T.downloads)&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(na,{className:"h-4 w-4 mr-1"}),d.metadata.downloads," descărcări"]})]}),e.jsx("div",{className:"flex gap-2",children:((m=d.metadata)==null?void 0:m.tags)&&Array.isArray(d.metadata.tags)&&d.metadata.tags.map((A,R)=>e.jsx(E,{variant:"secondary",children:A},R))})]}),e.jsxs(_e,{className:"flex justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:d.createdBy||"Utilizator"}),e.jsx(S,{size:"sm",variant:"outline",children:t?e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Vizitează"]}):e.jsxs(e.Fragment,{children:[e.jsx(na,{className:"h-4 w-4 mr-2"}),"Descarcă"]})})]})]})},o=[{value:"all",label:"Toate resursele"},{value:"popular",label:"Cele mai populare"},{value:"recent",label:"Cele mai recente"},{value:"documents",label:"Documente"},{value:"links",label:"Linkuri externe"}];return e.jsx(Y,{title:"Resurse",subtitle:"Descoperă și împărtășește resurse utile cu echipa ta",activeTab:"community-resources",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"search",placeholder:"Caută resurse...",className:"w-full pl-8 h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",value:j,onChange:d=>h(d.target.value)})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("select",{className:"h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",value:f,onChange:d=>v(d.target.value),children:o.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})}),e.jsx(S,{onClick:()=>r(!0),children:"Adaugă resursă"})]}),b?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(d=>e.jsxs(M,{children:[e.jsxs(L,{children:[e.jsx("div",{className:"h-5 w-2/3 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-1/3 bg-gray-200 rounded animate-pulse"})]}),e.jsx(I,{children:e.jsx("div",{className:"h-20 w-full bg-gray-200 rounded animate-pulse"})})]},d))}):l.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nu există resurse"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Nu am găsit nicio resursă care să corespundă criteriilor tale de căutare."}),e.jsx(S,{onClick:()=>r(!0),className:"mt-4",children:"Adaugă prima resursă"})]})}):e.jsx("div",{className:"space-y-4",children:l.map(d=>g(d))}),e.jsx(Oe,{isOpen:N,onClose:()=>r(!1),onSubmit:u,category:$.RESURSE,extraFields:[{id:"url",label:"URL (pentru resurse externe)",type:"url",placeholder:"https://example.com/resource"},{id:"tags",label:"Etichete (separate prin virgulă)",type:"text",placeholder:"ex: tutorial, ghid, template"}]})]})})}function ca(){const[,s]=Ee(),{toast:N}=vs(),[r,j]=C.useState(!1),[h,f]=C.useState(""),[v,p]=C.useState("all"),{data:b,isLoading:w}=X().useCommunityThreads({category:"TUTORIALE",search:h||void 0}),{mutate:c,isLoading:l}=X().useCreateCommunityThread(),u=bs.useMemo(()=>{if(!(b!=null&&b.threads))return[];let t=[...b.threads];return v==="beginner"?t=t.filter(i=>{var a,n;return((a=i.metadata)==null?void 0:a.level)==="beginner"||((n=i.metadata)==null?void 0:n.level)==="începător"}):v==="advanced"&&(t=t.filter(i=>{var a,n;return((a=i.metadata)==null?void 0:a.level)==="advanced"||((n=i.metadata)==null?void 0:n.level)==="avansat"})),v==="popular"?t.sort((i,a)=>{var n,x;return(((n=a.metadata)==null?void 0:n.views)||0)-(((x=i.metadata)==null?void 0:x.views)||0)}):v==="recent"&&t.sort((i,a)=>new Date(a.createdAt).getTime()-new Date(i.createdAt).getTime()),t},[b==null?void 0:b.threads,v]),g=async t=>{try{await c({...t,category:"TUTORIALE",companyId:"current",userId:"current",metadata:{...t.metadata||{},views:0,level:t.level||"intermediate",duration:t.duration||null}}),j(!1),N({title:"Tutorial creat",description:"Tutorialul tău a fost adăugat cu succes în comunitate."})}catch(i){console.error("Error creating tutorial:",i),N({title:"Eroare",description:"Nu am putut crea tutorialul. Te rugăm să încerci din nou.",variant:"destructive"})}},o=t=>{switch(t==null?void 0:t.toLowerCase()){case"beginner":case"începător":return e.jsx(E,{className:"bg-green-500 hover:bg-green-600",children:"Începător"});case"advanced":case"avansat":return e.jsx(E,{className:"bg-red-500 hover:bg-red-600",children:"Avansat"});default:return e.jsx(E,{className:"bg-blue-500 hover:bg-blue-600",children:"Intermediar"})}},d=[{value:"all",label:"Toate tutorialele"},{value:"popular",label:"Cele mai populare"},{value:"recent",label:"Cele mai recente"},{value:"beginner",label:"Pentru începători"},{value:"advanced",label:"Pentru avansați"}];return e.jsx(Y,{title:"Tutoriale",subtitle:"Învață și împărtășește cunoștințele tale cu echipa",activeTab:"community-tutorials",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ze,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{type:"search",placeholder:"Caută tutoriale...",className:"w-full pl-8",value:h,onChange:t=>f(t.target.value)})]}),e.jsxs(ye,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Filtrează"]})}),e.jsx(Se,{align:"end",children:d.map(t=>e.jsx(H,{onClick:()=>p(t.value),children:t.label},t.value))})]}),e.jsxs(S,{onClick:()=>j(!0),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Adaugă tutorial"]})]}),w?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsxs(M,{children:[e.jsxs(L,{children:[e.jsx("div",{className:"h-5 w-2/3 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-1/3 bg-gray-200 rounded animate-pulse"})]}),e.jsx(I,{children:e.jsx("div",{className:"h-20 w-full bg-gray-200 rounded animate-pulse"})})]},t))}):u.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nu există tutoriale"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Nu am găsit niciun tutorial care să corespundă criteriilor tale de căutare."}),e.jsx(S,{onClick:()=>j(!0),className:"mt-4",children:"Adaugă primul tutorial"})]})}):e.jsx("div",{className:"space-y-4",children:u.map(t=>{var i,a,n,x,T;return e.jsxs(M,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s(`/collab/community/tutorials/${t.id}`),children:[e.jsx(L,{children:e.jsxs(U,{className:"flex items-start justify-between",children:[e.jsx("span",{children:t.title}),o((i=t.metadata)==null?void 0:i.level)]})}),e.jsxs(I,{children:[e.jsx("div",{className:"line-clamp-3 mb-4",children:t.description||"Fără descriere"}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground mt-2 mb-2",children:[((a=t.metadata)==null?void 0:a.duration)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:[t.metadata.duration," min"]})]}),((n=t.metadata)==null?void 0:n.views)!==void 0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:[t.metadata.views," vizualizări"]})]}),((x=t.metadata)==null?void 0:x.rating)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(as,{className:"h-4 w-4 mr-1 text-yellow-500"}),e.jsxs("span",{children:[t.metadata.rating,"/5"]})]})]}),e.jsx("div",{className:"flex gap-2 mt-2",children:((T=t.metadata)==null?void 0:T.tags)&&Array.isArray(t.metadata.tags)&&t.metadata.tags.map((m,A)=>e.jsx(E,{variant:"secondary",children:m},A))})]})]},t.id)})}),e.jsx(Oe,{isOpen:r,onClose:()=>j(!1),onSubmit:g,category:$.TUTORIALE,extraFields:[{id:"level",label:"Nivel de dificultate",type:"select",options:[{value:"beginner",label:"Începător"},{value:"intermediate",label:"Intermediar"},{value:"advanced",label:"Avansat"}]},{id:"duration",label:"Durată estimată (minute)",type:"number",placeholder:"ex: 15"},{id:"tags",label:"Etichete (separate prin virgulă)",type:"text",placeholder:"ex: Raportare, Excel, Financiar"}]})]})})}function ol(){return e.jsx(jt,{children:e.jsxs(pt,{children:[e.jsx(B,{path:"/collab",children:e.jsx(Kt,{})}),e.jsx(B,{path:"/collab/tasks/new",children:e.jsx(Us,{})}),e.jsx(B,{path:"/collab/tasks/:id/edit",children:e.jsx(Us,{})}),e.jsx(B,{path:"/collab/tasks/:id",children:e.jsx(Us,{})}),e.jsx(B,{path:"/collab/tasks",children:e.jsx(qt,{})}),e.jsx(B,{path:"/collab/notes/new",children:e.jsx(ks,{})}),e.jsx(B,{path:"/collab/notes/:id/edit",children:e.jsx(ks,{})}),e.jsx(B,{path:"/collab/notes/:id",children:e.jsx(ks,{})}),e.jsx(B,{path:"/collab/notes",children:e.jsx(Yt,{})}),e.jsx(B,{path:"/collab/threads/new",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/threads/:id/edit",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/threads/:id",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/threads",children:e.jsx(Xt,{})}),e.jsx(B,{path:"/collab/messages/:id",children:e.jsx(Zt,{})}),e.jsx(B,{path:"/collab/messages",children:e.jsx(Jt,{})}),e.jsx(B,{path:"/collab/community/announcements/:id",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/community/announcements",children:e.jsx(sl,{})}),e.jsx(B,{path:"/collab/community/questions/:id",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/community/questions",children:e.jsx(al,{})}),e.jsx(B,{path:"/collab/community/ideas/:id",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/community/ideas",children:e.jsx(tl,{})}),e.jsx(B,{path:"/collab/community/events/:id",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/community/events",children:e.jsx(il,{})}),e.jsx(B,{path:"/collab/community/resources/:id",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/community/resources",children:e.jsx(rl,{})}),e.jsx(B,{path:"/collab/community/tutorials/:id",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/community/TUTORIALE/:id",children:e.jsx(De,{})}),e.jsx(B,{path:"/collab/community/tutorials",children:e.jsx(ca,{})}),e.jsx(B,{path:"/collab/community/TUTORIALE",children:e.jsx(ca,{})}),e.jsx(B,{path:"/collab/community",children:e.jsx(el,{})}),e.jsx(B,{path:"/collab/settings",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Setări Colaborare"}),e.jsx("p",{className:"mt-4",children:"Setările pentru modulul de colaborare vor fi disponibile în curând."})]})}),e.jsx(B,{children:e.jsx(gt,{})})]})})}export{ol as default};
