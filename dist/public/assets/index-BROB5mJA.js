import{w as X,f as re,aR as Q,t as ce,bg as le,r as V,j as e,aS as ne,aU as de,aV as me,aW as oe,bC as xe,F as ue,cO as c,i as N,k as g,l as v,m as f,I as T,o as y,n as b,a3 as he,a4 as pe,a5 as je,a6 as Ne,a7 as D,ay as ge,cP as L,bD as ve,B as d,bi as F,bo as fe,cl as ye,a as be,u as De,av as we,ak as K,aw as w,cG as R,C as I,g as m,h as o,cQ as l,cR as h,cS as U,aY as Ce,cn as Se,cT as Te,bv as G,af as Fe,ag as Ee,ah as E,aj as P,p as Pe,cU as ke,al as C}from"./index-BzQLEEGE.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=X("FileX2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m8 12.5-5 5",key:"b853mi"}],["path",{d:"m3 12.5 5 5",key:"1qls4r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=X("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]),Me=le({paymentAmount:F().refine(i=>!isNaN(parseFloat(i))&&parseFloat(i)>0,{message:"Suma trebuie să fie un număr pozitiv"}),paymentMethod:fe(["bank_transfer","cash","card","check","credit"],{required_error:"Selectați metoda de plată"}),paymentDate:F({required_error:"Selectați data plății"}),paymentReference:F().optional(),notes:F().optional()});function Re({invoice:i,isOpen:p,onOpenChange:r,onPaymentSubmit:q,isSubmitting:x=!1}){const a=re({resolver:ce(Me),defaultValues:{paymentAmount:(i==null?void 0:i.grossTotal.toString())||"",paymentMethod:"bank_transfer",paymentDate:Q(new Date,"yyyy-MM-dd"),paymentReference:"",notes:""}});V.useEffect(()=>{i&&a.reset({paymentAmount:i.grossTotal.toString(),paymentMethod:"bank_transfer",paymentDate:Q(new Date,"yyyy-MM-dd"),paymentReference:"",notes:""})},[i,a]);const u=n=>{i&&q(n,i.id)};return i?e.jsx(ne,{open:p,onOpenChange:r,children:e.jsxs(de,{className:"sm:max-w-[425px]",children:[e.jsxs(me,{children:[e.jsx(oe,{children:"Înregistrare plată"}),e.jsxs(xe,{children:["Completați detaliile de plată pentru factura ",i.invoiceNumber]})]}),e.jsx(ue,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(u),className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted rounded-md p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Factură"}),e.jsx("span",{className:"font-medium",children:i.invoiceNumber})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Client"}),e.jsx("span",{className:"font-medium",children:i.customerName})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total de plată"}),e.jsx("span",{className:"font-medium",children:c(i.grossTotal)})]})]}),e.jsx(N,{control:a.control,name:"paymentAmount",render:({field:n})=>e.jsxs(g,{children:[e.jsx(v,{children:"Suma plătită"}),e.jsx(f,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(T,{type:"number",step:"0.01",placeholder:"0.00",className:"pl-8",...n})]})}),e.jsx(y,{children:"Introduceți suma plătită de client"}),e.jsx(b,{})]})}),e.jsx(N,{control:a.control,name:"paymentMethod",render:({field:n})=>e.jsxs(g,{children:[e.jsx(v,{children:"Metodă de plată"}),e.jsxs(he,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(f,{children:e.jsx(pe,{children:e.jsx(je,{placeholder:"Selectați metoda de plată"})})}),e.jsxs(Ne,{children:[e.jsx(D,{value:"bank_transfer",children:"Transfer bancar"}),e.jsx(D,{value:"cash",children:"Numerar"}),e.jsx(D,{value:"card",children:"Card"}),e.jsx(D,{value:"check",children:"CEC / BO"}),e.jsx(D,{value:"credit",children:"Credit"})]})]}),e.jsx(y,{children:"Selectați metoda prin care s-a efectuat plata"}),e.jsx(b,{})]})}),e.jsx(N,{control:a.control,name:"paymentDate",render:({field:n})=>e.jsxs(g,{children:[e.jsx(v,{children:"Data plății"}),e.jsx(f,{children:e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(T,{type:"date",className:"pl-8",...n})]})}),e.jsx(y,{children:"Data la care s-a efectuat plata"}),e.jsx(b,{})]})}),e.jsx(N,{control:a.control,name:"paymentReference",render:({field:n})=>e.jsxs(g,{children:[e.jsx(v,{children:"Referință plată"}),e.jsx(f,{children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(T,{placeholder:"Număr OP, referință, etc.",className:"pl-8",...n})]})}),e.jsx(y,{children:"Referința tranzacției (ex: număr ordin de plată, referință bancară)"}),e.jsx(b,{})]})}),e.jsx(N,{control:a.control,name:"notes",render:({field:n})=>e.jsxs(g,{children:[e.jsx(v,{children:"Note"}),e.jsx(f,{children:e.jsx(T,{placeholder:"Observații referitoare la plată",...n})}),e.jsx(y,{children:"Orice informații suplimentare despre plată"}),e.jsx(b,{})]})}),e.jsxs(ve,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:x,children:"Anulează"}),e.jsx(d,{type:"submit",disabled:x,children:x?"Se salvează...":"Înregistrează plata"})]})]})})]})}):null}function Ve(){const[i,p]=ye("/facturare/invoices/:id"),r=(p==null?void 0:p.id)||"",[q,x]=be(),{toast:a}=De(),u=we(),[n,Z]=V.useState("details"),[J,k]=V.useState(!1),{data:s,isLoading:W,isError:Y}=K({queryKey:["/api/invoicing/invoices",r],select:t=>t,enabled:!!r}),{data:S,isLoading:ee}=K({queryKey:["/api/invoicing/invoice-items",r],select:t=>t,enabled:!!r}),O=w({mutationFn:async()=>C(`/api/invoicing/invoices/${r}/validate`,{method:"POST"}),onSuccess:()=>{a({title:"Succes!",description:"Factura a fost validată cu succes."}),u.invalidateQueries({queryKey:["/api/invoicing/invoices",r]}),u.invalidateQueries({queryKey:["/api/invoicing/statistics"]})},onError:t=>{a({title:"Eroare",description:`Nu s-a putut valida factura: ${t.message||"Eroare necunoscută"}`,variant:"destructive"})}}),z=w({mutationFn:async()=>C(`/api/invoicing/invoices/${r}/cancel`,{method:"POST"}),onSuccess:()=>{a({title:"Succes!",description:"Factura a fost anulată cu succes."}),u.invalidateQueries({queryKey:["/api/invoicing/invoices",r]}),u.invalidateQueries({queryKey:["/api/invoicing/statistics"]})},onError:t=>{a({title:"Eroare",description:`Nu s-a putut anula factura: ${t.message||"Eroare necunoscută"}`,variant:"destructive"})}}),A=w({mutationFn:async t=>C(`/api/invoicing/invoices/${r}/pay`,{method:"POST",data:t}),onSuccess:()=>{a({title:"Succes!",description:"Plata a fost înregistrată cu succes."}),k(!1),u.invalidateQueries({queryKey:["/api/invoicing/invoices",r]}),u.invalidateQueries({queryKey:["/api/invoicing/statistics"]})},onError:t=>{a({title:"Eroare",description:`Nu s-a putut înregistra plata: ${t.message||"Eroare necunoscută"}`,variant:"destructive"})}}),B=w({mutationFn:async()=>C(`/api/invoicing/invoices/${r}/pdf`,{method:"GET",responseType:"blob"}),onSuccess:t=>{const M=new Blob([t],{type:"application/pdf"}),_=window.URL.createObjectURL(M),j=document.createElement("a");j.href=_,j.download=`Factura_${(s==null?void 0:s.invoiceNumber)||r}.pdf`,document.body.appendChild(j),j.click(),window.URL.revokeObjectURL(_),document.body.removeChild(j),a({title:"Succes!",description:"Factura a fost descărcată ca PDF."})},onError:t=>{a({title:"Eroare",description:`Nu s-a putut descărca PDF-ul: ${t.message||"Eroare necunoscută"}`,variant:"destructive"})}}),$=w({mutationFn:async()=>C(`/api/invoicing/invoices/${r}/send-email`,{method:"POST"}),onSuccess:()=>{a({title:"Succes!",description:"Factura a fost trimisă pe email cu succes."})},onError:t=>{a({title:"Eroare",description:`Nu s-a putut trimite factura pe email: ${t.message||"Eroare necunoscută"}`,variant:"destructive"})}}),se=t=>{A.mutate(t)};if(W)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(R,{title:"Se încarcă factura...",description:"Se încarcă datele facturii"}),e.jsxs(d,{variant:"outline",onClick:()=>x("/facturare/invoices"),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Înapoi la facturi"]})]}),e.jsx(m,{children:e.jsx(o,{className:"flex items-center justify-center min-h-[400px]",children:"Se încarcă..."})})]});if(Y||!s)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(R,{title:"Eroare",description:"Nu s-a putut încărca factura"}),e.jsxs(d,{variant:"outline",onClick:()=>x("/facturare/invoices"),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Înapoi la facturi"]})]}),e.jsx(m,{children:e.jsxs(o,{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("p",{className:"text-red-500 mb-4",children:"A apărut o eroare la încărcarea facturii."}),e.jsx(d,{onClick:()=>window.location.reload(),children:"Reîncarcă"})]})})]});const te=s.status===l.DRAFT,ae=[l.VALIDATED,l.PENDING,l.OVERDUE].includes(s.status),ie=![l.PAID,l.CANCELED].includes(s.status);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{title:`Factura ${s.invoiceNumber}`,description:`Emisă pe ${h(new Date(s.issueDate))}`}),e.jsx("div",{className:"mt-2",children:e.jsx(U,{status:s.status})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(d,{variant:"outline",onClick:()=>x("/facturare/invoices"),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Înapoi"]}),e.jsxs(d,{variant:"outline",onClick:()=>B.mutate(),disabled:B.isPending,children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"}),"PDF"]}),e.jsxs(d,{variant:"outline",onClick:()=>$.mutate(),disabled:$.isPending,children:[e.jsx(Se,{className:"mr-2 h-4 w-4"}),"Email"]}),e.jsxs(d,{variant:"outline",onClick:()=>x(`/facturare/invoices/edit/${s.id}`),children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Editează"]}),te&&e.jsxs(d,{variant:"default",onClick:()=>O.mutate(),disabled:O.isPending,children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Validează"]}),ae&&e.jsxs(d,{variant:"default",onClick:()=>k(!0),disabled:A.isPending,children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Înregistrează plata"]}),ie&&e.jsxs(d,{variant:"outline",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>z.mutate(),disabled:z.isPending,children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Anulează"]})]})]}),e.jsxs(Fe,{defaultValue:"details",value:n,onValueChange:Z,children:[e.jsxs(Ee,{children:[e.jsx(E,{value:"details",children:"Detalii factură"}),e.jsx(E,{value:"items",children:"Produse și servicii"}),e.jsx(E,{value:"accounting",children:"Contabilitate"}),e.jsx(E,{value:"history",children:"Istoric"})]}),e.jsxs(P,{value:"details",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(m,{children:e.jsxs(o,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informații client"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Denumire"}),e.jsx("div",{className:"text-sm font-medium text-right",children:s.customerName})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Cod fiscal"}),e.jsx("div",{className:"text-sm font-medium text-right",children:"RO12345678"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Nr. Reg. Com."}),e.jsx("div",{className:"text-sm font-medium text-right",children:"J40/123/2023"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Adresă"}),e.jsx("div",{className:"text-sm font-medium text-right",children:"Str. Exemplului nr. 123, București"})]})]})]})}),e.jsx(m,{children:e.jsxs(o,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informații factură"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Număr factură"}),e.jsx("div",{className:"text-sm font-medium text-right",children:s.invoiceNumber})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Data emiterii"}),e.jsx("div",{className:"text-sm font-medium text-right",children:h(new Date(s.issueDate))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Data scadenței"}),e.jsx("div",{className:"text-sm font-medium text-right",children:h(new Date(s.dueDate))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Metoda de plată"}),e.jsx("div",{className:"text-sm font-medium text-right",children:s.paymentMethod==="bank_transfer"?"Transfer bancar":s.paymentMethod==="cash"?"Numerar":s.paymentMethod==="card"?"Card":s.paymentMethod==="check"?"CEC":s.paymentMethod==="credit"?"Credit":s.paymentMethod})]})]})]})}),e.jsx(m,{children:e.jsxs(o,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informații plată"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx("div",{className:"text-right",children:e.jsx(U,{status:s.status})})]}),s.status===l.PAID&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Data plății"}),e.jsx("div",{className:"text-sm font-medium text-right",children:s.paymentDate?h(new Date(s.paymentDate)):"-"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Referință plată"}),e.jsx("div",{className:"text-sm font-medium text-right",children:s.paymentReference||"-"})]})]}),s.status===l.OVERDUE&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Zile întârziere"}),e.jsxs("div",{className:"text-sm font-medium text-right text-red-600",children:[Math.floor((new Date().getTime()-new Date(s.dueDate).getTime())/(1e3*60*60*24))," zile"]})]}),s.status===l.PENDING&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Zile până la scadență"}),e.jsxs("div",{className:"text-sm font-medium text-right text-amber-600",children:[Math.max(0,Math.floor((new Date(s.dueDate).getTime()-new Date().getTime())/(1e3*60*60*24)))," zile"]})]})]})]})}),e.jsx(m,{children:e.jsxs(o,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Totaluri"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Subtotal"}),e.jsx("div",{className:"text-sm font-medium text-right",children:c(s.netTotal)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["TVA (",s.vatRate,"%)"]}),e.jsx("div",{className:"text-sm font-medium text-right",children:c(s.vatTotal)})]}),e.jsx(Pe,{className:"my-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"font-medium",children:"Total"}),e.jsx("div",{className:"font-bold text-right",children:c(s.grossTotal)})]})]})]})})]}),s.notes&&e.jsx(m,{children:e.jsxs(o,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Note"}),e.jsx("div",{className:"text-sm",children:s.notes})]})})]}),e.jsx(P,{value:"items",children:e.jsx(m,{children:e.jsxs(o,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Produse și servicii"}),ee?e.jsx("div",{className:"text-center py-10",children:"Se încarcă produsele..."}):S!=null&&S.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Nr."}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Produs/Serviciu"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Cantitate"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Preț unitar"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"TVA (%)"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valoare netă"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Valoare TVA"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),e.jsx("tbody",{children:S.map((t,M)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:M+1}),e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("div",{children:t.productName}),t.productCode&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cod: ",t.productCode]}),t.notes&&e.jsx("div",{className:"text-xs text-muted-foreground",children:t.notes})]}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.quantity}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(t.unitPrice)}),e.jsxs("td",{className:"px-4 py-2 text-right",children:[t.vatRate,"%"]}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(t.netAmount)}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(t.vatAmount)}),e.jsx("td",{className:"px-4 py-2 text-right font-medium",children:c(t.grossAmount)})]},t.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{colSpan:5,className:"px-4 py-2 text-right font-medium",children:"Total:"}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(s.netTotal)}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(s.vatTotal)}),e.jsx("td",{className:"px-4 py-2 text-right font-bold",children:c(s.grossTotal)})]})})]})}):e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:"Nu există produse pentru această factură."})]})})}),e.jsx(P,{value:"accounting",children:e.jsx(m,{children:e.jsxs(o,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Înregistrări contabile"}),s.status!==l.VALIDATED&&s.status!==l.PAID?e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:"Înregistrările contabile vor fi disponibile după validarea facturii."}):s.ledgerEntryId?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Cont"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Denumire"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Debit"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Credit"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Explicație"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"4111"}),e.jsx("td",{className:"px-4 py-2",children:"Clienți"}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(s.grossTotal)}),e.jsx("td",{className:"px-4 py-2 text-right",children:"-"}),e.jsxs("td",{className:"px-4 py-2",children:["Factura nr. ",s.invoiceNumber]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"707"}),e.jsx("td",{className:"px-4 py-2",children:"Venituri din vânzarea mărfurilor"}),e.jsx("td",{className:"px-4 py-2 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(s.netTotal)}),e.jsxs("td",{className:"px-4 py-2",children:["Factura nr. ",s.invoiceNumber]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"4427"}),e.jsx("td",{className:"px-4 py-2",children:"TVA colectată"}),e.jsx("td",{className:"px-4 py-2 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(s.vatTotal)}),e.jsxs("td",{className:"px-4 py-2",children:["Factura nr. ",s.invoiceNumber]})]}),s.status===l.PAID&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"5121"}),e.jsx("td",{className:"px-4 py-2",children:"Conturi la bănci în lei"}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(s.grossTotal)}),e.jsx("td",{className:"px-4 py-2 text-right",children:"-"}),e.jsxs("td",{className:"px-4 py-2",children:["Încasare factura nr. ",s.invoiceNumber]})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"4111"}),e.jsx("td",{className:"px-4 py-2",children:"Clienți"}),e.jsx("td",{className:"px-4 py-2 text-right",children:"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:c(s.grossTotal)}),e.jsxs("td",{className:"px-4 py-2",children:["Încasare factura nr. ",s.invoiceNumber]})]})]})]})]})}):e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:"Nu există înregistrări contabile pentru această factură."})]})})}),e.jsx(P,{value:"history",children:e.jsx(m,{children:e.jsxs(o,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Istoric"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 bg-blue-100 p-2 rounded-full text-blue-700",children:e.jsx(ke,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Factură creată"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[h(new Date(s.createdAt))," de către ",s.createdBy||"System"]})]})]}),s.status!==l.DRAFT&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 bg-green-100 p-2 rounded-full text-green-700",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Factură validată"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.validatedAt?h(new Date(s.validatedAt)):"-"," de către ",s.validatedBy||"System"]})]})]}),s.status===l.PAID&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 bg-green-100 p-2 rounded-full text-green-700",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Plată înregistrată"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.paymentDate?h(new Date(s.paymentDate)):"-"}),s.paymentReference&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Referință: ",s.paymentReference]})]})]}),s.status===l.CANCELED&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 bg-red-100 p-2 rounded-full text-red-700",children:e.jsx(H,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Factură anulată"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.canceledAt?h(new Date(s.canceledAt)):"-"," de către ",s.canceledBy||"System"]})]})]})]})]})})})]}),e.jsx(Re,{invoice:s,isOpen:J,onOpenChange:k,onPaymentSubmit:se,isSubmitting:A.isPending})]})}export{Ve as default};
