import{u as H,r as d,d3 as $,j as e,B as r,L as h,ao as B,q as U,I as _,by as q,b6 as J,bu as Q,aY as V,a1 as G,g as K,_ as W,$ as X,h as Y,y as Z,D as ee,E as f,G as m,H as se,J as n,S as j,ai as ae,aJ as ie,aK as te,ch as le,aM as ne,cg as re,aO as k,aN as o,ax as ce,M as de,aE as he,aD as oe,ap as xe,ci as me,aP as je,a8 as ue,a9 as ge,aa as u,ab as pe,ad as fe,ac as Ne,aS as ve,aU as Ce,aV as we,aW as Se,bC as De,bD as be}from"./index-BzQLEEGE.js";import{S as ye,a as Ae,b as ke,c as ze,d as Te,e as Pe,f as Fe,g as Ie}from"./sheet-MC-BHhZs.js";const Me=x=>x?new Date(x).toLocaleDateString("ro-RO"):"-",Re=()=>{const{toast:x}=H(),[v,C]=d.useState(""),[N,g]=d.useState(void 0),[t,c]=d.useState(1),[z,w]=d.useState(!1),[T,p]=d.useState(!1),[S,D]=d.useState(null),{segments:b,total:y,totalPages:i,isLoading:A,deleteSegment:P,updateSegment:F}=$({isActive:N,search:v,page:t,pageSize:10}),I=()=>{c(1),w(!1)},M=()=>{C(""),g(void 0),c(1)},E=s=>{D(s),p(!0)},L=async()=>{S&&(await P.mutateAsync(S),p(!1),D(null))},O=async(s,l)=>{try{await F.mutateAsync({id:s,data:{isActive:!l}}),x({title:"Status actualizat",description:`Segmentul a fost ${l?"dezactivat":"activat"} cu succes.`})}catch(a){console.error("Error toggling segment status:",a)}},R=s=>{x({title:"Acțiune în dezvoltare",description:"Funcționalitatea de duplicare a segmentului va fi disponibilă în curând."})};return e.jsxs("div",{className:"flex-1 space-y-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Segmente Audiență"}),e.jsx(r,{asChild:!0,children:e.jsxs(h,{href:"/marketing/segments/new",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Segment nou"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center justify-between",children:[e.jsxs("div",{className:"relative w-full sm:w-auto flex-1 max-w-sm",children:[e.jsx(U,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(_,{placeholder:"Caută segmente...",className:"pl-8",value:v,onChange:s=>C(s.target.value)})]}),e.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[e.jsxs(ye,{open:z,onOpenChange:w,children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Filtre"})]})}),e.jsxs(ke,{side:"right",children:[e.jsxs(ze,{children:[e.jsx(Te,{children:"Filtrare segmente"}),e.jsx(Pe,{children:"Aplicați filtre pentru a găsi segmentele dorite."})]}),e.jsx("div",{className:"py-6 space-y-4",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{checked:N===!0,onCheckedChange:s=>{g(s?!0:N===!0?void 0:!1)}}),e.jsx(Q,{children:"Doar segmente active"})]})})}),e.jsxs(Fe,{children:[e.jsx(Ie,{asChild:!0,children:e.jsx(r,{variant:"outline",onClick:M,children:"Resetează"})}),e.jsx(r,{onClick:I,children:"Aplică filtre"})]})]})]}),e.jsxs(r,{variant:"outline",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Export"})]}),e.jsxs(r,{variant:"outline",onClick:()=>c(1),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Actualizează"})]})]})]}),e.jsxs(K,{children:[e.jsx(W,{className:"px-6 py-4",children:e.jsxs(X,{children:[y," ",y===1?"segment":"segmente"]})}),e.jsx(Y,{className:"p-0",children:e.jsxs(Z,{children:[e.jsx(ee,{children:e.jsxs(f,{children:[e.jsx(m,{children:"Nume"}),e.jsx(m,{children:"Status"}),e.jsx(m,{className:"hidden md:table-cell",children:"Potențial audiență"}),e.jsx(m,{className:"hidden lg:table-cell",children:"Ultima actualizare"}),e.jsx(m,{className:"text-right",children:"Acțiuni"})]})}),e.jsx(se,{children:A?Array(5).fill(0).map((s,l)=>e.jsxs(f,{children:[e.jsx(n,{children:e.jsx(j,{className:"h-5 w-[200px]"})}),e.jsx(n,{children:e.jsx(j,{className:"h-5 w-[80px]"})}),e.jsx(n,{className:"hidden md:table-cell",children:e.jsx(j,{className:"h-5 w-[80px]"})}),e.jsx(n,{className:"hidden lg:table-cell",children:e.jsx(j,{className:"h-5 w-[120px]"})}),e.jsx(n,{className:"text-right",children:e.jsx(j,{className:"h-9 w-[50px] ml-auto"})})]},l)):b.length===0?e.jsx(f,{children:e.jsx(n,{colSpan:5,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"Nu există segmente care să corespundă filtrelor."}),e.jsx(r,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(h,{href:"/marketing/segments/new",children:"Creați un segment"})})]})})}):b.map(s=>e.jsxs(f,{className:"hover:bg-muted/50",children:[e.jsxs(n,{children:[e.jsx(h,{href:`/marketing/segments/${s.id}`,children:e.jsx("span",{className:"font-medium hover:text-primary hover:underline cursor-pointer",children:s.name})}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-[200px] hidden md:block",children:s.description})]}),e.jsx(n,{children:e.jsx(ae,{variant:"outline",className:s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:s.isActive?"Activ":"Inactiv"})}),e.jsx(n,{className:"hidden md:table-cell",children:s.estimatedReach?s.estimatedReach.toLocaleString():"-"}),e.jsx(n,{className:"hidden lg:table-cell",children:Me(s.lastRefreshedAt||s.updatedAt)}),e.jsx(n,{className:"text-right",children:e.jsxs(ie,{children:[e.jsx(te,{asChild:!0,children:e.jsxs(r,{variant:"ghost",size:"icon",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Acțiuni"})]})}),e.jsxs(ne,{align:"end",className:"w-[180px]",children:[e.jsx(re,{children:"Acțiuni segment"}),e.jsx(k,{}),e.jsx(o,{asChild:!0,children:e.jsxs(h,{href:`/marketing/segments/${s.id}`,children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Vizualizare"]})}),e.jsx(o,{asChild:!0,children:e.jsxs(h,{href:`/marketing/segments/edit/${s.id}`,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Editare"]})}),e.jsx(o,{onClick:()=>O(s.id,!!s.isActive),children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Dezactivează"]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Activează"]})}),e.jsx(o,{asChild:!0,children:e.jsxs(h,{href:`/marketing/campaigns/new?segmentId=${s.id}`,children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Creează campanie"]})}),e.jsxs(o,{onClick:()=>R(s.id),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Duplică"]}),e.jsx(k,{}),e.jsxs(o,{onClick:()=>E(s.id),className:"text-red-600 focus:text-red-600",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Șterge"]})]})]})})]},s.id))})]})})]}),!A&&i>1&&e.jsx(ue,{className:"mx-auto",children:e.jsxs(ge,{children:[e.jsx(u,{children:e.jsx(pe,{onClick:()=>c(s=>Math.max(1,s-1)),className:t===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,i)}).map((s,l)=>{let a;return i<=5||t<=2?a=l+1:t>=i-2+1?a=i-4+l:a=t-2+l,i>5&&l===1&&t>3?e.jsx(u,{children:e.jsx("span",{className:"flex h-9 w-9 items-center justify-center",children:"..."})},"ellipsis-start"):i>5&&l===3&&t<i-2?e.jsx(u,{children:e.jsx("span",{className:"flex h-9 w-9 items-center justify-center",children:"..."})},"ellipsis-end"):a>0&&a<=i&&!(i>5&&a>2&&a<i-1&&(a<t-1||a>t+1))?e.jsx(u,{children:e.jsx(fe,{isActive:t===a,onClick:()=>c(a),children:a})},a):null}),e.jsx(u,{children:e.jsx(Ne,{onClick:()=>c(s=>Math.min(i,s+1)),className:t===i?"pointer-events-none opacity-50":"cursor-pointer"})})]})}),e.jsx(ve,{open:T,onOpenChange:p,children:e.jsxs(Ce,{children:[e.jsxs(we,{children:[e.jsx(Se,{children:"Confirmă ștergerea"}),e.jsx(De,{children:"Sunteți sigur că doriți să ștergeți acest segment? Această acțiune nu poate fi anulată și poate afecta campaniile care folosesc acest segment."})]}),e.jsxs(be,{children:[e.jsx(r,{variant:"outline",onClick:()=>p(!1),children:"Anulează"}),e.jsx(r,{variant:"destructive",onClick:L,children:"Șterge"})]})]})})]})};export{Re as default};
