import{a as D,u as V,dV as H,f as $,t as _,z as c,r as R,j as e,B as l,aQ as k,S as x,g as b,_ as v,h as f,cV as A,cW as E,cX as t,cY as d,cZ as N,be as U,b9 as T,ai as W,d0 as r,aH as O,bN as I,d6 as q,d5 as G,cs as Q,F as X,$ as S,a0 as w,i as m,k as j,l as g,m as h,I as L,o as u,n as p,T as M,a3 as Y,a4 as Z,a5 as J,a6 as K,a7 as i}from"./index-BzQLEEGE.js";const ee=c.object({name:c.string().min(3,{message:"Numele șablonului trebuie să aibă cel puțin 3 caractere."}),description:c.string().optional(),subject:c.string().optional(),content:c.string().optional(),category:c.string().optional(),isActive:c.boolean().optional()}),ne=({id:F})=>{const[se,o]=D(),{toast:C}=V(),{template:s,isLoading:B,updateTemplate:P}=H(F),n=$({resolver:_(ee),defaultValues:{name:"",description:"",subject:"",content:"",category:"",isActive:!1}});R.useEffect(()=>{s&&n.reset({name:s.name,description:s.description||"",subject:s.subject||"",content:s.content||"",category:s.category||"",isActive:s.isActive})},[s,n]);const z=async a=>{if(s)try{const y={name:a.name,description:a.description,subject:a.subject,content:a.content,category:a.category,isActive:a.isActive};await P.mutateAsync({id:s.id,data:y}),C({title:"Șablon actualizat",description:"Șablonul a fost actualizat cu succes."}),o(`/marketing/templates/${s.id}`)}catch(y){console.error("Error updating template:",y),C({title:"Eroare",description:"A apărut o eroare la actualizarea șablonului.",variant:"destructive"})}};return B?e.jsxs("div",{className:"flex-1 space-y-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{variant:"ghost",size:"icon",className:"mr-2",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx(x,{className:"h-9 w-64"})]}),e.jsx(x,{className:"h-10 w-24"})]}),e.jsxs(b,{children:[e.jsx(v,{children:e.jsx(x,{className:"h-6 w-48"})}),e.jsxs(f,{className:"space-y-8",children:[e.jsx(x,{className:"h-24 w-full"}),e.jsx(x,{className:"h-24 w-full"}),e.jsx(x,{className:"h-64 w-full"})]})]})]}):s?e.jsxs("div",{className:"flex-1 space-y-4 p-6",children:[e.jsx(A,{children:e.jsxs(E,{children:[e.jsx(t,{children:e.jsx(d,{href:"/marketing",children:"Marketing"})}),e.jsx(N,{}),e.jsx(t,{children:e.jsx(d,{href:"/marketing/templates",children:"Șabloane"})}),e.jsx(N,{}),e.jsx(t,{children:e.jsx(d,{href:`/marketing/templates/${s.id}`,children:s.name})}),e.jsx(N,{}),e.jsx(t,{children:e.jsx(d,{children:"Editare"})})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(l,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>o(`/marketing/templates/${s.id}`),children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Înapoi"})]}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Editare Șablon"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"outline",onClick:()=>o(`/marketing/templates/${s.id}`),children:"Anulează"}),e.jsxs(l,{onClick:n.handleSubmit(z),children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Salvează"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(W,{variant:"outline",className:"px-2 py-1",children:[s.type===r.EMAIL&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șablon Email"})]}),s.type===r.SMS&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șablon SMS"})]}),s.type===r.SOCIAL&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șablon Social Media"})]}),s.type===r.PUSH&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șablon Push Notificare"})]}),s.type===r.WHATSAPP&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șablon WhatsApp"})]}),s.type===r.MULTI_CHANNEL&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Șablon Multi-canal"})]})]}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Tipul șablonului nu poate fi modificat."})]}),e.jsx(X,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(z),className:"space-y-6",children:[e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Informații Generale"}),e.jsx(w,{children:"Configurați detaliile de bază ale șablonului."})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsx(m,{control:n.control,name:"name",render:({field:a})=>e.jsxs(j,{children:[e.jsx(g,{children:"Nume Șablon"}),e.jsx(h,{children:e.jsx(L,{placeholder:"Nume șablon",...a})}),e.jsx(u,{children:"Numele șablonului va fi utilizat pentru identificare."}),e.jsx(p,{})]})}),e.jsx(m,{control:n.control,name:"description",render:({field:a})=>e.jsxs(j,{children:[e.jsx(g,{children:"Descriere"}),e.jsx(h,{children:e.jsx(M,{placeholder:"Descrieți șablonul",className:"resize-none min-h-[100px]",...a})}),e.jsx(u,{children:"O scurtă descriere a scopului și conținutului șablonului."}),e.jsx(p,{})]})}),e.jsx(m,{control:n.control,name:"category",render:({field:a})=>e.jsxs(j,{children:[e.jsx(g,{children:"Categorie"}),e.jsxs(Y,{onValueChange:a.onChange,defaultValue:a.value,value:a.value||"",children:[e.jsx(h,{children:e.jsx(Z,{children:e.jsx(J,{placeholder:"Selectează o categorie"})})}),e.jsxs(K,{children:[e.jsx(i,{value:"newsletter",children:"Newsletter"}),e.jsx(i,{value:"promotional",children:"Promoțional"}),e.jsx(i,{value:"transactional",children:"Tranzacțional"}),e.jsx(i,{value:"announcement",children:"Anunț"}),e.jsx(i,{value:"event",children:"Eveniment"}),e.jsx(i,{value:"welcome",children:"Bun venit"}),e.jsx(i,{value:"feedback",children:"Feedback"}),e.jsx(i,{value:"reminder",children:"Reminder"}),e.jsx(i,{value:"confirmation",children:"Confirmare"}),e.jsx(i,{value:"other",children:"Altă categorie"})]})]}),e.jsx(u,{children:"Categorizați șablonul pentru o organizare mai bună."}),e.jsx(p,{})]})}),e.jsx(m,{control:n.control,name:"isActive",render:({field:a})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:a.value,onChange:a.onChange,className:"w-4 h-4"}),e.jsx("span",{children:"Activ"})]})}),e.jsx("div",{className:"space-y-1 leading-none",children:e.jsx(u,{children:"Dacă este activ, acest șablon poate fi utilizat în campaniile de marketing."})}),e.jsx(p,{})]})})]})]}),e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Conținut"}),e.jsx(w,{children:"Editați conținutul șablonului."})]}),e.jsxs(f,{className:"space-y-6",children:[(s.type===r.EMAIL||s.type===r.MULTI_CHANNEL)&&e.jsx(m,{control:n.control,name:"subject",render:({field:a})=>e.jsxs(j,{children:[e.jsx(g,{children:"Subiect Email"}),e.jsx(h,{children:e.jsx(L,{placeholder:"Introduceți subiectul",...a})}),e.jsx(u,{children:"Subiectul email-ului creat cu acest șablon."}),e.jsx(p,{})]})}),e.jsx(m,{control:n.control,name:"content",render:({field:a})=>e.jsxs(j,{children:[e.jsx(g,{children:"Conținut"}),e.jsx(h,{children:e.jsx(M,{placeholder:"Introduceți conținutul șablonului",className:"min-h-[300px]",...a})}),e.jsxs(u,{children:["Puteți folosi variabile precum ","{nume}",", ","{prenume}"," pentru personalizare."]}),e.jsx(p,{})]})})]})]}),e.jsxs(b,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Previzualizare"}),e.jsx(w,{children:"Vedeți cum va arăta șablonul în mod real."})]}),e.jsx(f,{children:e.jsx("div",{className:"flex items-center justify-center border rounded-md p-8 bg-muted/30 text-center",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-2",children:"Previzualizarea în timp real va fi disponibilă în curând."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Puteți vizualiza șablonul complet după salvare."})]})})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(l,{variant:"outline",type:"button",onClick:()=>o(`/marketing/templates/${s.id}`),children:"Anulează"}),e.jsxs(l,{type:"submit",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Salvează modificările"]})]})]})})]}):e.jsxs("div",{className:"flex-1 space-y-4 p-6",children:[e.jsx(A,{children:e.jsxs(E,{children:[e.jsx(t,{children:e.jsx(d,{href:"/marketing",children:"Marketing"})}),e.jsx(N,{}),e.jsx(t,{children:e.jsx(d,{href:"/marketing/templates",children:"Șabloane"})}),e.jsx(N,{}),e.jsx(t,{children:e.jsx(d,{children:"Eroare"})})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(l,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>o("/marketing/templates"),children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Înapoi"})]}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Editare Șablon"})]})}),e.jsx(b,{children:e.jsxs(f,{className:"flex flex-col items-center justify-center h-64 space-y-4 py-10",children:[e.jsx(U,{className:"h-12 w-12 text-amber-500"}),e.jsx("h2",{className:"text-xl font-medium",children:"Șablon negăsit"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Șablonul cu ID-ul specificat nu a fost găsit. Este posibil să fi fost șters sau să nu aveți acces la el."}),e.jsx(l,{onClick:()=>o("/marketing/templates"),children:"Înapoi la Șabloane"})]})})]})};export{ne as default};
