import{r as m,j as e,A as g,g as C,_ as w,$ as y,a0 as T,B as P,a1 as L,h as S,q as A,I as z,S as p,af as B,ag as H,ah as R,ai as N,aj as k,y as D,D as E,E as x,G as o,H as q,J as c}from"./index-BzQLEEGE.js";import{u as G}from"./usePermissions-CsfBWgHN.js";function V(){const[l,r]=m.useState(""),[u,h]=m.useState(null),{data:n,isLoading:b,refetch:v}=G(),d=(n==null?void 0:n.data.reduce((s,a)=>{const i=a.module||"Altele";return s[i]||(s[i]=[]),s[i].push(a),s},{}))||{},t=Object.keys(d).sort();t.length>0&&!u&&h(t[0]);const j=(n==null?void 0:n.data.filter(s=>{if(!l)return!0;const a=l.toLowerCase();return s.name.toLowerCase().includes(a)||s.description&&s.description.toLowerCase().includes(a)||s.module&&s.module.toLowerCase().includes(a)}))||[];return j.reduce((s,a)=>{const i=a.module||"Altele";return s[i]||(s[i]=[]),s[i].push(a),s},{}),e.jsx(g,{children:e.jsxs("div",{className:"flex flex-col space-y-8",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Permisiuni"}),e.jsx("p",{className:"text-gray-500",children:"Vizualizați toate permisiunile disponibile în sistem"})]}),e.jsxs(C,{children:[e.jsx(w,{className:"px-5 pt-6 pb-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{children:"Permisiuni"}),e.jsx(T,{children:"Permisiunile disponibile pentru atribuire rolurilor"})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(P,{variant:"outline",size:"icon",onClick:()=>v(),title:"Reîmprospătează",children:e.jsx(L,{className:"h-4 w-4"})})})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("div",{className:"w-full sm:max-w-xs",children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(z,{placeholder:"Caută permisiuni...",className:"pl-8",value:l,onChange:s=>r(s.target.value)})]})}),b?e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{className:"h-8 w-full"}),e.jsx(p,{className:"h-64 w-full"})]}):l?e.jsx(f,{permissions:j}):e.jsxs(B,{value:u||void 0,onValueChange:h,children:[e.jsx(H,{className:"w-full flex-wrap",children:t.map(s=>e.jsxs(R,{value:s,className:"flex-grow",children:[s,e.jsx(N,{className:"ml-2",variant:"secondary",children:d[s].length})]},s))}),t.map(s=>e.jsx(k,{value:s,className:"pt-4",children:e.jsx(f,{permissions:d[s]})},s))]})]})})]})]})})}function f({permissions:l}){return e.jsx("div",{className:"rounded-md border",children:e.jsxs(D,{children:[e.jsx(E,{children:e.jsxs(x,{children:[e.jsx(o,{children:"Permisiune"}),e.jsx(o,{children:"Descriere"}),e.jsx(o,{children:"Modul"})]})}),e.jsx(q,{children:l.length===0?e.jsx(x,{children:e.jsx(c,{colSpan:3,className:"h-24 text-center",children:"Nu există permisiuni"})}):l.map(r=>e.jsxs(x,{children:[e.jsx(c,{className:"font-medium",children:r.name}),e.jsx(c,{children:r.description||"-"}),e.jsx(c,{children:e.jsx(N,{variant:"outline",children:r.module||"Altele"})})]},r.id))})]})})}export{V as default};
